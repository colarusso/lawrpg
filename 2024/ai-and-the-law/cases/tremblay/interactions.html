<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"> 
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<title>Prompt Interactions</title>
<script>

localStorage.setItem('templates',JSON.stringify({"Distill & Question":{"prompt":"{\"next\":\"Distill\"}","model":"gpt-3.5-turbo","temperature":0.7,"max_tokens":250,"output":0,"json_mode":1,"output_to":4,"behavior":"Case Texts","hide_button":false},"Go Socrates":{"prompt":"{\"next\":\"Socrates\"}","model":"gpt-3.5-turbo","temperature":0.7,"max_tokens":250,"output":0,"json_mode":1,"output_to":4,"behavior":"Case Texts","hide_button":false},"Moot the Case":{"prompt":"{\"next\":\"Moot\"}","model":"gpt-3.5-turbo","temperature":0.7,"max_tokens":250,"output":0,"json_mode":1,"output_to":4,"behavior":"Case Texts","hide_button":false},"Weekly Reflection":{"prompt":"You are a teaching assistant helping a student look back at their work this week. Be sure to get four big pieces of information. \n\n1. What they worked on this week, including any assigned readings.\n2. What about their process worked for them.\n3. What about their process didn't work for them. \n4. What suggestions they might have for doing things differently next week. \n\nAs a general approach, meet them where they are, but gently push for more detail. You need to be convinced that they actually did the work and that they've really thought about their process. If they didn't mention any readings, ask them if they had any readings this week. You don't need to interrogate them, just be sure they have engaged with your questions in good faith before moving on.\n\nDon't ask all your questions at once, let them come up in conversation. \n","model":"gpt-4o-mini","temperature":0.7,"max_tokens":500,"output":1,"json_mode":0,"output_to":0,"behavior":"chat","hide_button":false},"Distill":{"prompt":"You are a helpful research assistant. Your job is to answer questions about an ongoing legal case based solely on the documents provided below (i.e., the initial complaint from a plaintiff and motion to dismiss from the defendant). You're first task is to take these documents and provide a short 150-word summary. When asked follow-up questions, use the documents' text, and ONLY the documents' text, to answer these questions. If you can't find an answer in the text, politely decline to answer, explaining that you can't find the information. Do NOT write anything that isn't supported by the text of the document even if it is a general knowledge question. As far as you are concerned, you only know what is written in the text, nothing else. Provide internal citations to relevant sections when possible. Keep all of your replies short! But first, please provide a summary of the text.\n\n=======================================================\n\nHere are the case documents: \n\n============\n{{passThrough[\"case_text\"]}}","model":"gpt-4o-mini","temperature":0,"max_tokens":500,"output":1,"json_mode":0,"output_to":0,"behavior":"chat","hide_button":true},"Socrates":{"prompt":"You are an actor playing a law school professor conducting a Socratic dialogue. In this scene you are interacting with a student, asking them questions about a case. Below I will provide you with documents from the case for you to work with. Your job is to stay in character and act out your part. You are aiming for a realistic performance. To help you get into character, here is some background information.\n\nBACKGROUND\n\nYou're character is very similar in demeanor to Professor Charles W. Kingsfield Jr. in the Paper Chase. You are hard but fair, and see your role in class as that of Socrates. You're job is to have students come to understand the material through guided questions. The following is how you have described what you try to do for each dialogue. \n\nPreparation\n\n    - Choose a Case: Select a legal case that presents complex issues.\n    - Identify Issues: Pinpoint the main legal issues and principles in the case.\n    - Develop Questions: Create a sequence of questions ranging from broad to specific to guide the discussion.\n\nConducting the Dialogue\n\n    - Start Broad: Initiate with questions that summarize the case and identify issues.\n    - Probe Deeper: Continue with questions that analyze arguments, evaluate reasoning, and apply principles.\n    - Encourage Participation: Foster an inclusive atmosphere for all students to contribute.\n    - Guide Discussion: Facilitate the dialogue, connecting ideas and challenging assumptions.\n    - Clarify and Summarize: Regularly clarify points and summarize key takeaways.\n\nDeepening Understanding\n\n    - Reflect on Discussion: Encourage students to consider the broader implications and applications.\n    - Integrate Perspectives: Where relevant, bring in ethical, historical, or societal contexts.\n    - Provide Feedback: Offer constructive feedback on students' analyses.\n\nConcluding the Dialogue\n\n    - Wrap-Up: Summarize the discussion's main insights and their relevance.\n    - Connect Themes: Link the dialogue to overarching course themes.\n\nRemember, the case you are working with will be provided in an upload from the user. \n\nDIRECTION\n\nBe sure to keep your questions and responses short. You \"speak in sentences not paragraphs.\" Short and conversational, no speechifying!\n\nAfter you are provided with the case document(s), start the conversation by asking the user to \"Please describe the facts of the case.\"\n\nThink about how your character would respond and craft an appropriate reply. Remember, you are a law professor conducting a Socratic dialogue. Your goal is to embody your character while achieving a naturalistic believable performance. You will continue to play the part of your character throughout the conversation. Whatever happens, do NOT break character! \n\nIf the first user interaction doesn't involve uploading case documents, ask for them to do so.\n\n=======================================================\n\nHere are the case documents: \n\n============\n{{passThrough[\"case_text\"]}}","model":"gpt-4o-mini","temperature":0.7,"max_tokens":500,"output":1,"json_mode":0,"output_to":0,"behavior":"chat","hide_button":true},"Moot":{"prompt":"You are an actor serving as a judge in a moot court. In this scene you are interacting with a student, asking them questions about a case. Below I will provide you with documents from the case for you to work with. Your job is to stay in character and act out your part. You are aiming for a realistic performance. To help you get into character, here is some background information.\n\nYou are acting as a judge for a student attorney arguing a hypothetical case. A set of court documents that describe the case are provided below. You should start by asking the student attorney to state what side they are representing. Then lead right into questioning them about the merits of their case. \n\nYour role is to guide the proceedings, ensure fairness, and assess the students' understanding of the law and their ability to argue effectively. Here’s a short set of instructions to help you:\n\n1. Maintain Professionalism and Neutrality:\n\n    Conduct the proceedings with the same level of formality and seriousness as a real appellate court.\n    Remain impartial and do not show bias toward either side.\n\n2. Initiate the Session:\n\n    Begin by outlining the format of the proceedings.\n    Call on the student attorney to state what side they represent and to present their argument.\n\n3. Guide the Oral Argument:\n\n    Allow the student attorney to begin their argument, but be prepared to interject with questions throughout.\n    Engage actively with the attorney, posing questions that test their understanding, challenge their reasoning, or clarify their position.\n    Allow the attorney to respond fully before moving on to the next question or point.\n\n4. Ask Questions Thoughtfully and Strategically:\n\n    Use questions to probe the strengths and weaknesses of the attorney’s argument, much like in a real appellate court.\n    Challenge the attorney to defend their position under scrutiny, encouraging deep legal analysis.\n    Be respectful, but persistent in questioning to simulate the rigorous examination typical in appellate courts.\n\n5. Control the Dialogue:\n\n    Maintain control over the flow of the conversation, ensuring it stays focused on the legal issues at hand.\n    Politely steer the discussion back on track if the attorney digresses.\n\n6. Provide Constructive Feedback:\n\n    After the attorney concludes their argument, by saying something like, \"I rest my case,\" offer specific and constructive feedback.\n    Comment on the effectiveness of their legal reasoning, their responses to questions, and their overall presentation.\n    Be sure to include feedback that incorporates their opponent's likely arguments (as inferred from the court documents)\n    Suggest ways they could improve their performance in future arguments.\n\n7. Encourage and Motivate:\n\n    Conclude the session by acknowledging the effort and preparation of all participants.\n    Reinforce the educational value of the exercise and encourage the students to continue refining their advocacy skills.\n\nBy focusing on active engagement and thoughtful questioning, you can create a realistic and challenging appellate argument experience for the student attorneys.\n\n=======================================================\n\nHere are the case documents: \n\n============\n{{passThrough[\"case_text\"]}}\n\n=======================================================\n\nNow begin acting as the judge in the case, provide only your dialog, no need to prepend it with something like \"JUDGE:\" When speaking, think about how your character would speak and craft an appropriate reply. Your goal is to embody your character while achieving a naturalistic believable performance. You will continue to play the part of your character throughout the conversation. Whatever happens, do NOT break character! \n","model":"gpt-4o-mini","temperature":0.7,"max_tokens":500,"output":1,"json_mode":0,"output_to":0,"behavior":"chat","hide_button":true},"Case Texts":{"prompt":"[#You'll need to escape the case text before including it below. See https://www.freeformatter.com/json-escape.html#]{\n\"next\":\"{{passThrough[\"next\"]}}\",\n\"case_text\":\"Joseph R. Saveri (State Bar No. 130064)\\r\\nCadio Zirpoli (State Bar No. 179108)\\r\\nChristopher K.L. Young (State Bar No. 318371)\\r\\nKathleen J. McMahon (State Bar No. 340007)\\r\\nJOSEPH SAVERI LAW FIRM, LLP\\r\\n601 California Street, Suite 1000\\r\\nSan Francisco, California 94108\\r\\nTelephone: (415) 500-6800\\r\\nFacsimile: (415) 395-9940\\r\\nEmail: jsaveri@saverilawfirm.com\\r\\nczirpoli@saverilawfirm.com\\r\\ncyoung@saverilawfirm.com\\r\\nkmcmahon@saverilawfirm.com\\r\\nMatthew Butterick (State Bar No. 250953)\\r\\n1920 Hillhurst Avenue, #406\\r\\nLos Angeles, CA 90027\\r\\nTelephone: (323) 968-2632\\r\\nFacsimile: (415) 395-9940\\r\\nEmail: mb@buttericklaw.com\\r\\nCounsel for Individual and Representative Plaintiffs\\r\\nand the Proposed Class\\r\\nUNITED STATES DISTRICT COURT\\r\\nNORTHERN DISTRICT OF CALIFORNIA\\r\\nSAN FRANCISCO DIVISION\\r\\nPaul Tremblay, an individual and\\r\\nMona Awad, an individual,\\r\\nIndividual and Representative Plaintiffs,\\r\\nv.\\r\\nOpenAI, Inc., a Delaware nonprofit corporation; OpenAI,\\r\\nL.P., a Delaware limited partnership; OpenAI OpCo, L.L.C., a\\r\\nDelaware limited liability corporation; OpenAI GP, L.L.C., a\\r\\nDelaware limited liability company; OpenAI Startup Fund\\r\\nGP I, L.L.C., a Delaware limited liability company; OpenAI\\r\\nStartup Fund I, L.P., a Delaware limited partnership; and\\r\\nOpenAI Startup Fund Management, LLC, a Delaware\\r\\nlimited liability company,\\r\\nDefendants.\\r\\nCase No.\\r\\nComplaint\\r\\nClass Action\\r\\nDemand for Jury Trial\\r\\n\\r\\nPlaintiffs Paul Tremblay and Mona Awad (\\u201CPlaintiffs\\u201D), on behalf of themselves and all others\\r\\nsimilarly situated, bring this Class Action Complaint (the \\u201CComplaint\\u201D) against Defendants OpenAI,\\r\\nInc., OpenAI, L.P., OpenAI OpCo, L.L.C., OpenAI GP, L.L.C., OpenAI Startup Fund I, L.P., OpenAI\\r\\nStartup Fund GP I, L.L.C. and OpenAI Startup Fund Management, LLC for direct copyright\\r\\ninfringement, vicarious copyright infringement, violations of section 1202(b) of the Digital Millenium\\r\\nCopyright Act, unjust enrichment, violations of the California and common law unfair competition\\r\\nlaws, and negligence. Plaintiffs seek to recover injunctive relief and damages as a result and\\r\\nconsequence of Defendants\\u2019 unlawful conduct.\\r\\nI. OVERVIEW\\r\\n1. ChatGPT is a software product created, maintained, and sold by OpenAI.\\r\\n2. ChatGPT is powered by two AI software programs called GPT-3.5 and GPT-4, also\\r\\nknown as large language models. Rather than being programmed in the traditional way, a large language\\r\\nmodel is \\u201Ctrained\\u201D by copying massive amounts of text and extracting expressive information from it.\\r\\nThis body of text is called the training dataset. Once a large language model has copied and ingested the\\r\\ntext in its training dataset, it is able to emit convincingly naturalistic text outputs in response to user\\r\\nprompts.\\r\\n3. A large language model\\u2019s output is therefore entirely and uniquely reliant on the\\r\\nmaterial in its training dataset. Every time it assembles a text output, the model relies on the\\r\\ninformation it extracted from its training dataset.\\r\\n4. Plaintiffs and Class members are authors of books. Plaintiffs and Class members have\\r\\nregistered copyrights in the books they published. Plaintiffs and Class members did not consent to the\\r\\nuse of their copyrighted books as training material for ChatGPT. Nonetheless, their copyrighted\\r\\nmaterials were ingested and used to train ChatGPT.\\r\\n5. Indeed, when ChatGPT is prompted, ChatGPT generates summaries of Plaintiffs\\u2019\\r\\ncopyrighted works\\u2014something only possible if ChatGPT was trained on Plaintiffs\\u2019 copyrighted works.\\r\\n6. Defendants, by and through the use of ChatGPT, benefit commercial and profit richly\\r\\nfrom the use of Plaintiffs\\u2019 and Class members\\u2019 copyrighted materials.\\r\\nII. JURISDICTION AND VENUE\\r\\n7. This Court has subject matter jurisdiction under 28 U.S.C. \\u00A7 1331 because this case\\r\\narises under the Copyright Act (17 U.S.C. \\u00A7 501) and the Digital Millenium Copyright Act (17 U.S.C. \\u00A7\\r\\n1202).\\r\\n8. Jurisdiction and venue is proper in this judicial district under 28 U.S.C. \\u00A7 1391(c)(2)\\r\\nbecause defendant OpenAI, Inc. is headquartered in this district, and thus a substantial part of the\\r\\nevents giving rise to the claim occurred in this district; and because a substantial part of the events\\r\\ngiving rise to Plaintiffs\\u2019 claims occurred in this District, and a substantial portion of the affected\\r\\ninterstate trade and commerce was carried out in this District. Each Defendant has transacted business,\\r\\nmaintained substantial contacts, and\\/or committed overt acts in furtherance of the illegal scheme and\\r\\nconspiracy throughout the United States, including in this District. Defendants\\u2019 conduct has had the\\r\\nintended and foreseeable effect of causing injury to persons residing in, located in, or doing business\\r\\nthroughout the United States, including in this District.\\r\\n9. Under Civil Local Rule 3.2(c) and (e), assignment of this case to the San Francisco\\r\\nDivision is proper because defendant OpenAI, Inc. is headquartered in San Francisco, a substantial\\r\\namount part of the events giving rise to Plaintiffs\\u2019 claims and the interstate trade and commerce\\r\\ninvolved and affected by Defendants\\u2019 conduct giving rise to the claims herein occurred in this Division.\\r\\nIII. PARTIES\\r\\nA. Plaintiffs\\r\\n10. Plaintiff Paul Tremblay is a writer who lives in Massachusetts. Plaintiff Tremblay owns\\r\\nregistered copyrights in several books, including The Cabin at the End of the World. This book contains\\r\\nthe copyright-management information customarily included in published books, including the name of\\r\\nthe author and the year of publication.\\r\\n11. Plaintiff Mona Awad is a writer who lives in Massachusetts. Plaintiff Awad owns\\r\\nregistered copyrights in several books, including 13 Ways of Looking at a Fat Girl and Bunny. These\\r\\nbooks contain the copyright-management information customarily included in published books,\\r\\nincluding the name of the author and the year of publication.\\r\\n12. A nonexhaustive list of registered copyrights owned by Plaintiffs is included as\\r\\nExhibit A.\\r\\nB. Defendants\\r\\n13. Defendant OpenAI, Inc. is a Delaware nonprofit corporation with its principal place of\\r\\nbusiness located at 3180 18th St, San Francisco, CA 94110.\\r\\n14. Defendant OpenAI, L.P. is a Delaware limited partnership with its principal place of\\r\\nbusiness located at 3180 18th St, San Francisco, CA 94110. OpenAI, L.P. is a wholly owned subsidiary\\r\\nof OpenAI Inc. that is operated for profit. OpenAI, Inc. controls OpenAI, L.P. directly and through the\\r\\nother OpenAI entities.\\r\\n15. Defendant OpenAI OpCo, L.L.C. is a Delaware limited liability company with its\\r\\nprincipal place of business located at 3180 18th Street, San Francisco, CA 94110. OpenAI OpCo,\\r\\nL.L.C. is a wholly owned subsidiary of OpenAI, Inc. that is operated for profit. OpenAI, Inc. controls\\r\\nOpenAI OpCo, L.L.C. directly and through the other OpenAI entities.\\r\\n16. Defendant OpenAI GP, L.L.C. (\\u201COpenAI GP\\u201D) is a Delaware limited liability company\\r\\nwith its principal place of business located at 3180 18th Street, San Francisco, CA 94110. OpenAI GP is\\r\\nthe general partner of OpenAI, L.P. OpenAI GP manages and operates the day-to-day business and\\r\\naffairs of OpenAI, L.P. OpenAI GP was aware of the unlawful conduct alleged herein and exercised\\r\\ncontrol over OpenAI, L.P. throughout the Class Period. OpenAI, Inc. directly controls OpenAI GP.\\r\\n17. Defendant OpenAI Startup Fund I, L.P. (\\u201COpenAI Startup Fund I\\u201D) is a Delaware\\r\\nlimited partnership with its principal place of business located at 3180 18th Street, San Francisco, CA\\r\\n94110. OpenAI Startup Fund I was instrumental in the foundation of OpenAI, L.P., including the\\r\\ncreation of its business strategy and providing initial funding. OpenAI Startup Fund I was aware of the\\r\\nunlawful conduct alleged herein and exercised control over OpenAI, L.P. throughout the Class Period.\\r\\n18. Defendant OpenAI Startup Fund GP I, L.L.C. (\\u201COpenAI Startup Fund GP I\\u201D) is a\\r\\nDelaware limited liability company with its principal place of business located at 3180 18th Street, San\\r\\nFrancisco, CA 94110. OpenAI Startup Fund GP I is the general partner of OpenAI Startup Fund I.\\r\\nOpenAI Startup Fund GP I is a party to the unlawful conduct alleged herein. OpenAI Startup Fund GP\\r\\nI manages and operates the day-to-day business and affairs of OpenAI Startup Fund I.\\r\\n19. Defendant OpenAI Startup Fund Management, LLC (\\u201COpenAI Startup Fund\\r\\nManagement\\u201D) is a Delaware limited liability company with its principal place of business located at\\r\\n3180 18th Street, San Francisco, CA 94110. OpenAI Startup Fund Management is a party to the\\r\\nunlawful conduct alleged herein. OpenAI Startup Fund Management was aware of the unlawful\\r\\nconduct alleged herein and exercised control over OpenAI, L.P. throughout the Class Period.\\r\\nIV. AGENTS AND CO-CONSPIRATORS\\r\\n20. The unlawful acts alleged against the Defendants in this class action complaint were\\r\\nauthorized, ordered, or performed by the Defendants\\u2019 respective officers, agents, employees,\\r\\nrepresentatives, or shareholders while actively engaged in the management, direction, or control of the\\r\\nDefendants\\u2019 businesses or affairs. The Defendants\\u2019 agents operated under the explicit and apparent\\r\\nauthority of their principals. Each Defendant, and its subsidiaries, affiliates, and agents operated as a\\r\\nsingle unified entity.\\r\\n21. Various persons and\\/or firms not named as Defendants may have participated as co-\\r\\nconspirators in the violations alleged herein and may have performed acts and made statements in\\r\\nfurtherance thereof. Each acted as the principal, agent, or joint venture of, or for other Defendants with\\r\\nrespect to the acts, violations, and common course of conduct alleged herein.\\r\\nV. FACTUAL ALLEGATIONS\\r\\n22. OpenAI creates and sells artificial-intelligence software products. Artificial intelligence is\\r\\ncommonly abbreviated \\u201CAI.\\u201D AI software is designed to algorithmically simulate human reasoning or\\r\\ninference, often using statistical methods.\\r\\n23. Certain AI products created and sold by OpenAI are known as large language models. A\\r\\nlarge language model (or \\u201CLLM\\u201D for short) is AI software designed to parse and emit natural language.\\r\\nThough a large language model is a software program, it is not created the way most software programs\\r\\nare\\u2014that is, by human software engineers writing code. Rather, a large language model is \\u201Ctrained\\u201D by\\r\\ncopying massive amounts of text from various sources and feeding these copies into the model. This\\r\\ncorpus of input material is called the training dataset. During training, the large language model copies\\r\\neach piece of text in the training dataset and extracts expressive information from it. The large language\\r\\nmodel progressively adjusts its output to more closely resemble the sequences of words copied from\\r\\nthe training dataset. Once the large language model has copied and ingested all this text, it is able to\\r\\nemit convincing simulations of natural written language as it appears in the training dataset.\\r\\n24. Much of the material in OpenAI\\u2019s training datasets, however, comes from copyrighted\\r\\nworks\\u2014including books written by Plaintiffs\\u2014that were copied by OpenAI without consent, without\\r\\ncredit, and without compensation.\\r\\n25. Authors, including Plaintiffs, publish books with certain copyright management\\r\\ninformation. This information includes the book\\u2019s title, the ISBN number or copyright number, the\\r\\nauthor\\u2019s name, the copyright holder\\u2019s name, and terms and conditions of use. Most commonly, this\\r\\ninformation is found on the back of the book\\u2019s title page and is customarily included in all books,\\r\\nregardless of genre.\\r\\n26. OpenAI has released a series of large language models, including GPT-1 (released June\\r\\n2018), GPT-2 (February 2019), GPT-3 (May 2020), GPT-3.5 (March 2022), and most recently GPT-4\\r\\n(March 2023). \\u201CGPT\\u201D is an abbreviation for \\u201Cgenerative pre-trained transformer,\\u201D where pre-trained\\r\\nrefers to the use of textual material for training, generative refers to the model\\u2019s ability to emit text, and\\r\\ntransformer refers to the underlying training algorithm. Together, OpenAI\\u2019s large language models will\\r\\nbe referred to as the \\u201COpenAI Language Models.\\u201D\\r\\n27. Many kinds of material have been used to train large language models. Books, however,\\r\\nhave always been a key ingredient in training datasets for large language models because books offer the\\r\\nbest examples of high-quality longform writing.\\r\\n28. For instance, in its June 2018 paper introducing GPT-1 (called \\u201CImproving Language\\r\\nUnderstanding by Generative Pre-Training\\u201D), OpenAI revealed that it trained GPT-1 on BookCorpus,\\r\\na collection of \\u201Cover 7,000 unique unpublished books from a variety of genres including Adventure,\\r\\nFantasy, and Romance.\\u201D OpenAI confirmed why a dataset of books was so valuable: \\u201CCrucially, it\\r\\ncontains long stretches of contiguous text, which allows the generative model to learn to condition on\\r\\nlong-range information.\\u201D Hundreds of large language models have been trained on BookCorpus,\\r\\nincluding those made by OpenAI, Google, Amazon, and others.\\r\\n29. BookCorpus, however, is a controversial dataset. It was assembled in 2015 by a team of\\r\\nAI researchers for the purpose of training language models. They copied the books from a website\\r\\ncalled Smashwords.com that hosts unpublished novels that are available to readers at no cost. Those\\r\\nnovels, however, are largely under copyright. They were copied into the BookCorpus dataset without\\r\\nconsent, credit, or compensation to the authors.\\r\\n30. OpenAI also copied many books while training GPT-3. In the July 2020 paper\\r\\nintroducing GPT-3 (called \\u201CLanguage Models are Few-Shot Learners\\u201D), OpenAI disclosed that 15% of\\r\\nthe enormous GPT-3 training dataset came from \\u201Ctwo internet-based books corpora\\u201D that OpenAI\\r\\nsimply called \\u201CBooks1\\u201D and \\u201CBooks2\\u201D.\\r\\n31. Tellingly, OpenAI has never revealed what books are part of the Books1 and Books2\\r\\ndatasets. Though there are some clues. First, OpenAI admitted these are \\u201Cinternet-based books\\r\\ncorpora\\u201D. Second, both Books1 and Books2 are apparently much larger than BookCorpus. Based on\\r\\nnumbers given in OpenAI\\u2019s paper about GPT-3, Books1 is apparently about nine times larger; Books2\\r\\nis about 42 times larger. Since BookCorpus contained about 7,000 titles, this suggests Books1 would\\r\\ncontain about 63,000 titles; Books2 would contain about 294,000 titles.\\r\\n32. But there are only a handful of \\u201Cinternet-based books corpora\\u201D that would be able to\\r\\ndeliver this much material.\\r\\n33. As noted in Paragraph 31, supra, the OpenAI Books1 dataset can be estimated to contain\\r\\nabout 63,000 titles. Project Gutenberg is an online archive of e-books whose copyright has expired. In\\r\\nSeptember 2020, Project Gutenberg claimed to have \\u201Cover 60,000\\u201D titles. Project Gutenberg has long\\r\\nbeen popular for training AI systems due to the lack of copyright. In 2018, a team of AI researchers\\r\\ncreated the \\u201CStandardized Project Gutenberg Corpus\\u201D, which contained \\u201Cmore than 50,000 books\\u201D.\\r\\nOn information and belief, the OpenAI Books1 dataset is based on either the Standardized Project\\r\\nGutenberg Corpus or Project Gutenberg itself, because of the roughly similar sizes of the two datasets.\\r\\n34. As noted in Paragraph 31, supra, the OpenAI Books2 dataset can be estimated to contain\\r\\nabout 294,000 titles. The only \\u201Cinternet-based books corpora\\u201D that have ever offered that much\\r\\nmaterial are notorious \\u201Cshadow library\\u201D websites like Library Genesis (aka LibGen), Z-Library (aka B-\\r\\nok), Sci-Hub, and Bibliotik. The books aggregated by these websites have also been available in bulk via\\r\\ntorrent systems. These flagrantly illegal shadow libraries have long been of interest to the AI-training\\r\\ncommunity: for instance, an AI training dataset published in December 2020 by EleutherAI called\\r\\n\\u201CBooks3\\u201D includes a recreation of the Bibliotik collection and contains nearly 200,000 books. On\\r\\ninformation and belief, the OpenAI Books2 dataset includes books copied from these \\u201Cshadow\\r\\nlibraries\\u201D, because those are the most sources of trainable books most similar in nature and size to\\r\\nOpenAI\\u2019s description of Books2.\\r\\n35. In March 2023, OpenAI\\u2019s paper introducing GPT-4 contained no information about its\\r\\ndataset at all: OpenAI claimed that \\u201C[g]iven both the competitive landscape and the safety implications\\r\\nof large-scale models like GPT-4, this report contains no further details about . . . dataset\\r\\nconstruction.\\u201D Later in the paper, OpenAI concedes it did \\u201Cfilter[ ] our dataset . . . to specifically\\r\\nreduce the quantity of inappropriate erotic text content.\\u201D\\r\\nA. Interrogating the OpenAI Language Models using ChatGPT\\r\\n36. ChatGPT is a language model created and sold by OpenAI. As its name suggests,\\r\\nChatGPT is designed to offer a conversational style of interaction with a user. OpenAI offers ChatGPT\\r\\nthrough a web interface to individual users for $20 per month. Through the web interface, users can\\r\\nchoose to use two versions of ChatGPT: one based on the GPT-3.5 model, and one based on the newer\\r\\nGPT-4 model.\\r\\n37. OpenAI also offers ChatGPT to software developers through an application-\\r\\nprogramming interface (or \\u201CAPI\\u201D). The API allows developers to write programs that exchange data\\r\\nwith ChatGPT. Access to ChatGPT via the API is billed on the basis of usage.\\r\\n38. Regardless of how accessed\\u2014either through the web interface or through the API\\u2014\\r\\nChatGPT allows users to enter text prompts, which ChatGPT then attempts to respond to in a natural\\r\\nway, i.e., ChatGPT can generate answers in a coherent and fluent way that closely mimics human\\r\\nlanguage. If a user prompts ChatGPT with a question, ChatGPT will answer. If a user prompts\\r\\nChatGPT with a command, ChatGPT will obey. If a user prompts ChatGPT to summarize a\\r\\ncopyrighted book, it will do so.\\r\\n39. ChatGPT\\u2019s output, like other LLMs, relies on the data upon which it is trained to\\r\\ngenerate new content. LLMs generate output based on patterns and connections drawn from the\\r\\ntraining data. For example, if an LLM is prompted to generate a writing in the style of a certain author,\\r\\nthe LLM would generate content based on patterns and connections it learned from analysis of that\\r\\nauthor\\u2019s work within its training data.\\r\\n40. On information and belief, the reason ChatGPT can accurately summarize a certain\\r\\ncopyrighted book is because that book was copied by OpenAI and ingested by the underlying OpenAI\\r\\nLanguage Model (either GPT-3.5 or GPT-4) as part of its training data.\\r\\n41. When ChatGPT was prompted to summarize books written by each of the Plaintiffs, it\\r\\ngenerated very accurate summaries. These summaries are attached as Exhibit B. The summaries get\\r\\nsome details wrong. These details are highlighted in the summaries. This is expected, since a large\\r\\nlanguage model mixes together expressive material derived from many sources. Still, the rest of the\\r\\nsummaries are accurate, which means that ChatGPT retains knowledge of particular works in the\\r\\ntraining dataset and is able to output similar textual content. At no point did ChatGPT reproduce any\\r\\nof the copyright management information Plaintiffs included with their published works.\\r\\nVI. CLASS ALLEGATIONS\\r\\nA. Class Definition\\r\\n42. Plaintiffs bring this action for damages and injunctive relief as a class action under\\r\\nFederal Rules of Civil Procedure 23(a), 23(b)(2), and 23(b)(3), on behalf of the following Class:\\r\\nAll persons or entities domiciled in the United States that own a\\r\\nUnited States copyright in any work that was used as training data\\r\\nfor the OpenAI Language Models during the Class Period.\\r\\n43. This Class definition excludes:\\r\\na. any of the Defendants named herein;\\r\\nb. any of the Defendants\\u2019 co-conspirators;\\r\\nc. any of Defendants\\u2019 parent companies, subsidiaries, and affiliates;\\r\\nd. any of Defendants\\u2019 officers, directors, management, employees, subsidiaries,\\r\\naffiliates, or agents;\\r\\ne. all governmental entities; and\\r\\nf. the judges and chambers staff in this case, as well as any members of their\\r\\nimmediate families.\\r\\nB. Numerosity\\r\\n44. Plaintiffs do not know the exact number of members in the Class. This information is in\\r\\nthe exclusive control of Defendants. On information and belief, there are at least thousands of members\\r\\nin the Class geographically dispersed throughout the United States. Therefore, joinder of all members\\r\\nof the Class in the prosecution of this action is impracticable.\\r\\nC. Typicality\\r\\n45. Plaintiffs\\u2019 claims are typical of the claims of other members of the Class because\\r\\nPlaintiffs and all members of the Class were damaged by the same wrongful conduct of Defendants as\\r\\nalleged herein, and the relief sought herein is common to all members of the Class.\\r\\nD. Adequacy\\r\\n46. Plaintiffs will fairly and adequately represent the interests of the members of the Class\\r\\nbecause the Plaintiffs have experienced the same harms as the members of the Class and have no\\r\\nconflicts with any other members of the Class. Furthermore, Plaintiffs have retained sophisticated and\\r\\ncompetent counsel who are experienced in prosecuting federal and state class actions, as well as other\\r\\ncomplex litigation.\\r\\nE. Commonality and Predominance\\r\\n47. Numerous questions of law or fact common to each Class arise from Defendants\\u2019\\r\\nconduct:\\r\\na. whether Defendants violated the copyrights of Plaintiffs and the Class when they\\r\\ndownloaded copies of Plaintiff\\u2019s copyrighted books and used them to train ChatGPT;\\r\\nb. whether ChatGPT itself is an infringing derivative work based on Plaintiffs\\u2019 copyrighted\\r\\nbooks;\\r\\nc. whether the text outputs of ChatGPT are infringing derivative works based on Plaintiffs\\u2019\\r\\ncopyrighted books;\\r\\nd. whether Defendants violated the DMCA by removing copyright-management\\r\\ninformation (CMI) from Plaintiffs\\u2019 copyrighted books.\\r\\ne. Whether Defendants were unjustly enriched by the unlawful conduct alleged herein.\\r\\nf. Whether Defendants\\u2019 conduct alleged herein constitutes Unfair Competition under\\r\\nCalifornia Business and Professions Code section 17200 et seq.\\r\\ng. Whether Defendants\\u2019 conduct alleged herein constitutes unfair competition under the\\r\\ncommon law.\\r\\nh. Whether this Court should enjoin Defendants from engaging in the unlawful conduct\\r\\nalleged herein. And what the scope of that injunction would be.\\r\\ni. Whether any affirmative defense excuses Defendants\\u2019 conduct.\\r\\nj. Whether any statutes of limitation limits Plaintiffs\\u2019 and the Class\\u2019s potential for recovery.\\r\\n48. These and other questions of law and fact are common to the Class predominate over\\r\\nany questions affecting the members of the Class individually.\\r\\nF. Other Class Considerations\\r\\n49. Defendants have acted on grounds generally applicable to the Class. This class action is\\r\\nsuperior to alternatives, if any, for the fair and efficient adjudication of this controversy. Prosecuting the\\r\\nclaims pleaded herein as a class action will eliminate the possibility of repetitive litigation. There will be\\r\\nno material difficulty in the management of this action as a class action. Further, final injunctive relief is\\r\\nappropriate with respect to the Class as a whole.\\r\\n50. The prosecution of separate actions by individual Class members would create the risk\\r\\nof inconsistent or varying adjudications, establishing incompatible standards of conduct for\\r\\nDefendants.\\r\\nVII. CLAIMS FOR RELIEF\\r\\nCOUNT I\\r\\nDirect Copyright Infringement\\r\\n17 U.S.C. \\u00A7 106\\r\\nOn Behalf of Plaintiffs and the Class\\r\\n51. Plaintiffs incorporate by reference the preceding factual allegations.\\r\\n52. As the owners of the registered copyrights in books used to train the OpenAI Language\\r\\nModels, Plaintiffs hold the exclusive rights to those texts under 17 U.S.C. \\u00A7 106.\\r\\n53. Plaintiffs never authorized OpenAI to make copies of their books, make derivative\\r\\nworks, publicly display copies (or derivative works), or distribute copies (or derivative works). All those\\r\\nrights belong exclusively to Plaintiffs under copyright law.\\r\\n54. On information and belief, to train the OpenAI Language Models, OpenAI relied on\\r\\nharvesting mass quantities of textual material from the public internet, including Plaintiffs\\u2019 books,\\r\\nwhich are available in digital formats.\\r\\n55. OpenAI made copies of Plaintiffs\\u2019 books during the training process of the OpenAI\\r\\nLanguage Models without Plaintiffs\\u2019 permission. Specifically, OpenAI copied at least Plaintiff\\r\\nTremblay\\u2019s book The Cabin at the End of the World; and Plaintiff Awad\\u2019s books 13 Ways of Looking at a\\r\\nFat Girl and Bunny. Together, these books are referred to as the Infringed Works.\\r\\n56. Because the OpenAI Language Models cannot function without the expressive\\r\\ninformation extracted from Plaintiffs\\u2019 works (and others) and retained inside them, the OpenAI\\r\\nLanguage Models are themselves infringing derivative works, made without Plaintiffs\\u2019 permission and\\r\\nin violation of their exclusive rights under the Copyright Act.\\r\\n57. Plaintiffs have been injured by OpenAI\\u2019s acts of direct copyright infringement. Plaintiffs\\r\\nare entitled to statutory damages, actual damages, restitution of profits, and other remedies provided\\r\\nby law.\\r\\nCOUNT 2\\r\\nVicarious Copyright Infringement\\r\\n17 U.S.C. \\u00A7 106\\r\\nOn Behalf of Plaintiffs and the Class\\r\\n58. Plaintiffs incorporate by reference the preceding factual allegations.\\r\\n59. Because the output of the OpenAI Language Models is based on expressive information\\r\\nextracted from Plaintiffs\\u2019 works (and others), every output of the OpenAI Language Models is an\\r\\ninfringing derivative work, made without Plaintiffs\\u2019 permission and in violation of their exclusive rights\\r\\nunder the Copyright Act.\\r\\n60. OpenAI has the right and ability to control the output of the OpenAI Language Models.\\r\\nOpenAI has benefited financially from the infringing output of the OpenAI Language Models.\\r\\nTherefore, every output from the OpenAI Language Models constitutes an act of vicarious copyright\\r\\ninfringement.\\r\\n61. Plaintiffs have been injured by OpenAI\\u2019s acts of vicarious copyright infringement.\\r\\nPlaintiffs are entitled to statutory damages, actual damages, restitution of profits, and other remedies\\r\\nprovided by law.\\r\\nCOUNT 3\\r\\nDigital Millenium Copyright Act\\u2014Removal of Copyright Management Information\\r\\n17 U.S.C. \\u00A7 1202(b)\\r\\nOn Behalf of Plaintiffs and the Class\\r\\n62. Plaintiffs incorporate by reference the preceding factual allegations.\\r\\n63. Plaintiffs included one or more forms of copyright-management information (\\u201CCMI\\u201D)\\r\\nin each of the Plaintiffs\\u2019 Infringed Works, including: copyright notice, title and other identifying\\r\\ninformation, the name or other identifying information about the owners of each book, terms and\\r\\nconditions of use, and identifying numbers or symbols referring to CMI.\\r\\n64. Without the authority of Plaintiffs and the Class, OpenAI copied the Plaintiffs\\u2019\\r\\nInfringed Works and used them as training data for the OpenAI Language Models. By design, the\\r\\ntraining process does not preserve any CMI. Therefore, OpenAI intentionally removed CMI from the\\r\\nPlaintiffs\\u2019 Infringed Works in violation of 17 U.S.C. \\u00A7 1202(b)(1).\\r\\n65. Without the authority of Plaintiffs and the Class, Defendants created derivative works\\r\\nbased on Plaintiffs\\u2019 Infringed Works. By distributing these works without their CMI, OpenAI violated\\r\\n17 U.S.C. \\u00A7 1202(b)(3).\\r\\n66. OpenAI knew or had reasonable grounds to know that this removal of CMI would\\r\\nfacilitate copyright infringement by concealing the fact that every output from the OpenAI Language\\r\\nModels is an infringing derivative work, synthesized entirely from expressive information found in the\\r\\ntraining data.\\r\\n67. Plaintiffs have been injured by OpenAI\\u2019s removal of CMI. Plaintiffs are entitled to\\r\\nstatutory damages, actual damages, restitution of profits, and other remedies provided by law.\\r\\nCOUNT 4\\r\\nUnfair Competition\\r\\nCal. Bus. & Prof. Code \\u00A7\\u00A7 17200, et seq.\\r\\nOn Behalf of Plaintiffs and the Class\\r\\n68. Plaintiffs incorporate by reference the preceding factual allegations.\\r\\n69. Defendants have engaged in unlawful business practices, including violating Plaintiffs\\u2019\\r\\nrights under the DMCA, and using Plaintiffs\\u2019 Infringed Works to train ChatGPT without Plaintiffs\\u2019 or\\r\\nthe Class\\u2019s authorization.\\r\\n70. The unlawful business practices described herein violate California Business and\\r\\nProfessions Code section 17200 et seq. (the \\u201CUCL\\u201D) because that conduct is otherwise unlawful by\\r\\nviolating the DMCA.\\r\\n71. The unlawful business practices described herein violate the UCL because they are\\r\\nunfair, immoral, unethical, oppressive, unscrupulous or injurious to consumers, because, among other\\r\\nreasons, Defendants used Plaintiffs\\u2019 protected works to train ChatGPT for Defendants\\u2019 own\\r\\ncommercial profit without Plaintiffs\\u2019 and the Class\\u2019s authorization. Defendants further knowingly\\r\\ndesigned ChatGPT to output portions or summaries of Plaintiffs\\u2019 copyrighted works without\\r\\nattribution, and they unfairly profit from and take credit for developing a commercial product based on\\r\\nunattributed reproductions of those stolen writing and ideas.\\r\\n72. The unlawful business practices described herein violate the UCL because consumers\\r\\nare likely to be deceived. Defendants knowingly and secretively trained ChatGPT on unauthorized\\r\\ncopies of Plaintiffs\\u2019 copyright-protected work. Further Defendants deceptively designed ChatGPT to\\r\\noutput without any CMI or other credit to Plaintiffs and Class members whose Infringed Works\\r\\ncomprise ChatGPT\\u2019s training dataset. Defendants deceptively marketed their product in a manner that\\r\\nfails to attribute the success of their product to the copyright-protected work on which it is based.\\r\\nCOUNT 5\\r\\nNegligence\\r\\nOn Behalf of Plaintiffs and the Class\\r\\n73. Plaintiffs incorporate by reference the preceding factual allegations.\\r\\n74. Defendants owed a duty of care toward Plaintiffs and the Class based upon Defendants\\u2019\\r\\nrelationship to them. This duty is based upon Defendants\\u2019 obligations, custom and practice, right to\\r\\ncontrol information in its possession, exercise of control over the information in its possession,\\r\\nauthority to control the information in its possession, and the commission of affirmative acts that result\\r\\nin said harms and losses. Additionally, this duty is based on the requirements of California Civil Code\\r\\nsection 1714, requiring all \\u201Cpersons,\\u201D including Defendants, to act in a reasonable manner toward\\r\\nothers.\\r\\n75. Defendants breached their duties by negligently, carelessly, and recklessly collecting,\\r\\nmaintaining and controlling Plaintiffs\\u2019 and Class members\\u2019 Infringed Works and engineering,\\r\\ndesigning, maintaining and controlling systems\\u2014including ChatGPT\\u2014which are trained on Plaintiffs\\u2019\\r\\nand Class members\\u2019 Infringed Works without their authorization.\\r\\n76. Defendants owed Plaintiffs and Class members a duty of care to maintain Plaintiffs\\u2019\\r\\nInfringed Works once collected and ingested for training ChatGPT.\\r\\n77. Defendants also owed Plaintiffs and Class members a duty of care to not use the\\r\\nInfringed Works in a way that would foreseeably cause Plaintiffs and Class members injury, for\\r\\ninstance, by using the Infringed Works to train ChatGPT.\\r\\n78. Defendants breached their duties by, inter alia, using Plaintiffs\\u2019 Infringed Works to train\\r\\nChatGPT.\\r\\nCOUNT 6\\r\\nUnjust Enrichment\\r\\nOn Behalf of Plaintiffs and the Class\\r\\n79. Plaintiffs incorporate by reference the preceding factual allegations.\\r\\n80. Plaintiffs and the Class have invested substantial time and energy in creating the\\r\\nInfringed Works.\\r\\n81. Defendants have unjustly utilized access to the Infringed Materials to train ChatGPT.\\r\\n82. Plaintiffs did not consent to the unauthorized use of the Infringed Materials to train\\r\\nChatGPT.\\r\\n83. By using Plaintiffs\\u2019 Infringed Works to train ChatGPT, Plaintiffs and the Class were\\r\\ndeprived of the benefits of their work, including monetary damages.\\r\\n84. Defendants derived profit and other benefits from the use of the Infringed Materials to\\r\\ntrain ChatGPT.\\r\\n85. It would be unjust for Defendants to retain those benefits.\\r\\n86. The conduct of Defendants is causing and, unless enjoined and restrained by this Court,\\r\\nwill continue to cause Plaintiffs and the Class great and irreparable injury that cannot fully be\\r\\ncompensated or measured in money.\\r\\nVIII. DEMAND FOR JUDGMENT\\r\\nWherefore, Plaintiffs request that the Court enter judgment on their behalf and on behalf of\\r\\nthe Class defined herein, by ordering:\\r\\na) This action may proceed as a class action, with Plaintiffs serving as Class\\r\\nRepresentatives, and with Plaintiffs\\u2019 counsel as Class Counsel.\\r\\nb) Judgment in favor of Plaintiffs and the Class and against Defendants.\\r\\nc) An award of statutory and other damages under 17 U.S.C. \\u00A7 504 for violations of the\\r\\ncopyrights of Plaintiffs and the Class by Defendants.\\r\\nd) Permanent injunctive relief, including but not limited to changes to ChatGPT to ensure\\r\\nthat all applicable information set forth in 17 U.S.C. \\u00A7 1203(b)(1) is included when\\r\\nappropriate.\\r\\ne) An order of costs and allowable attorney\\u2019s fees under 17 U.S.C. \\u00A7 1203(b)(4)\\u2013(5).\\r\\nf) An award of statutory damages under 17 U.S.C. \\u00A7 1203(b)(3) and 17 U.S.C. \\u00A7 1203(c)(3),\\r\\nor in the alternative, an award of actual damages and any additional profits under 17\\r\\nU.S.C. \\u00A7 1203(c)(2) (including tripling damages under 17 U.S.C. \\u00A7 1203(c)(4) if\\r\\napplicable).\\r\\ng) Pre- and post-judgment interest on the damages awarded to Plaintiffs and the Class, and\\r\\nthat such interest be awarded at the highest legal rate from and after the date this class\\r\\naction complaint is first served on Defendants.\\r\\nh) Defendants are to be jointly and severally responsible financially for the costs and\\r\\nexpenses of a Court approved notice program through post and media designed to give\\r\\nimmediate notification to the Class.\\r\\ni) Further relief for Plaintiffs and the Class as may be just and proper.\\r\\nIX. JURY TRIAL DEMANDED\\r\\nUnder Federal Rule of Civil Procedure 38(b), Plaintiffs demand a trial by jury of all the claims\\r\\nasserted in this Complaint so triable.\\r\\nDated: June 28, 2023 By: \\/s\\/ Joseph R. Saveri\\r\\nJoseph R. Saveri\\r\\nJoseph R. Saveri (State Bar No. 130064)\\r\\nCadio Zirpoli (State Bar No. 179108)\\r\\nChristopher K.L. Young (State Bar No. 318371)\\r\\nKathleen J. McMahon (State Bar No. 340007)\\r\\nJOSEPH SAVERI LAW FIRM, LLP\\r\\n601 California Street, Suite 1000\\r\\nSan Francisco, California 94108\\r\\nTelephone: (415) 500-6800\\r\\nFacsimile: (415) 395-9940\\r\\nEmail: jsaveri@saverilawfirm.com\\r\\nczirpoli@saverilawfirm.com\\r\\ncyoung@saverilawfirm.com\\r\\nkmcmahon@saverilawfirm.com\\r\\nMatthew Butterick (State Bar No. 250953)\\r\\n1920 Hillhurst Avenue, #406\\r\\nLos Angeles, CA 90027\\r\\nTelephone: (323) 968-2632\\r\\nFacsimile: (415) 395-9940\\r\\nEmail: mb@buttericklaw.com\\r\\nCounsel for Individual and Representative\\r\\nPlaintiffs and the Proposed Class\\n============\\nMORRISON & FOERSTER LLP\\r\\nJoseph C. Gratz (SBN 240676)\\r\\njgratz@mofo.com\\r\\nTiffany Cheung (SBN 211497)\\r\\ntcheung@mofo.com\\r\\n425 Market Street\\r\\nSan Francisco, CA 94105\\r\\nTelephone: 415.258.7522\\r\\nAllyson R. Bennett (SBN 302090)\\r\\nabennett@mofo.com\\r\\n707 Wilshire Boulevard, Suite 6000\\r\\nLos Angeles, CA 90017-3543\\r\\nTelephone: 213.892.5454\\r\\nLATHAM & WATKINS LLP\\r\\nAndrew M. Gass (SBN 259694)\\r\\nandrew.gass@lw.com\\r\\nJoseph R. Wetzel (SBN 238008)\\r\\njoseph.wetzel@lw.com\\r\\n505 Montgomery Street, Suite 2000\\r\\nSan Francisco, CA 94111\\r\\nTelephone: 415.391.0600\\r\\nSarang V. Damle (pro hac vice pending)\\r\\nsy.damle@lw.com\\r\\n555 Eleventh Street, NW, Suite 1000\\r\\nWashington, D.C. 20004\\r\\nTelephone: 202.637.2200\\r\\nAllison L. Stillman (pro hac vice pending)\\r\\nalli.stillman@lw.com\\r\\n1271 Avenue of the Americas\\r\\nNew York, NY 10020\\r\\nTelephone: 212.751.4864\\r\\nAttorneys for Defendants OpenAI, Inc.,\\r\\nOpenAI, L.P., OpenAI OpCo, L.L.C., OpenAI\\r\\nGP, L.L.C., OpenAI Startup Fund GP I, L.L.C.,\\r\\nOpenAI Startup Fund I, L.P., and OpenAI\\r\\nStartup Fund Management, LLC\\r\\nUNITED STATES DISTRICT COURT\\r\\nNORTHERN DISTRICT OF CALIFORNIA\\r\\nSAN FRANCISCO DIVISION\\r\\nPAUL TREMBLAY, an individual;\\r\\nMONA AWAD, an individual,\\r\\nIndividual and Representative Plaintiffs,\\r\\nv.\\r\\nOPENAI, INC., a Delaware nonprofit corporation;\\r\\nOPENAI, L.P., a Delaware limited partnership;\\r\\nOPENAI OPCO, L.L.C., a Delaware limited\\r\\nliability corporation; OPENAI GP, L.L.C., a\\r\\nDelaware limited liability company; OPENAI\\r\\nSTARTUP FUND GP I, L.L.C., a Delaware limited\\r\\nliability company; OPENAI STARTUP FUND I,\\r\\nL.P., a Delaware limited partnership; and OPENAI\\r\\nSTARTUP FUND MANAGEMENT, LLC, a\\r\\nDelaware limited liability company,\\r\\nDefendants.\\r\\nCASE NO. 3:23-cv-03223-AMO\\r\\nDEFENDANTS\\u2019 NOTICE OF MOTION,\\r\\nMOTION TO DISMISS, AND\\r\\nMEMORANDUM OF POINTS AND\\r\\nAUTHORITIES IN SUPPORT OF\\r\\nMOTION TO DISMISS\\r\\nDate: December 7, 2023\\r\\nTime: 2:00 pm\\r\\nPlace: Courtroom 10 - 19th Floor\\r\\nBefore: Hon. Araceli Mart\\u00EDnez-Olgu\\u00EDn\\r\\nTO ALL PARTIES AND THEIR ATTORNEYS OF RECORD:\\r\\nPLEASE TAKE NOTICE that on December 7, 2023 at 2:00 p.m., or as soon thereafter\\r\\nas the matter may be heard, in the United States District Court for the Northern District of\\r\\nCalifornia, Courtroom 10, 19th Floor, located at 450 Golden Gate Ave., San Francisco, CA 94102,\\r\\nDefendants OpenAI, Inc., OpenAI, L.P., OpenAI OpCo, L.L.C., OpenAI GP, L.L.C., OpenAI\\r\\nStartup Fund GP I, L.L.C., OpenAI Startup Fund I, L.P., and OpenAI Startup Fund Management,\\r\\nLLC (together, \\u201COpenAI\\u201D), through their undersigned counsel, will, and hereby do, move to\\r\\ndismiss Counts II through VI of the Class Action Complaint (\\u201CCompl.\\u201D or \\u201CComplaint\\u201D) pursuant\\r\\nto Federal Rule of Civil Procedure (\\u201CFRCP\\u201D) 12(b)(6).\\r\\nOpenAI\\u2019s Motion to Dismiss is based on this Notice, the supporting Memorandum of\\r\\nPoints and Authorities, the complete files and records in this action, and any additional material\\r\\nand arguments as may be considered in connection with the hearing on the Motion.\\r\\nSTATEMENT OF RELIEF SOUGHT\\r\\nOpenAI seeks an order pursuant to FRCP 12(b)(6) dismissing Counts II through VI of the\\r\\nComplaint for failure to state a claim upon which relief can be granted.\\r\\nISSUES TO BE DECIDED\\r\\nThe Motion presents the following issues to be decided: (1) Whether Count II of the\\r\\nComplaint, for vicarious copyright infringement, should be dismissed for failure to plead an act of\\r\\ndirect infringement and\\/or failure to plead facts to support the elements of a vicarious infringement\\r\\nclaim; (2) Whether Count III of the Complaint, for violation of Section 1202 of the DMCA, see\\r\\n17 U.S.C. \\u00A7 1202(b), should be dismissed for failure to allege removal or alteration of copyright\\r\\nmanagement information, failure to plead facts to raise a reasonable inference of scienter, and\\/or\\r\\nfailure to allege that OpenAI distributed \\u201Ccop[ies]\\u201D of Plaintiff\\u2019s work; (3) Whether Count IV of\\r\\nthe Complaint, for violation of Cal. Bus. & Prof. Code \\u00A7 17200, et seq., should be dismissed for\\r\\nfailure to state a predicate violation, failure to allege economic harm, and\\/or failure to establish\\r\\nthat Plaintiff lacks an adequate remedy at law; (4) Whether Count V of the Complaint, for\\r\\n\\u201Cnegligence,\\u201D should dismissed for failure to plead negligence and\\/or failure to plead facts\\r\\nsufficient to establish that OpenAI owed a duty; (5) Whether Count VI of the Complaint, for\\r\\n\\u201Cunjust enrichment,\\u201D should be dismissed for failure to plead facts to satisfy the elements of an\\r\\nunjust enrichment claim; and (6) Whether Counts V and VI of the Complaint, for \\u201Cnegligence\\u201D\\r\\nand \\u201Cunjust enrichment,\\u201D should be dismissed as preempted by Section 301 of the Copyright Act.\\r\\nDated: August 28, 2023 Respectfully submitted,\\r\\nBy: \\/s\\/ Joseph C. Gratz\\r\\nMORRISON & FOERSTER LLP\\r\\nJoseph C. Gratz (SBN 240676)\\r\\njgratz@mofo.com\\r\\nTiffany Cheung (SBN 211497)\\r\\ntcheung@mofo.com\\r\\n425 Market Street\\r\\nSan Francisco, CA 94105\\r\\nTelephone: 415.258.7522\\r\\nAllyson R. Bennett (SBN 302090)\\r\\nabennett@mofo.com\\r\\n707 Wilshire Boulevard, Suite 6000\\r\\nLos Angeles, CA 90017-3543\\r\\nTelephone: 213.892.5454\\r\\nBy: \\/s\\/ Andrew M. Gass\\r\\nLATHAM & WATKINS LLP\\r\\nAndrew M. Gass (SBN 259694)\\r\\nandrew.gass@lw.com\\r\\nJoseph R. Wetzel (SBN 238008)\\r\\njoseph.wetzel@lw.com\\r\\n505 Montgomery Street, Suite 2000\\r\\nSan Francisco, CA 94111\\r\\nTelephone: 415.391.0600\\r\\nSarang V. Damle (pro hac vice pending)\\r\\nsy.damle@lw.com\\r\\n555 Eleventh Street, NW, Suite 1000\\r\\nWashington, D.C. 20004\\r\\nTelephone: 202.637.2200\\r\\nAllison L. Stillman (pro hac vice pending)\\r\\nalli.stillman@lw.com\\r\\n1271 Avenue of the Americas\\r\\nNew York, NY 10020\\r\\nTelephone: 212.751.4864\\r\\nAttorneys for Defendants OpenAI, Inc., OpenAI,\\r\\nL.P., OpenAI OpCo, L.L.C., OpenAI GP, L.L.C.,\\r\\nOpenAI Startup Fund GP I, L.L.C., OpenAI\\r\\nStartup Fund I, L.P., and OpenAI Startup Fund\\r\\nManagement, LLC\\r\\nTABLE OF CONTENTS Page\\r\\nI. INTRODUCTION ............................................................................................................. 1\\r\\nII. FACTS ALLEGED............................................................................................................ 4\\r\\nIII. LEGAL STANDARD........................................................................................................ 5\\r\\nIV. ARGUMENT ..................................................................................................................... 6\\r\\nA. The Limited Copyright Monopoly ......................................................................... 6\\r\\n1. The Copyright Act Grants Only Specific, Enumerated Rights .................. 6\\r\\n2. Copyright Does Not Protect Ideas, Facts, or Language ............................. 6\\r\\n3. Substantial Similarity Is Required for Infringement .................................. 7\\r\\n4. Fair Use Is Not Infringement ..................................................................... 7\\r\\nB. The Bulk of Plaintiffs\\u2019 Claims Should Be Dismissed ........................................... 8\\r\\n1. Plaintiffs Fail to State a Vicarious Infringement Claim............................. 8\\r\\na. Plaintiffs Have Not Alleged Direct Infringement .......................... 9\\r\\nb. Plaintiffs Have Not Alleged the \\u201CRight and Ability to\\r\\nSupervise\\u201D .................................................................................... 10\\r\\nc. Plaintiffs Have Not Alleged \\u201CDirect Financial Interest\\u201D ............. 11\\r\\n2. Plaintiffs Fail to State a Claim under Section 1202(b) of the\\r\\nDMCA...................................................................................................... 11\\r\\na. Copyright Management Information and the DMCA .................. 12\\r\\nb. Plaintiffs Fail to State a DMCA Claim ........................................ 13\\r\\ni. Section 1202(b)(1) ........................................................... 14\\r\\nii. Section 1202(b)(3) ........................................................... 17\\r\\n3. Plaintiffs Fail to State a UCL Claim ........................................................ 18\\r\\n4. Plaintiffs Fail to State a Claim for Negligence ........................................ 20\\r\\n5. Plaintiffs Fail to State a Claim for Unjust Enrichment ............................ 21\\r\\n6. The Negligence and Unjust Enrichment Claims Are Preempted............. 22\\r\\nV. CONCLUSION ................................................................................................................ 24\\r\\nTABLE OF AUTHORITIES Page(s)\\r\\nCASES\\r\\nA.V. ex rel. Vanderhye v. iParadigms, LLC,\\r\\n562 F.3d 630 (4th Cir. 2009) ................................................................................................ 2, 8\\r\\nA\\u2019Lor Int\\u2019l, Ltd. v. Tapper Fine Jewelry, Inc.,\\r\\nNo. 12-cv-02215, 2012 WL 12921035 (C.D. Cal. Aug. 8, 2012) .......................................... 18\\r\\nAF Holdings, LLC v. Doe,\\r\\nNo. 12-cv-2049, 2012 WL 3835102 (N.D. Cal. Sept. 4, 2012) .............................................. 24\\r\\nAlan Ross Machinery Corp. v. Machinio Corp.,\\r\\nNo. 17-cv-3569, 2019 WL 1317664 (N.D. Ill. Mar. 22, 2019) .............................................. 15\\r\\nArmstrong-Harris v. Wells Fargo Bank, N.A.,\\r\\nNo. 21-cv-07637, 2022 WL 3348426 (N.D. Cal. Aug. 12, 2022) .................................... 18, 19\\r\\nAshcroft v. Iqbal,\\r\\n556 U.S. 662 (2009) .................................................................................................................. 5\\r\\nAssessment Technologies of WI, LLC v. WIREdata, Inc.,\\r\\n350 F.3d 640 (7th Cir. 2003) .................................................................................................... 8\\r\\nAssociated Press v. All Headline News Corp.,\\r\\n608 F. Supp. 2d 454 (S.D.N.Y. 2009)............................................................................... 13, 16\\r\\nAstiana v. Hain Celestial Grp., Inc.,\\r\\n783 F.3d 753 (9th Cir. 2015) .................................................................................................. 21\\r\\nAtari Games Corp. v. Nintendo of Am. Inc.,\\r\\n975 F.2d 832 (Fed. Cir. 1992)................................................................................................... 8\\r\\nAtkins v. Fischer,\\r\\n331 F.3d 988 (D.C. Cir. 2003) ................................................................................................ 10\\r\\nAuthors Guild v. Google, Inc. (Google Books),\\r\\n804 F.3d 202 (2d Cir. 2015).................................................................................................. 2, 7\\r\\nBaiul-Farina v. Lemire,\\r\\n804 F. App\\u2019x 533 (9th Cir. 2020) ........................................................................................... 21\\r\\nBateman v. Mnemonics, Inc.,\\r\\n79 F.3d 1532 (11th Cir. 1996) .................................................................................................. 8\\r\\nBell Atl. Corp. v. Twombly,\\r\\n550 U.S. 544 (2007) ............................................................................................................ 5, 10\\r\\nBittel Technology, Inc. v. Bittel USA, Inc.,\\r\\nNo. 10-cv-00719, 2010 WL 3221864 (N.D. Cal. Aug. 13, 2010) .................................... 21, 22\\r\\nBosco Wai-Choy Chiu v. NBS Default Servs., LLC,\\r\\nNo. 14-cv-05261, 2015 WL 1221399 (N.D. Cal. Mar. 17, 2015) .......................................... 22\\r\\nCable v. Agence France Presse,\\r\\n728 F. Supp. 2d 977 (N.D. Ill. 2010) ...................................................................................... 12\\r\\nCarlson v. San Mateo Cnty,\\r\\n103 F.3d 137, 1996 WL 717310 (9th Cir. 1996) .................................................................... 20\\r\\nCastro v. Emeritus Corp.,\\r\\nNo. 11-cv-03504, 2012 WL 601857 (N.D. Cal. 2012) ........................................................... 15\\r\\nCavalier v. Random House, Inc.,\\r\\n297 F.3d 815 (9th Cir. 2002) .................................................................................................... 7\\r\\nCorbello v. Valli,\\r\\n974 F.3d 965 (9th Cir. 2020) .................................................................................................... 7\\r\\nCromwell v. Certified Forensic Loan Auditors,\\r\\nNo. 17-cv-02429, 2019 WL 1095837 (N.D. Cal. Jan. 10, 2019) ............................................ 24\\r\\nDam Things from Denmark v. Russ Berrie & Co., Inc.,\\r\\n290 F.3d 548 (3d Cir. 2002).................................................................................................... 10\\r\\nDavis v. RiverSource Life Ins. Co.,\\r\\n240 F. Supp. 3d 1011 (N.D. Cal. 2017) .................................................................................. 19\\r\\nDel Madera Properties v. Rhodes and Gardner, Inc.,\\r\\n820 F.2d 973 (9th Cir. 1987) .................................................................................................. 24\\r\\nDerek Andrew, Inc. v. Poof Apparel Corp.,\\r\\n528 F.3d 696 (9th Cir. 2008) .................................................................................................. 18\\r\\nDesign Basics, LLC v. WK Olson Architects, Inc.,\\r\\nNo. 17-cv-7432, 2019 WL 527535 (N.D. Ill. Feb. 11, 2019) ................................................. 18\\r\\nDielsi v. Falk,\\r\\n916 F. Supp. 985 (C.D. Cal. 1996) ......................................................................................... 24\\r\\nDoe 1 v. Github,\\r\\nNo. 22-cv-06823, 2023 WL 3449131 (N.D. Cal. May 11, 2023) ........................................... 19\\r\\nDolls Kill, Inc. v. Zoetop Bus. Co.,\\r\\nNo. 22-cv-01463, 2022 WL 16961477 (C.D. Cal. Aug. 25, 2022) ........................................ 17\\r\\nEldred v. Ashcroft,\\r\\n537 U.S. 186 (2003) .................................................................................................................. 7\\r\\nErickson Prods., Inc. v. Kast,\\r\\n921 F.3d 822 (9th Cir. 2019) .................................................................................................. 11\\r\\nESG Cap. Partners, LP v. Stratos,\\r\\n828 F.3d 1023 (9th Cir. 2016) ................................................................................................ 21\\r\\nFashion Nova, LLC v. Blush Mark, Inc.,\\r\\nNo. 22-cv-6127, 2023 WL 4307646 (C.D. Cal. June 30, 2023) ....................................... 15, 16\\r\\nFeist Publications Inc. v. Rural Tel. Serv. Co.,\\r\\n499 U.S. 340 (1991) .................................................................................................................. 6\\r\\nField v. Google Inc.,\\r\\n412 F. Supp. 2d 1106 (D. Nev. 2006) ....................................................................................... 2\\r\\nFiroozye v. Earthlink Network,\\r\\n153 F. Supp. 2d 1115 (N.D. Cal. 2001) .................................................................................. 24\\r\\nFisher v. Forrest,\\r\\n286 F. Supp. 3d 590 (S.D.N.Y. 2018)..................................................................................... 18\\r\\nFonovisa, Inc. v. Cherry Auction, Inc.,\\r\\n76 F.3d 259 (9th Cir. 1996) .................................................................................................... 10\\r\\nFree Speech Sys. LLC v. Menzel,\\r\\n390 F. Supp. 3d 1162 (N.D. Cal. 2019) ............................................................................ 13, 14\\r\\nFrost-Tsuji Architects v. Highway Inn, Inc.,\\r\\nNo. 13-cv-00496, 2015 WL 263556 (D. Haw. Jan 21, 2015)........................................... 17, 18\\r\\nFuzzy Logic Prods., Inc. v. Trapflix, LLC,\\r\\nNo. 15-cv-6203, 2015 WL 12791508 (C.D. Cal. Nov. 20, 2015) ............................................ 9\\r\\nGoogle LLC v. Oracle Am., Inc.,\\r\\n141 S. Ct. 1183 (2021) .......................................................................................................... 3, 8\\r\\nIn re Gilead Scis. Sec. Litig.,\\r\\n536 F.3d 1049 (9th Cir. 2008) ............................................................................................ 5, 15\\r\\nJonathan Browning, Inc. v. Venetian Casino Resort, LLC,\\r\\nNo. 07-cv-3983, 2007 WL 4532214 (N.D. Cal. Dec. 19, 2007)............................................. 24\\r\\nKelly v. Arriba Soft Corp.,\\r\\n336 F.3d 811 (9th Cir. 2003) .................................................................................................... 2\\r\\nKelly v. Arriba Soft Corp.,\\r\\n77 F. Supp. 2d 1116 (C.D. Cal. 1999) .............................................................................. 13, 16\\r\\nKilina America, Inc. v. Bonded Apparel, Inc.,\\r\\nNo. 19-cv-3027, 2019 WL 8065854 (C.D. Cal. Nov. 19, 2019) ............................................ 10\\r\\nKirk Kara Corp. v. W. Stone & Metal Corp.,\\r\\nNo. 20-cv-1931, 2020 WL 5991503 (C.D. Cal. Aug. 14, 2020) ............................................ 18\\r\\nKodadek v. MTV Networks, Inc.,\\r\\n152 F.3d 1209 (9th Cir. 1998) ................................................................................................ 19\\r\\nLangan v. United Servs. Auto. Ass\\u2019n,\\r\\n69 F. Supp. 3d 965 (N.D. Cal. 2014) ...................................................................................... 20\\r\\nLaws v. Sony Music Ent., Inc.,\\r\\n448 F.3d 1134 (9th Cir. 2006) .......................................................................................... 23, 24\\r\\nLi v. Yellow Cab Co.,\\r\\n13 Cal. 3d 804 (1975) ............................................................................................................. 21\\r\\nLitchfield v. Spielberg,\\r\\n736 F.2d 1352 (9th Cir. 1984) ............................................................................................ 9, 10\\r\\nLogan v. Meta Platforms, Inc.,\\r\\n636 F. Supp. 3d 1052 (N.D. Cal. 2022) .................................................................................. 13\\r\\nMaloney v. T3Media, Inc.,\\r\\n853 F.3d 1004 (9th Cir. 2017) ................................................................................................ 22\\r\\nMDY Indus., LLC v. Blizzard Ent., Inc.,\\r\\n629 F.3d 928 (9th Cir. 2010) .................................................................................................... 9\\r\\nMetro-Goldwin-Mayer Studios Inc. v. Grokster, Ltd.,\\r\\n545 U.S. 913 (2005) .................................................................................................................. 2\\r\\nMills v. Netflix, Inc.,\\r\\nNo. 19-cv-7618, 2020 WL 548558 (C.D. Cal. Feb. 3, 2020) ................................................. 15\\r\\nNash v. CBS, Inc.,\\r\\n899 F.2d 1537 (7th Cir. 1990) .................................................................................................. 7\\r\\nNew Sensations, Inc. v. Does,\\r\\nNo. 12-cv-3800, 2012 WL 12898400 (N.D. Cal. Nov. 29, 2012) .......................................... 21\\r\\nO\\u2019Neal v. Sideshow, Inc.,\\r\\n583 F. Supp. 3d 1282 (C.D. Cal. 2022) .................................................................................. 16\\r\\nParrish v. Nat\\u2019l Football League Players Ass\\u2019n,\\r\\n534 F. Supp. 2d 1081 (N.D. Cal. 2007) .............................................................................. 6, 14\\r\\nPerfect 10, Inc. v. Giganews, Inc.,\\r\\n847 F.3d 657 (9th Cir. 2017) ........................................................................................ 8, 10, 11\\r\\nReiffer v. NYC Luxury Limousine Ltd.,\\r\\nNo. 22-cv-2374, 2023 WL 4029400 (S.D.N.Y. June 15, 2023) ....................................... 13, 17\\r\\nRentmeester v. Nike, Inc.,\\r\\n883 F.3d 1111 (9th Cir. 2018) ................................................................................................ 24\\r\\nRobert L. Stark Enters., Inc. v. Neptune Design Grp., LLC,\\r\\nNo. 16-cv-264, 2017 WL 1345195 (N.D. Ohio Apr. 12, 2017) ............................................. 17\\r\\nRosal v. First Fed. Bank of Cal.,\\r\\n671 F. Supp. 2d 1111 (N.D. Cal. 2009) .................................................................................. 22\\r\\nSchmitt v. SN Servicing Corp.,\\r\\nNo. 21-cv-03355, 2021 WL 3493754 (N.D. Cal. Aug. 2021) ................................................ 21\\r\\nSchneider v. YouTube, LLC,\\r\\nNo. 20-cv-04423, 2023 WL 3605981 (N.D. Cal. May 22, 2023) ............................................. 9\\r\\nSega Enterprises Ltd. v. Accolade, Inc.,\\r\\n977 F.2d 1510 (9th Cir. 1992) .............................................................................................. 2, 8\\r\\nSemore v. Pool,\\r\\n217 Cal. App. 3d 1087 (1990) ................................................................................................ 20\\r\\nShade v. Gorman,\\r\\nNo. 08-cv-3471, 2009 WL 196400 (N.D. Cal. Jan. 28, 2009) ................................................ 24\\r\\nShihab v. Complex Media, Inc.,\\r\\nNo. 21-cv-6425, 2022 WL 3544149 (S.D.N.Y. Aug. 17, 2022)............................................. 18\\r\\nSilvercrest Realty, Inc. v. Great Am. E&S Ins. Co.,\\r\\nNo. 11-cv-01197, 2012 WL 13028094 (C.D. Cal. Apr. 4, 2012) ........................................... 20\\r\\nSilverman v. OpenAI, Inc.,\\r\\nNo. 23-cv-03416 (N.D. Cal., filed July 7, 2023) ...................................................................... 1\\r\\nSkidmore v. Led Zeppelin,\\r\\n952 F.3d 1051 (9th Cir. 2020) .................................................................................................. 7\\r\\nSonner v. Premier Nutrition Corp.,\\r\\n971 F.3d 834 (9th Cir. 2020) .................................................................................................. 20\\r\\nSony Computer Ent., Inc. v. Connectix Corp.,\\r\\n203 F.3d 596 (9th Cir. 2000) ................................................................................................ 2, 8\\r\\nSony Corp. of Am. v. Universal City Studios, Inc.,\\r\\n464 U.S. 417 (1984) .............................................................................................................. 6, 8\\r\\nTremblay v. OpenAI, Inc.,\\r\\nNo. 23-cv-03223 (N.D. Cal., filed June 28, 2023).................................................................... 1\\r\\nTroyk v. Farmers Grp., Inc.,\\r\\n171 Cal. App. 4th 1305 (2009) ......................................................................................... 19, 20\\r\\nTwentieth Century Music Corp. v. Aiken,\\r\\n422 U.S. 151 (1975) .................................................................................................................. 6\\r\\nUnited States ex rel. Berge v. Bd. Of Tr. of the Univ. of Ala.,\\r\\n104 F.3d 1453 (4th Cir. 1997) ................................................................................................ 22\\r\\nVictor Elias Photography, LLC v. Ice Portal, Inc.,\\r\\n43 F.4th 1313 (11th Cir. 2022) ............................................................................................... 16\\r\\nSTATUTES\\r\\n17 U.S.C. \\u00A7 101 ......................................................................................................................... 6, 23\\r\\n17 U.S.C. \\u00A7 102 ......................................................................................................................... 6, 23\\r\\n17 U.S.C. \\u00A7 106 ..................................................................................................................... 6, 7, 24\\r\\n17 U.S.C. \\u00A7 107 ............................................................................................................................... 7\\r\\n17 U.S.C. \\u00A7 1202 .................................................................................................................... passim\\r\\n17 U.S.C. \\u00A7 1203 ........................................................................................................................... 18\\r\\n17 U.S.C. \\u00A7 301 ....................................................................................................................... 22, 23\\r\\n17 U.S.C. \\u00A7 412 ............................................................................................................................. 18\\r\\nCal. Bus. & Prof. Code \\u00A7 17200, et seq. ................................................................................ passim\\r\\nCal. Civ. Code \\u00A7 1714 ................................................................................................................... 21\\r\\nCONSTITUTIONAL PROVISIONS\\r\\nU.S. CONST . Article 1, \\u00A7 8, cl. 8 .................................................................................................. 2, 6\\r\\nOTHER AUTHORITIES\\r\\nWilliam F. Patry, PATRY ON COPYRIGHT (Mar. 2023 update) ............................................... 10, 23\\r\\nAndrew Chow, Why Bill Gates Believes Generative AI Will Be \\u2018Revolutionary,\\u2019\\r\\nTime (Mar. 21, 2023), https:\\/\\/time.com\\/6264801\\/bill-gates-ai\\/ ............................................... 1\\r\\nCal Newport, What Kind of Mind Does ChatGPT Have?,\\r\\nNew Yorker (Apr. 23, 2013), https:\\/\\/www.newyorker.com\\/science\\/\\r\\nannals-of-artificial-intelligence\\/what-kind-of-mind-does-chatgpt-have................................... 2\\r\\nFrancesca Paris & Larry Buchanan, 35 Ways Real People Are Using A.I. Right Now,\\r\\nN.Y. Times (Apr. 14, 2023), https:\\/\\/www.nytimes.com\\/interactive\\/2023\\/04\\/14\\/\\r\\nupshot\\/up-ai-uses.html .............................................................................................................. 1\\r\\nH.R. Rep. 94-1476 (1976)................................................................................................... 7, 10, 18\\r\\nHenry Kissinger, Eric Schmidt & Daniel Huttenlocher, ChatGPT Heralds\\r\\nan Intellectual Revolution, Wall Street Journal (Feb. 24, 2023),\\r\\nhttps:\\/\\/www.wsj.com\\/articles\\/chatgpt-heralds-an-intellectual-revolution-\\r\\nenlightenment-artificial-intelligence-homo-technicus-technology-cognition-\\r\\nmorality-philosophy-774331c6 ................................................................................................. 1\\r\\nJulie E. Cohen, A Right To Read Anonymously: A Closer Look\\r\\nat \\u201CCopyright Management\\u201D in Cyberspace, 28 CONN. L. REV . 981, 990 (1996) ................. 12\\r\\nMark A. Lemley & Bryan Casey, Fair Learning, 99 TEX. L. REV. 743 (2021) ............................. 3\\r\\nPamela Samuelson, The Quest For A Sound Conception Of Copyright\\u2019s\\r\\nDerivative Work Right, 101 GEO. L. J. 1505 (2013) ............................................................... 10\\r\\nS. Rep. 105-190 (1998) ................................................................................................................. 12\\r\\nU.S. Dep't of Commerce, Information Infrastructure Task Force, Intellectual Property\\r\\nand the National Information Infrastructure: The Report of the Working Group on\\r\\nIntellectual Property Rights 235-36 (1995) ............................................................................ 12\\r\\nI. INTRODUCTION\\r\\nThis Motion addresses two near-identical class action complaints seeking to hold OpenAI\\r\\nliable on copyright and other theories for the creation and operation of an artificial intelligence\\r\\nservice known as ChatGPT. 1 OpenAI moves for dismissal of most but not all of the claims\\r\\nasserted.\\r\\n\\u201CChatGPT and other A.I. tools are helping people to save time at work, to code without\\r\\nknowing how to code, to make daily life easier or just to have fun.\\u201D See Francesca Paris & Larry\\r\\nBuchanan, 35 Ways Real People Are Using A.I. Right Now, N.Y. Times (Apr. 14, 2023),\\r\\nhttps:\\/\\/www.nytimes.com\\/interactive\\/2023\\/04\\/14\\/upshot\\/up-ai-uses.html. While the technology\\r\\nis still in its early days, some commentators believe that in the future, it may help to remedy \\u201Csome\\r\\nof the world\\u2019s worst inequities,\\u201D from unequal access to health care, to global educational\\r\\ndisparities, and beyond. See Andrew Chow, Why Bill Gates Believes Generative AI Will Be\\r\\n\\u2018Revolutionary,\\u2019 Time (Mar. 21, 2023), https:\\/\\/time.com\\/6264801\\/bill-gates-ai\\/. Others suggest\\r\\nthat ChatGPT, in particular, \\u201CHeralds an Intellectual Revolution,\\u201D representing an innovation\\r\\nwhose significance may ultimately prove comparable to \\u201Cthe invention of printing.\\u201D See Henry\\r\\nKissinger, Eric Schmidt & Daniel Huttenlocher, ChatGPT Heralds an Intellectual Revolution,\\r\\nWall Street Journal (Feb. 24, 2023), https:\\/\\/www.wsj.com\\/articles\\/chatgpt-heralds-an-intellectual-\\r\\nrevolution-enlightenment-artificial-intelligence-homo-technicus-technology-cognition-morality-\\r\\nphilosophy-774331c6.\\r\\nIn its current form, the technology allows users to submit text prompts, and receive back\\r\\ncontent generated by the software and servers that comprise the ChatGPT service. That service,\\r\\nin turn, works by combining an underlying engine known as a \\u201Clarge language model\\u201D with\\r\\nadditional measures intended to ensure the accuracy, appropriateness, safety, and utility of the\\r\\n1 This brief addresses both complaints and will be filed concurrently on both dockets. The first\\r\\ncase was filed on behalf Paul Tremblay and Mona Awad. Complaint in Tremblay v. OpenAI, Inc.,\\r\\nNo. 23-cv-03223, Dkt. 1 (N.D. Cal., filed June 28, 2023) (\\u201CTremblay Compl.\\u201D). The same counsel\\r\\nthen filed an identical complaint on behalf of three other plaintiffs, including Sarah Silverman\\r\\n(with Tremblay, \\u201CPlaintiffs\\u201D). Complaint in Silverman v. OpenAI, Inc., No. 23-cv-03416, Dkt. 1\\r\\n(N.D. Cal., filed July 7, 2023) (\\u201CSilverman Compl.\\u201D). This Court granted a motion to relate the\\r\\ncases on July 28, 2023, after which Awad dismissed her claims. No. 23-cv-03223, Dkts. 26, 29.\\r\\nPlaintiffs have not moved to consolidate the cases.\\r\\noutputs presented to users. The large language model is a type of \\u201Cneural network.\\u201D It consists of\\r\\na staggeringly large series of statistical correlations that yield rules about the constitutive elements\\r\\nof human language\\u2014correlations and rules the model \\u201Clearned\\u201D by having been shown many,\\r\\nmany examples of text. For the purpose of \\u201Ctraining\\u201D a model of this type, it is the volume of text\\r\\nused, more than any particular selection of text, that really matters, for the simple reason that a\\r\\ntruly massive quantity of samples is required to derive comprehensively accurate statistical\\r\\nrepresentations of the concepts, grammar, semantics, and quirks that underlie ordinary human\\r\\nlanguage. \\u201CThe key,\\u201D as one commentator explained, \\u201Cis scale.\\u201D See Cal Newport, What Kind of\\r\\nMind Does ChatGPT Have?, New Yorker (Apr. 23, 2013), https:\\/\\/www.newyorker.com\\r\\n\\/science\\/annals-of-artificial-intelligence\\/what-kind-of-mind-does-chatgpt-have.\\r\\nPlaintiffs here are the authors of books. They filed suit for monetary compensation and\\r\\nother relief, on behalf of themselves and those similarly situated, because they believe their texts\\r\\nwere a tiny part of the dataset that OpenAI used to teach its models to derive the rules underlying\\r\\nhuman language in the service of the goals recited above.\\r\\nAt the heart of Plaintiffs\\u2019 Complaints are copyright claims. Those claims, however,\\r\\nmisconceive the scope of copyright, failing to take into account the limitations and exceptions\\r\\n(including fair use) that properly leave room for innovations like the large language models now\\r\\nat the forefront of artificial intelligence. The constitutional purpose of copyright is \\u201C[t]o promote\\r\\nthe Progress of Science and useful Arts.\\u201D U.S. CONST . Art. 1, \\u00A7 8, cl. 8. As the Supreme Court\\r\\nhas recognized, \\u201C[t]he more artistic protection is favored, the more technological innovation may\\r\\nbe discouraged; the administration of copyright law is an exercise in managing the tradeoff.\\u201D\\r\\nMetro-Goldwin-Mayer Studios Inc. v. Grokster, Ltd., 545 U.S. 913, 928 (2005). Numerous courts\\r\\nhave applied the fair use doctrine to strike that balance, recognizing that the use of copyrighted\\r\\nmaterials by innovators in transformative ways does not violate copyright. See Sega Enterprises\\r\\nLtd. v. Accolade, Inc., 977 F.2d 1510 (9th Cir. 1992) (videogame development); Sony Computer\\r\\nEnt., Inc. v. Connectix Corp., 203 F.3d 596 (9th Cir. 2000) (videogame emulators); Kelly v. Arriba\\r\\nSoft Corp., 336 F.3d 811 (9th Cir. 2003) (image search engines), Field v. Google Inc., 412 F. Supp.\\r\\n2d 1106 (D. Nev. 2006) (web search engines); A.V. ex rel. Vanderhye v. iParadigms, LLC, 562\\r\\nF.3d 630 (4th Cir. 2009) (plagiarism detection tool); Authors Guild v. Google, Inc. (Google Books),\\r\\n804 F.3d 202 (2d Cir. 2015) (Google Books Project); Google LLC v. Oracle Am., Inc., 141 S. Ct.\\r\\n1183 (2021) (interfaces for Android operating system); see generally Mark A. Lemley & Bryan\\r\\nCasey, Fair Learning, 99 TEX. L. REV. 743 (2021). These are the key legal principles upon which\\r\\ncountless artificial intelligence products have been developed by a wide array of technology\\r\\ncompanies.\\r\\nThis Motion, however, focuses only on the dismissal of the assortment of ancillary claims\\r\\nthat Plaintiffs included in their Complaints\\u2014claims for vicarious copyright infringement, violation\\r\\nof the Digital Millennium Copyright Act (\\u201CDMCA\\u201D), unfair competition, \\u201Cnegligence,\\u201D and unjust\\r\\nenrichment. None of these causes of action states a viable claim for relief because none of the\\r\\nlegal theories challenged here actually condemns the conduct alleged with respect to ChatGPT,\\r\\nthe language models that power it, or the process used to create them. It is important for these\\r\\nclaims to be trimmed from the suit at the outset, so that these cases do not proceed to discovery\\r\\nand beyond with legally infirm theories of liability.\\r\\nWith respect to the sole copyright theory challenged here, Plaintiffs\\u2019 claims for vicarious\\r\\ninfringement are based on the erroneous legal conclusion that every single ChatGPT output is\\r\\nnecessarily an infringing \\u201Cderivative work\\u201D\\u2014which is a very specific term in copyright law\\u2014\\r\\nbecause those outputs are, in only a remote and colloquial sense, \\u201Cbased on\\u201D an enormous training\\r\\ndataset that allegedly included Plaintiffs\\u2019 books. The Ninth Circuit has rejected such an expansive\\r\\nconception of the \\u201Cderivative work\\u201D right as \\u201Cfrivolous,\\u201D holding that a derivative work claim\\r\\nrequires a showing that the accused work shares copyright-protected, expressive elements with the\\r\\noriginal. Plaintiffs\\u2019 contrary theory is simply incorrect, and would be unworkable were it not.\\r\\nAccording to the Complaints, every single ChatGPT output\\u2014from a simple response to a question\\r\\n(e.g., \\u201CYes\\u201D), to the name of the President of the United States, to a paragraph describing the plot,\\r\\nthemes, and significance of Homer\\u2019s The Iliad\\u2014is necessarily an infringing \\u201Cderivative work\\u201D of\\r\\nPlaintiffs\\u2019 books. Worse still, each of those outputs would simultaneously be an infringing\\r\\nderivative of each of the millions of other individual works contained in the training corpus\\u2014\\r\\nregardless of whether there are any similarities between the output and the training works. That is\\r\\nnot how copyright law works.\\r\\nThe other claims addressed in this Motion are similarly defective. The DMCA claims\\r\\nwould ascribe liability to conduct that does not satisfy the detailed statutory elements of the cause\\r\\nof action. The state law claims do not apply to the facts actually alleged: training a large language\\r\\nmodel to perform as described in the Complaints, for example, is not in any sense \\u201Cnegligence\\u201D as\\r\\ntort law defines that term. And those claims are also preempted by federal copyright law.\\r\\nFor these reasons and the others articulated below, OpenAI respectfully seeks dismissal of\\r\\nthe claims challenged in this Motion.\\r\\nII. FACTS ALLEGED\\r\\nPlaintiffs. Plaintiffs are writers who allege that their books were used to train the language\\r\\nmodels on which ChatGPT relies. The remaining Plaintiff in the Tremblay action is Paul\\r\\nTremblay, a writer who claims to own a registered copyright in a book titled The Cabin at the End\\r\\nof the World. Tremblay Compl. \\u00B6 10; see also id. \\u00B6 55 (defining \\u201CInfringed Works\\u201D to mean this\\r\\nbook and two others allegedly written by the now-dismissed co-plaintiff, Mona Awad). The three\\r\\nPlaintiffs in the Silverman action are writers who claim to own registered copyrights in three\\r\\nbooks: The Bedwetter (Silverman), Ararat (Golden), and Sandman Slim (Kadrey). Silverman\\r\\nCompl. \\u00B6\\u00B6 10\\u201312; see also id. \\u00B6 56 (defining \\u201CInfringed Works\\u201D to mean these three books).\\r\\nDefendants. The defendants in these actions are seven entities that Plaintiffs collectively\\r\\nrefer to as \\u201COpenAI.\\u201D Tremblay Compl. \\u00B6\\u00B6 13\\u201319, Silverman Compl. \\u00B6\\u00B6 14\\u201320. Plaintiffs allege\\r\\na series of connections between these entities, id., but do not otherwise distinguish between them.2\\r\\nPlaintiffs\\u2019 Allegations. These lawsuits focus on ChatGPT, an OpenAI service that reads\\r\\nuser \\u201Ctext prompts\\u201D and generates \\u201Canswers\\u201D and other responses that \\u201Cmimic human language.\\u201D\\r\\nTremblay Compl. \\u00B6 38, Silverman Compl. \\u00B6 39. Plaintiffs allege that ChatGPT relies on one of\\r\\ntwo \\u201Clarge language models,\\u201D referred to as GPT-3.5 and GPT-4. Tremblay Compl. \\u00B6\\u00B6 2, 36,\\r\\nSilverman Compl. \\u00B6\\u00B6 2, 37. They allege that these \\u201Clarge language models\\u201D \\u201Ctrain\\u201D by studying a\\r\\nlarge amount of \\u201Ctraining data,\\u201D from which the models derive abstract \\u201Cpatterns and connections\\u201D\\r\\n2 Nothing in either Complaint specifies which of these seven entities engaged in the alleged\\r\\nconduct.\\r\\nabout language. Tremblay Compl. \\u00B6\\u00B6 2, 39, Silverman Compl. \\u00B6\\u00B6 2, 40. The models then allegedly\\r\\nrepurpose these \\u201Cpatterns and connections\\u201D to interpret user prompts and generate \\u201Cconvincingly\\r\\nnaturalistic text outputs.\\u201D Id. As Plaintiffs acknowledge, the ability of digital software to do so\\r\\nreflects a legitimate scientific advancement in the field of artificial intelligence, which seeks to\\r\\n\\u201Csimulate human reasoning and inference.\\u201D Tremblay Compl. \\u00B6 22, Silverman Compl. \\u00B6 23.\\r\\nPlaintiffs brought these lawsuits because they suspect that OpenAI used the \\u201Cpatterns and\\r\\nconnections\\u201D in their books to teach its models how to \\u201Cconvers[e]\\u201D with users. Tremblay Compl.\\r\\n\\u00B6\\u00B6 36, 39\\u201341, Silverman Compl. \\u00B6\\u00B6 37, 40\\u201342. The basis for that suspicion is that, when Plaintiffs\\r\\nprompted ChatGPT to \\u201Csummarize [their books] in detail,\\u201D ChatGPT was able to generate more-\\r\\nor-less \\u201Caccurate\\u201D summaries. Tremblay Compl. \\u00B6 41 & Ex. B, Silverman Compl. \\u00B6 42 & Ex. B.\\r\\nThese summaries\\u2014which Plaintiffs attached to the Complaints, along with the prompts they used\\r\\nto create them\\u2014resemble book reports or reviews: they summarize the contours of the books\\u2019\\r\\ncontents and praise the books\\u2019 themes. See, e.g., Tremblay Compl. Ex. B at 1 (\\u201CTremblay skillfully\\r\\ncreates an escalating sense of dread . . . playing with themes of . . . familial love.\\u201D).\\r\\nOn that basis, Plaintiffs seek to represent a class of \\u201C[a]ll\\u201D U.S persons who \\u201Cown a []\\r\\ncopyright in any work\\u201D\\u2014not just books\\u2014\\u201Cused as training data for the OpenAI Language\\r\\nModels.\\u201D Tremblay Compl. \\u00B6 42, Silverman Compl. \\u00B6 43. They assert six causes of action:\\r\\n(1) direct copyright infringement (Count I); (2) vicarious infringement (Count II); (3) violation of\\r\\nSection 1202(b) of the Digital Millennium Copyright Act (\\u201CDMCA\\u201D) (Count III); (4) unfair\\r\\ncompetition under Cal. Bus. & Prof. Code Section 17200 (Count IV); (5) negligence (Count V);\\r\\nand (6) unjust enrichment (Count VI). OpenAI seeks dismissal of Counts II through VI.\\r\\nIII. LEGAL STANDARD\\r\\nTo survive a Rule 12(b)(6) motion to dismiss, \\u201Ca complaint must contain sufficient factual\\r\\nmatter, accepted as true, to state a claim to relief that is plausible on its face.\\u201D Ashcroft v. Iqbal,\\r\\n556 U.S. 662, 678 (2009) (cleaned up). \\u201C[A] formulaic recitation of the elements of a cause of\\r\\naction will not do.\\u201D Bell Atl. Corp. v. Twombly, 550 U.S. 544, 555 (2007). The Court should\\r\\ndisregard conclusory allegations, legal characterizations, unreasonable inferences, and\\r\\nunwarranted factual deductions. In re Gilead Scis. Sec. Litig., 536 F.3d 1049, 1055 (9th Cir. 2008).\\r\\nIn a putative class action prior to certification, each of the named plaintiffs must \\u201Cshow that they\\r\\nhave satisfied the pleading requirements\\u201D and may not \\u201Crely on the alleged injuries of others.\\u201D\\r\\nParrish v. Nat\\u2019l Football League Players Ass\\u2019n, 534 F. Supp. 2d 1081, 1094 (N.D. Cal. 2007).\\r\\nIV. ARGUMENT\\r\\nPlaintiffs\\u2019 claims arise out of a variety of federal and state laws, but each of the claims at\\r\\nissue relate\\u2014directly or indirectly\\u2014to the Copyright Act and background principles of copyright\\r\\nlaw. Several of those principles are discussed briefly below.\\r\\nA. The Limited Copyright Monopoly\\r\\nCopyright is a \\u201Cstatutory monopoly\\u201D of \\u201Climited scope.\\u201D Twentieth Century Music Corp.\\r\\nv. Aiken, 422 U.S. 151, 156 (1975). While the Copyright Act \\u201Csecur[es] for limited times to authors\\r\\n. . . [certain] exclusive right[s] to their respective writings,\\u201D it does so in service of a broader goal:\\r\\n\\u201C[t]o promote the Progress of Science and useful Arts.\\u201D U.S. CONST . Art. 1, \\u00A7 8, cl. 8; see also\\r\\nSony Corp. of Am. v. Universal City Studios, Inc., 464 U.S. 417, 429 (1984) (\\u201Creward to the owner\\u201D\\r\\nof a copyrighted work is \\u201Csecondary\\u201D to the \\u201Cgeneral benefits derived by the public\\u201D (citation\\r\\nomitted)). The Copyright Act generally protects \\u201Coriginal works of authorship,\\u201D 17 U.S.C.\\r\\n\\u00A7 102(a), but the scope of the monopoly is carefully limited to ensure that copyright serves its\\r\\nintended public purpose.\\r\\n1. The Copyright Act Grants Only Specific, Enumerated Rights\\r\\n\\u201CThe Copyright Act does not give a copyright holder control over all uses of his\\r\\ncopyrighted work.\\u201D Aiken, 422 U.S. at 154\\u201355. \\u201CRather, the Copyright Act grants the copyright\\r\\nholder \\u2018exclusive\\u2019 rights to use and to authorize the use of his work in [six] qualified ways,\\u201D\\r\\nenumerated in Section 106 of the Act. Sony, 464 U.S. at 432\\u201333. As relevant here, the Act grants\\r\\nthe exclusive rights to (1) \\u201Creproduce the [] work in copies,\\u201D 17 U.S.C. \\u00A7 106(1); see also id. \\u00A7 101\\r\\n(defining \\u201Ccopies\\u201D); (2) \\u201Cprepare derivative works,\\u201D id. \\u00A7 106(2), see also id. \\u00A7 101 (defining\\r\\n\\u201Cderivative work\\u201D); and (3) \\u201Cdistribute copies . . . of the [] work to the public,\\u201D id. \\u00A7 106(3).\\r\\n2. Copyright Does Not Protect Ideas, Facts, or Language\\r\\nCopyright protects the particular way an author expresses an idea\\u2014not the underlying idea\\r\\nitself, facts embodied within the author\\u2019s articulated message, or other building blocks of creative\\r\\nexpression. 17 U.S.C. \\u00A7 102(b); Feist Publications Inc. v. Rural Tel. Serv. Co., 499 U.S. 340, 344\\u2013\\r\\n45 (1991). As a result, \\u201Cevery idea, theory, and fact in a copyrighted work becomes instantly\\r\\navailable for public exploitation at the moment of publication.\\u201D Eldred v. Ashcroft, 537 U.S. 186,\\r\\n219 (2003). Accordingly, while an author may register a copyright in her book, the \\u201Cstatistical\\r\\ninformation\\u201D pertaining to \\u201Cword frequencies, syntactic patterns, and thematic markers\\u201D in that\\r\\nbook are beyond the scope of copyright protection. Google Books, 804 F.3d at 209; see also id. at\\r\\n220 (tool that extracts \\u201Cinformation about the original [work]\\u201D does not infringe because it does\\r\\nnot \\u201Creplicat[e] protected expression\\u201D). So too for facts conveyed by the book, or its high-level\\r\\nplot or themes.3 These principles are essential to copyright\\u2019s overall goal of \\u201C[i]ntellectual (and\\r\\nartistic) progress,\\u201D which is \\u201Cpossible only if each author [can] build[] on the work of others.\\u201D\\r\\nNash v. CBS, Inc., 899 F.2d 1537, 1540 (7th Cir. 1990) (Easterbrook, J).\\r\\n3. Substantial Similarity Is Required for Infringement\\r\\nThese limitations join each other in practice via the doctrine of \\u201Csubstantial similarity,\\u201D\\r\\nwhich is the \\u201Challmark\\u201D of any claim of infringement of the rights granted in Section 106.\\r\\nSkidmore v. Led Zeppelin, 952 F.3d 1051, 1064 (9th Cir. 2020). That doctrine requires the court\\r\\nin a copyright case to compare the two works at issue by (1) \\u201Cdisregard[ing] the non-protectible\\r\\nelements\\u201D like \\u201Cstock scenes and themes\\u201D and \\u201Cplot ideas,\\u201D and (2) asking whether the remaining\\r\\n\\u201Cprotectible elements, standing alone, are substantially similar.\\u201D Cavalier, 297 F.3d at 822\\u201323\\r\\n(citations omitted). If a defendant\\u2019s work is not \\u201Csubstantially similar\\u201D to an original, it is neither\\r\\na \\u201Ccopy\\u201D nor a \\u201Cderivative work\\u201D for purposes of Section 106. 17 U.S.C. \\u00A7 106(1)\\u2013(3).\\r\\n4. Fair Use Is Not Infringement\\r\\nEven where a defendant has prima facie infringed one of the Section 106 rights by creating\\r\\na \\u201Csubstantially similar\\u201D copy or derivative work, Section 107 of the Act provides that \\u201Cthe fair\\r\\nuse of a copyrighted work . . . is not an infringement of copyright.\\u201D 17 U.S.C. \\u00A7 107. While the\\r\\nfair use doctrine has its roots in the common law and dates back to the 19th century or earlier,\\r\\nCongress codified it in 1976, instructing courts to \\u201Cfree[ly] [] \\u201Cadapt\\u201D the application of fair use in\\r\\n3 See Corbello v. Valli, 974 F.3d 965, 977 (9th Cir. 2020) (\\u201Chistorical fact[s]\\u201D and \\u201Ccommon . . .\\r\\njargon\\u201D unprotectable (citation omitted)); Cavalier v. Random House, Inc., 297 F.3d 815, 823\\u201324\\r\\n(9th Cir. 2002) (\\u201Cthemes\\u201D and \\u201Cbasic plot ideas\\u201D unprotectable).\\r\\nfuture cases to account for \\u201Crapid technological change.\\u201D H.R. Rep. 94-1476 at 65\\u201366 (1976).\\r\\nUnder the resulting judicial precedent, it is not an infringement to create \\u201Cwholesale cop[ies] of [a\\r\\nwork] as a preliminary step\\u201D to develop a new, non-infringing product, even if the new product\\r\\ncompetes with the original. Oracle, 141 S. Ct. at 1199 (summarizing Accolade, 977 F.2d at 1521\\u2013\\r\\n27); see also Connectix, 203 F.3d at 603\\u201308. 4\\r\\nB. The Bulk of Plaintiffs\\u2019 Claims Should Be Dismissed\\r\\nThis motion seeks dismissal with prejudice of Counts II through VI of each Complaint,\\r\\nalleging vicarious copyright infringement (Count II); violation of Section 1202(b) of the Digital\\r\\nMillennium Copyright Act (\\u201CDMCA\\u201D) (Count III); unfair competition under Cal. Bus. & Prof.\\r\\nCode Section 17200, et seq. (Count IV); negligence (Count V); and unjust enrichment (Count VI).\\r\\nAs discussed below, none of these causes of action applies to the conduct alleged. This motion\\r\\ndoes not seek dismissal of Count I, for direct copyright infringement, which OpenAI will seek to\\r\\nresolve as a matter of law at a later stage of the case.\\r\\n1. Plaintiffs Fail to State a Vicarious Infringement Claim\\r\\nVicarious liability is a legal theory for holding one party responsible for another party\\u2019s act\\r\\nof copyright infringement. Because \\u201C[t]he Copyright Act does not expressly render anyone liable\\r\\nfor infringement committed by another,\\u201D the circumstances under which a non-actor can be held\\r\\nliable are strictly limited. Sony, 464 U.S. at 434\\u201335. As relevant here, a defendant may be held\\r\\n\\u201Cvicariously\\u201D liable if it \\u201Chas (1) the right and ability to supervise the infringing conduct and (2) a\\r\\ndirect financial interest in the infringing activity.\\u201D Perfect 10, Inc. v. Giganews, Inc., 847 F.3d\\r\\n657, 673 (9th Cir. 2017) (citation omitted).\\r\\nPlaintiffs\\u2019 vicarious infringement claims rest solely on the theory that, \\u201C[b]ecause the\\r\\noutput\\u201D of ChatGPT is \\u201Cbased on expressive information extracted from Plaintiffs\\u2019 [books],\\u201D\\r\\n\\u201Cevery [such] output . . . is an infringing derivative\\u201D of those books. Tremblay Compl. \\u00B6 59,\\r\\n4 Every other circuit to consider the issue has either endorsed these Ninth Circuit cases explicitly\\r\\nor independently embraced the same principles. iParadigms, 562 F.3d at 638\\u201340, 645; Assessment\\r\\nTechnologies of WI, LLC v. WIREdata, Inc., 350 F.3d 640, 643\\u201345 (7th Cir. 2003); Bateman v.\\r\\nMnemonics, Inc., 79 F.3d 1532, 1539 n.18 (11th Cir. 1996); Atari Games Corp. v. Nintendo of Am.\\r\\nInc., 975 F.2d 832, 836\\u201337, 842\\u201344 (Fed. Cir. 1992). So has the Supreme Court. Oracle, 141 S.\\r\\nCt. at 1198\\u201399, 1208 (approving Accolade and Connectix).\\r\\nSilverman Compl. \\u00B6 60. The theory is not that OpenAI is vicariously liable for copyright\\r\\ninfringements committed only when users are able to, despite OpenAI\\u2019s best efforts, extract\\r\\nparticular outputs from ChatGPT that contain copyright-protected expression from another source.\\r\\nIt is instead that OpenAI is vicariously liable for the creation of infringing derivative works\\r\\nconsisting of every single output that ChatGPT generates in response to user prompts. 5 Tremblay\\r\\nCompl. \\u00B6\\u00B6 59\\u201360, Silverman Compl. \\u00B6\\u00B6 60\\u201361. These claims fail for three independent reasons.\\r\\na. Plaintiffs Have Not Alleged Direct Infringement\\r\\nFirst, a defendant cannot be held vicariously liable unless the plaintiff \\u201Cfirst demonstrate[s]\\r\\n[that] direct infringement\\u201D actually occurred. MDY Indus., LLC v. Blizzard Ent., Inc., 629 F.3d\\r\\n928, 937 (9th Cir. 2010). Because the derivative-work theory underlying Plaintiffs\\u2019 vicarious\\r\\nliability claim is wrong as a matter of law, the Complaints fail to identify any bona fide act of\\r\\ndirect infringement for which OpenAI could be held liable.\\r\\nPlaintiffs make no attempt to explain how or why any particular outputs are substantially\\r\\nsimilar to their books. Cf. Fuzzy Logic Prods., Inc. v. Trapflix, LLC, No. 15-cv-6203, 2015 WL\\r\\n12791508, at *4 (C.D. Cal. Nov. 20, 2015) (dismissing copyright claim where complaint was\\r\\n\\u201Cdevoid of any comparisons of protectable elements\\u201D). Instead, in an attempt to avoid the\\r\\nindividualized nature of substantial similarity analysis,6 Plaintiffs claim that \\u201Cevery output of the\\r\\nOpenAI Language Models is an infringing derivative\\u201D simply because those outputs are, in a\\r\\nremote and colloquial sense, \\u201Cbased on expressive information extracted from Plaintiffs\\u2019 [books].\\u201D\\r\\nTremblay Compl. \\u00B6\\u00B6 58\\u201361 (emphasis added); see also Silverman Compl. \\u00B6\\u00B6 59\\u201362.\\r\\nBut the Ninth Circuit has squarely rejected the proposition that a secondary work that is\\r\\n\\u201Cbased on\\u201D an original is necessarily a derivative work. See Litchfield v. Spielberg, 736 F.2d 1352,\\r\\n1357 (9th Cir. 1984) (calling this argument \\u201Cfrivolous\\u201D). Instead, the Circuit embraced the black-\\r\\nletter principle that \\u201C[t]o prove infringement\\u201D of any of the rights in Section 106, \\u201Cone must show\\r\\n5 This distinction is critical inter alia because it goes to the heart of the appropriateness of asserting\\r\\na class action and seeking class certification, which Plaintiffs have done and which will be\\r\\naddressed later in the case. A theory that vicarious liability arises from every single output yields\\r\\na very different class certification analysis from a theory that vicarious liability requires examining\\r\\neach output to see whether it is, in the copyright-law sense, \\u201Csubstantially similar\\u201D to a given input.\\r\\n6 See Schneider v. YouTube, LLC, No. 20-cv-04423, 2023 WL 3605981, at *6 (N.D. Cal. May 22,\\r\\n2023) (similarity is \\u201Cfact-specific\\u201D and generally precludes certification of infringement claims).\\r\\nsubstantial similarity.\\u201D Id..7\\r\\nEvery circuit to consider the question has reached the same conclusion: that \\u201C[i]n order to\\r\\ninfringe the derivative right, there must be substantial similarity in protectible expression.\\u201D 4\\r\\nPATRY ON C OPYRIGHT \\u00A7 12:13 & n.1 (Mar. 2023 update) (citing Litchfield along with cases from\\r\\nSecond, Fifth, Sixth, Eighth, and Eleventh Circuits); see also Atkins v. Fischer, 331 F.3d 988, 993\\r\\n(D.C. Cir. 2003) (derivative work must be \\u201Csubstantially similar\\u201D to the original); Dam Things\\r\\nfrom Denmark v. Russ Berrie & Co., Inc., 290 F.3d 548, 565 (3d Cir. 2002) (same); H.R. Rep. 94-\\r\\n1476 at 62 (\\u201C[T]o constitute a violation of [the derivative work right], the infringing work must\\r\\nincorporate a portion of the copyrighted work in some form; for example, a detailed commentary\\r\\non a work or a programmatic musical composition inspired by a novel would not normally\\r\\nconstitute infringements.\\u201D). Plaintiffs\\u2019 theory that \\u201Cevery output . . . is [necessarily] an infringing\\r\\nderivative\\u201D is wrong as a matter of law, which means their vicarious liability claim rests on conduct\\r\\nthat is not copyright infringement at all. The claim fails for that reason alone.\\r\\nb. Plaintiffs Have Not Alleged the \\u201CRight and Ability to Supervise\\u201D\\r\\nSecond, a defendant may only be held \\u201Cvicariously\\u201D liable for another\\u2019s direct infringement\\r\\nif it had the \\u201Cright and ability to supervise\\u201D that infringement. Giganews, 847 F.3d at 673; see,\\r\\ne.g., Fonovisa, Inc. v. Cherry Auction, Inc., 76 F.3d 259, 262\\u201363 (9th Cir. 1996) (organizer of\\r\\nswap meet vicariously liable for sale of bootlegs because it \\u201Ccontrolled and patrolled\\u201D vendors\\u2019\\r\\nbooths). All Plaintiffs have pleaded on this score is the conclusory assertion that \\u201COpenAI has the\\r\\nright and ability to control the output of the OpenAI Language Models,\\u201D without alleging any\\r\\nsupporting facts. Tremblay Compl. \\u00B6 60, Silverman Compl. \\u00B6 61. That is not enough to survive a\\r\\nmotion to dismiss a vicarious copyright infringement claim. Kilina America, Inc. v. Bonded\\r\\nApparel, Inc., No. 19-cv-3027, 2019 WL 8065854, at *2 (C.D. Cal. Nov. 19, 2019) (\\u201CMerely\\r\\nalleging that the Defendants had the \\u2018right and ability to supervise the infringing conduct\\u2019 lacks\\r\\nthe requisite detail to sustain a claim.\\u201D); see also Twombly, 550 U.S. at 555 (\\u201Cformulaic recitation\\r\\n7 This is the reason \\u201C[e]xplanations, commentaries, [or] prefaces\\u201D are not derivatives of the material\\r\\nthey are \\u201Cbased upon\\u201D\\u2014absent similarity of \\u201Cexpression,\\u201D they do not \\u201Cfall[] within [copyright\\u2019s]\\r\\nderivative work right.\\u201D Pamela Samuelson, The Quest For A Sound Conception Of Copyright\\u2019s\\r\\nDerivative Work Right, 101 GEO. L. J. 1505, 1540 (2013).\\r\\nof the elements of a cause of action will not do\\u201D). This pleading failure is an independent basis on\\r\\nwhich the claim should be dismissed.\\r\\nc. Plaintiffs Have Not Alleged \\u201CDirect Financial Interest\\u201D\\r\\nThird, a vicarious liability claim requires that the defendant have a \\u201Cdirect financial\\r\\ninterest\\u201D in the direct infringement at issue. Giganews, 847 F.3d at 673. It is not enough that the\\r\\nchallenged activity is carried out by users of tools offered for profit by a technology company:\\r\\nrather, to satisfy the \\u201Cdirect financial interest\\u201D prong, the material that infringes the plaintiff\\u2019s\\r\\nworks must \\u201Cact[] as a draw for [defendant\\u2019s] customers\\u201D such that there is a direct \\u201Ccausal link\\r\\nbetween the infringement of the plaintiff\\u2019s own copyrighted works and any profit to the\\r\\n[defendant].\\u201D Id. (citation omitted) (emphasis added).\\r\\nPlaintiffs\\u2019 sole allegation with respect to an alleged direct financial benefit is that OpenAI\\r\\n\\u201Cbenefited financially.\\u201D Tremblay Compl. \\u00B6 60, Silverman Compl. \\u00B6 61. But that alone does not\\r\\nsustain a vicarious copyright infringement claim. Giganews, 847 F.3d at 673\\u201374. Nor would it\\r\\nmatter if users were \\u201Cdrawn to [OpenAI\\u2019s products] to obtain access to infringing material in\\r\\ngeneral.\\u201D Id. at 673 (cleaned up). The operative pleading standard is materially higher, requiring\\r\\na closer nexus between the infringement of the plaintiffs\\u2019 works and a cognizable financial benefit\\r\\nto the defendant. See id.; see also Erickson Prods., Inc. v. Kast, 921 F.3d 822, 829\\u201330 (9th Cir.\\r\\n2019) (rejecting vicarious infringement claim because plaintiff \\u201C[did] not contend that anyone\\r\\nvisited [defendant]\\u2019s website in order to view his photographs or purchased [defendant\\u2019s] services\\r\\nbecause they saw the photographs\\u201D). The absence of alleged facts to support the legal conclusion\\r\\nthat OpenAI derives the requisite direct financial benefit from infringing activity is a third\\r\\nindependent basis on which the vicarious infringement claim should be dismissed.\\r\\n2. Plaintiffs Fail to State a Claim under Section 1202(b) of the DMCA\\r\\nPlaintiffs bring claims under Section 1202(b) of the Digital Millennium Copyright Act\\r\\n(\\u201CDMCA\\u201D), which (as relevant here) prohibits the \\u201Cintentional[] remov[al] or alter[ation]\\u201D of\\r\\ncopyright management information (\\u201CCMI\\u201D), see 17 U.S.C. \\u00A7 1202(b)(1), and the \\u201Cdistribut[ion]\\u201D\\r\\nof \\u201Cworks\\u201D or \\u201Ccopies of works . . . knowing that [CMI] has been removed or altered,\\u201D see id.\\r\\n\\u00A7 1202(b)(3). Plaintiffs allege that OpenAI \\u201Cintentionally removed CMI from [their] Infringed\\r\\nWorks\\u201D during the \\u201Ctraining process\\u201D in violation of 17 U.S.C. \\u00A7 1202(b)(1), see Tremblay Compl.\\r\\n\\u00B6 64, Silverman Compl. \\u00B6 65, and \\u201Cdistribut[ed]\\u201D the models\\u2019 outputs without Plaintiffs\\u2019 CMI in\\r\\nviolation of 17 U.S.C. \\u00A7 1202(b)(3), see Tremblay Compl. \\u00B6 65, Silverman Compl. \\u00B6 66. These\\r\\nclaims are far afield from the statutory language and purpose of Section 1202, which is briefly\\r\\nsurveyed below. That background illuminates the flaws in these claims. As addressed below,\\r\\nPlaintiffs\\u2019 Section 1202(b)(1) claims fail because (1) Plaintiffs do not plausibly allege that any\\r\\nCMI was removed during the training process, and (2) Plaintiffs do not plead facts sufficient to\\r\\ndraw a reasonable inference that OpenAI designed its process with the requisite intent to conceal\\r\\ninfringement. And Plaintiffs\\u2019 Section 1202(b)(3) claims fail because that provision applies only\\r\\nif the defendant \\u201Cdistribute[d]\\u201D the plaintiff\\u2019s actual \\u201Cworks\\u201D or \\u201Ccopies of [them],\\u201D which is not\\r\\nalleged here.\\r\\na. Copyright Management Information and the DMCA\\r\\nCongress enacted Section 1202 of the DMCA as part of a policy initiative to \\u201Chelp\\r\\ncopyright owners police their copyrights, in light of the otherwise trivial ease of generating and\\r\\ndistributing unauthorized copies of their works throughout cyberspace.\\u201D Julie E. Cohen, A Right\\r\\nTo Read Anonymously: A Closer Look at \\u201CCopyright Management\\u201D in Cyberspace, 28 CONN. L.\\r\\nREV. 981, 990 (1996); see also S. Rep. 105-190 at 8, 11 n.18 (1998) (noting the overarching\\r\\nlegislative purpose to \\u201Cdiscourage piracy\\u201D on the Internet); U.S. Dep\\u2019t of Commerce, Information\\r\\nInfrastructure Task Force, Intellectual Property and the National Information Infrastructure: The\\r\\nReport of the Working Group on Intellectual Property Rights 235\\u201336 (1995) (initially proposing\\r\\nSection 1202). To permit copyright owners to \\u201Ctrack[] and monitor[]\\u201D how their works are used\\r\\nonline, Section 1202 encourages owners to affix \\u201Ccopyright management information\\u201D or \\u201CCMI\\u201D\\r\\nto their works, and imposes penalties on defendants who frustrate those efforts by removing or\\r\\naltering that information. S. Rep. 105-190 at 16\\u201317; 17 U.S.C. \\u00A7 1202(b). Thus, in the typical\\r\\nSection 1202 case, the plaintiff might allege that it published a photograph along with a \\u201Cphoto\\r\\ncredit and copyright notice,\\u201D and that the defendant both copied that photograph and \\u201Cdeliberately\\r\\nremoved\\u201D the accompanying CMI\\u2014e.g., by cropping out the photo credit\\u2014to hide its wrongdoing.\\r\\nSee, e.g., Cable v. Agence France Presse, 728 F. Supp. 2d 977, 978 (N.D. Ill. 2010); see also\\r\\nAssociated Press v. All Headline News Corp., 608 F. Supp. 2d 454, 458 (S.D.N.Y. 2009) (Section\\r\\n1202 claim based on allegation that editors \\u201Cinstructed reporters to remove or alter the\\r\\nidentification of the AP as author or copyright holder of [news] articles\\u201D).\\r\\nTo ensure the statute hewed closely to that purpose, Congress included in Section 1202 a\\r\\n\\u201Cdouble-scienter\\u201D requirement. Simply removing CMI from a copyrighted work does not yield\\r\\nliability. A Section 1202 plaintiff must also establish both (1) that the removal or alteration was\\r\\ndone \\u201Cintentionally\\u201D (or, for distribution-based claims, was done \\u201Cknowing that [CMI] has been\\r\\nremoved or altered\\u201D) and (2) that these acts were performed with \\u201Creasonable grounds to\\r\\nknow . . . that [they] will induce, enable, facilitate, or conceal an infringement [of copyright].\\u201D 17\\r\\nU.S.C. \\u00A7 1202(b). In the typical Section 1202 case, these elements are not difficult to plead. See,\\r\\ne.g., Reiffer v. NYC Luxury Limousine Ltd., No. 22-cv-2374, 2023 WL 4029400, at *8 (S.D.N.Y.\\r\\nJune 15, 2023) (scienter requirement satisfied because \\u201CDefendant saw Plaintiff\\u2019s attribution on\\r\\nthe Work and removed it before uploading it to its website\\u201D). But the double-scienter requirement\\r\\ngenerally precludes application of the statute in circumstances that do not involve the intentional\\r\\nfrustration of copyright management efforts. For example, it precludes liability for the omission\\r\\nof CMI that occurs as an \\u201Cunintended side effect\\u201D of a technological process\\u2014like scraping images\\r\\nfrom the internet without also scraping associated CMI. Kelly v. Arriba Soft Corp., 77 F. Supp.\\r\\n2d 1116, 1122 (C.D. Cal. 1999), rev\\u2019d on other grounds by 336 F.3d 811 (9th Cir. 2003) (no\\r\\nSection 1202 liability arising from the fact that search engine \\u201Ccrawler did not include [CMI] when\\r\\nit indexed the images\\u201D); see also Logan v. Meta Platforms, Inc., 636 F. Supp. 3d 1052, 1064 (N.D.\\r\\nCal. 2022) (\\u201CUnlike editing a plaintiff\\u2019s watermark out of a photo, automatically omitting CMI by\\r\\nembedding a photo out of the full context of the webpage where the CMI is found cannot itself\\r\\nplead intentionality as required by the DMCA.\\u201D). In other words, the incidental removal of CMI\\r\\ndoes not raise an inference that the defendant knew its actions would conceal infringement.\\r\\nb. Plaintiffs Fail to State a DMCA Claim\\r\\nTo state a Section 1202 claim, a plaintiff must inter alia allege specific facts regarding\\r\\n\\u201Cwhat the removed or altered CMI was.\\u201D Free Speech Sys. LLC v. Menzel, 390 F. Supp. 3d 1162,\\r\\n1175 (N.D. Cal. 2019) (dismissing claim for failure to do so). Here, Plaintiffs allege that two\\r\\npieces of CMI were included in their books: (1) \\u201Cthe name of the author\\u201D and (2) \\u201Cthe year of\\r\\npublication.\\u201D Tremblay Compl. \\u00B6 10, Silverman Compl. \\u00B6\\u00B6 10\\u201312.8 Plaintiffs allege that this CMI\\r\\nwas included on their books\\u2019 \\u201Ctitle page[s].\\u201D Tremblay Compl. \\u00B6 25, Silverman Compl. \\u00B6 26.\\r\\nPlaintiffs then allege that OpenAI violated Section 1202(b) in two distinct ways.\\r\\ni. Section 1202(b)(1)\\r\\nPlaintiffs allege that OpenAI violated Section 1202(b)(1) by \\u201Cremov[ing] CMI\\u201D from their\\r\\nbooks during the \\u201Ctraining process.\\u201D Tremblay Compl. \\u00B6 64, Silverman Compl. \\u00B6 65. The\\r\\nComplaints address this issue only in a single paragraph, in which Plaintiffs claim that the training\\r\\nprocess \\u201Cdoes not preserve any CMI\\u201D \\u201Cby design,\\u201D and that by running this process, \\u201COpenAI\\r\\nintentionally removed CMI from\\u201D the books at issue here. Id. Notably, however, Plaintiffs\\r\\naffirmatively plead that the CMI that OpenAI allegedly removed\\u2014Plaintiffs\\u2019 names and the\\r\\npublication year of their books\\u2014was embodied within the books themselves. Tremblay Compl.\\r\\n\\u00B6\\u00B6 10, 25, Silverman Compl. \\u00B6\\u00B6 10\\u201312, 26. By alleging that OpenAI \\u201Cintentionally removed\\u201D CMI,\\r\\nPlaintiffs appear to be claiming that OpenAI deleted (or somehow redacted) their names and\\r\\npublication years from the \\u201Ccopie[s]\\u201D of the books that OpenAI allegedly created when compiling\\r\\nits training dataset. Tremblay Compl. \\u00B6 64, Silverman Compl. \\u00B6 65.\\r\\nPlaintiffs offer no facts that might support such a theory, and instead allege a number of\\r\\nfacts that would contradict it. Both Complaints claim that Plaintiffs\\u2019 books were \\u201Ccopied by\\r\\nOpenAI\\u201D in their entirety and \\u201Cingested by the underlying OpenAI Language Model.\\u201D Tremblay\\r\\nCompl. \\u00B6 40; Silverman Compl. \\u00B6 41. The Complaints are completely devoid of any explanation\\r\\nas to (1) how OpenAI might delete author names and publication years from the books in its\\r\\ntraining data, (2) why OpenAI would do such a thing, or (3) what Plaintiffs\\u2019 good-faith basis for\\r\\n8 Other parts of the Complaints vaguely gesture at other forms of CMI, but notably do not\\r\\nspecifically allege that the named Plaintiffs included those kinds of CMI in their books. See, e.g.,\\r\\nTremblay Compl. \\u00B6 63 (\\u201CPlaintiffs included one or more forms of [CMI] in each of the Plaintiffs\\u2019\\r\\nInfringed Works, including: copyright notice, title and other identifying information, the name or\\r\\nother identifying information about the owners of each book, terms and conditions of use, and\\r\\nidentifying numbers or symbols referring to CMI.\\u201D). These allegations are insufficiently tethered\\r\\nto Plaintiffs\\u2019 particular works\\u2014there is no basis to discern which additional information beyond\\r\\nname and publication year was appended to which books, or whether any such information was\\r\\nincluded in the named Plaintiffs\\u2019 books at all\\u2014and the Court should thus disregard them. Menzel,\\r\\n390 F. Supp. 3d at 1175; see also Parrish, 534 F. Supp. 2d at 1094 (named plaintiff in putative\\r\\nclass action may not \\u201Crely on the alleged injuries of others\\u201D).\\r\\nbelieving this occurred might consist of. The bare speculation that this happened, for no apparent\\r\\nreason and in contravention of the allegation that OpenAI trained its models using entire books\\r\\nobtained from third party sources, see id., is precisely the kind of \\u201Cunwarranted deduction[] of\\r\\nfact\\u201D that this Court must disregard on a motion to dismiss, Gilead, 536 F.3d at 105. Plaintiffs\\u2019\\r\\n\\u201Csuspicion\\u201D that OpenAI scrubbed their names and publication years from its set of training data\\r\\nis not enough to \\u201Craise a right to relief above the speculative level.\\u201D Castro v. Emeritus Corp., No.\\r\\n11-cv-03504, 2012 WL 601857, at *2 (N.D. Cal. 2012) (cleaned up).\\r\\nMoreover, Plaintiffs\\u2019 own pleadings suggest the exact opposite. The ChatGPT outputs\\r\\nattached to the Complaints include multiple references to the Plaintiffs\\u2019 names. See, e.g., Tremblay\\r\\nCompl. Ex. B. at 2 (\\u201CThroughout these chapters, Tremblay masterfully maintains the suspense and\\r\\npsychological terror . . .\\u201D), Silverman Compl. Ex. B at 1 (\\u201CSilverman uses her sharp wit to lend a\\r\\ncomedic touch . . .\\u201D). This would plainly not be possible if OpenAI had deleted all references to\\r\\n\\u201Cthe name of the author\\u201D from each book before using the alleged copies to train the models on\\r\\nwhich ChatGPT relies.\\r\\nSeparately, even if OpenAI\\u2019s training process did result in the omission of CMI from the\\r\\nalleged copies in its training dataset, Plaintiffs make no attempt to explain how that omission could\\r\\n\\u201Cinduce, enable, facilitate, or conceal\\u201D the alleged copyright infringement, much less how OpenAI\\r\\ncould have \\u201Cknown[]\\u201D that it would do so. 17 U.S.C. \\u00A7 1202(b); see also Mills v. Netflix, Inc., No.\\r\\n19-cv-7618, 2020 WL 548558, at *3 (C.D. Cal. Feb. 3, 2020) (dismissing DMCA claim because\\r\\nthe complaint \\u201Cfails to include specific allegations as to how identifiable infringements will be\\r\\naffected by Defendants\\u2019 alleged removing or altering of CMI\\u201D or \\u201Cdemonstrat[e] Defendants knew\\r\\nor had reason to know that their actions would cause future infringement\\u201D (cleaned up)). \\u201CThe\\r\\npoint of CMI is to inform the public that something is copyrighted and to prevent infringement.\\u201D\\r\\nAlan Ross Machinery Corp. v. Machinio Corp., No. 17-cv-3569, 2019 WL 1317664, at *2 (N.D.\\r\\nIll. Mar. 22, 2019) (emphasis added); see also Fashion Nova, LLC v. Blush Mark, Inc., No. 22-cv-\\r\\n6127, 2023 WL 4307646, at *5 (C.D. Cal. June 30, 2023) (\\u201C[T]he purpose of CMI is to provide\\r\\nthe public with notice that a work is copyrighted.\\u201D). But OpenAI\\u2019s training dataset is not publicly\\r\\naccessible, as Plaintiffs admit. Tremblay Compl. \\u00B6\\u00B6 31, 35, Silverman Compl. \\u00B6\\u00B6 32, 36.\\r\\nIn the typical Section 1202 case, a plaintiff might allege scienter by alleging the defendant\\r\\n\\u201Cinstructed reporters to remove or alter the identification of the [original publisher]\\u201D before\\r\\n\\u201Cdistribut[ing] its articles to paying clients\\u201D who, as a result of the CMI removal, would have no\\r\\nway to know that the defendant had infringed another publisher\\u2019s copyright. All Headline News,\\r\\n608 F. Supp. 2d at 458. In other words, there is a direct and obvious causal connection between\\r\\nthe CMI omission and the \\u201Cfacilitat[ion]\\u201D of \\u201Cinfringement\\u201D to satisfy the statute\\u2019s double-scienter\\r\\nrequirement. 17 U.S.C. \\u00A7 1202(b); see also Victor Elias Photography, LLC v. Ice Portal, Inc., 43\\r\\nF.4th 1313, 1325 (11th Cir. 2022) (\\u201C[T]he statute\\u2019s plain language requires some identifiable\\r\\nconnection between the defendant\\u2019s actions and the infringement or the likelihood of\\r\\ninfringement.\\u201D); O\\u2019Neal v. Sideshow, Inc., 583 F. Supp. 3d 1282, 1287 (C.D. Cal. 2022) (a\\r\\n\\u201Cplaintiff must plausibly allege that future infringement is likely . . . to occur as a result of the\\r\\n[alleged DMCA violation]\\u201D (cleaned up) (emphasis added)).\\r\\nHere, however, because the CMI was allegedly removed from an internal dataset, that\\r\\nalleged omission has no effect on the public at all. Because that dataset is not publicly accessible,\\r\\nthe inclusion of CMI in that dataset could not \\u201Cprovide the public\\u201D with any information about the\\r\\nworks at issue, Fashion Nova, 2023 WL 4307646, at *5, nor could the alleged exclusion of CMI\\r\\nfrom that dataset withhold any such information from public view. Therefore, even if it were an\\r\\n\\u201Cinfringement\\u201D for OpenAI to create copies of books for its training dataset, the removal of CMI\\r\\nfrom those copies could not possibly \\u201Cinduce, enable, facilitate, or conceal\\u201D that infringement\\u2014\\r\\nand OpenAI certainly could not have \\u201Cknow[n]\\u201D that it would. 17 U.S.C. \\u00A7 1202(b). Even if the\\r\\nCourt were to assume that OpenAI\\u2019s \\u201Ctraining process does not preserve any CMI\\u201D \\u201Cby design,\\u201D\\r\\nTremblay Compl. \\u00B6 64, Silverman Compl. \\u00B6 65, that exclusion of CMI would be an \\u201Cunintended\\r\\nside effect\\u201D of the training process\\u2014not a subversive tactic to disguise wrongdoing\\u2014which is not\\r\\na Section 1202(b)(1) violation, Kelly, 77 F. Supp. 2d at 1122. And, in any event, the fact that\\r\\nChatGPT readily and repeatedly referenced Plaintiffs\\u2019 names in its outputs\\u2014and indeed generated\\r\\nthose outputs in response to prompts by Plaintiffs\\u2019 counsel based on the allegedly removed CMI\\u2014\\r\\nforecloses any argument that the alleged \\u201Cremoval\\u201D of CMI from the training dataset was intended\\r\\nto facilitate or conceal the creation of supposedly infringing ChatGPT outputs.\\r\\nii. Section 1202(b)(3)\\r\\nPlaintiffs allege that OpenAI violated Section 1202(b)(3) because OpenAI \\u201Ccreated\\r\\nderivative works\\u201D\\u2014i.e. ChatGPT outputs\\u2014and \\u201Cdistribut[ed] these [derivative] works without\\r\\n[the] CMI\\u201D that Plaintiffs included in their books, i.e., without reproducing Plaintiffs\\u2019 \\u201Cname[s]\\u201D\\r\\nand \\u201Cthe year of [their books\\u2019] publication.\\u201D Tremblay Compl. \\u00B6 65; see also id. \\u00B6 10, Silverman\\r\\nCompl. \\u00B6 66; see also id. \\u00B6\\u00B6 10\\u201312. This claim fails for two independent reasons.\\r\\nFirst, even assuming that each and every one of ChatGPT\\u2019s outputs is necessarily a\\r\\n\\u201Cderivative work,\\u201D see Tremblay Compl. \\u00B6 65, Silverman Compl. \\u00B6 66; but see supra at 9, the\\r\\nrelevant DMCA provision does not apply unless the works \\u201Cdistribute[d]\\u201D are the original \\u201Cworks\\u201D\\r\\nthemselves or actual \\u201Ccopies of [them],\\u201D 17 U.S.C. \\u00A7 1202(b)(3). Nothing in the statute prohibits\\r\\nthe distribution of derivative works without the CMI that accompanied the original. See Robert L.\\r\\nStark Enters., Inc. v. Neptune Design Grp., LLC, No. 16-cv-264, 2017 WL 1345195, at *11 (N.D.\\r\\nOhio Apr. 12, 2017) (rejecting Section 1202(b)(3) claim based on contention that alleged infringer\\r\\n\\u201Ccreated derivative works without retaining [opponent\\u2019s] CMI\\u201D because the statute requires that\\r\\n\\u201Ccopies\\u201D be distributed); see also Frost-Tsuji Architects v. Highway Inn, Inc., No. 13-cv-00496,\\r\\n2015 WL 263556, at *4 (D. Haw. Jan 21, 2015), aff\\u2019d, 600 F. App\\u2019x 674 (9th Cir. 2017) (rejecting\\r\\nSection 1202(b) claim because \\u201C[a]t most,\\u201D defendant \\u201Ccreated [a] derivative work,\\u201D which does\\r\\nnot support claim that it \\u201Cremoved the [CMI] from [plaintiff\\u2019s] original work\\u201D). Plaintiffs do not\\r\\nallege that OpenAI distributed unaltered \\u201Ccopies\\u201D of their books. 17 U.S.C. \\u00A7 1202(b)(3).\\r\\nSecond, to plead a Section 1202(b)(3) claim, Plaintiffs must establish that the CMI at issue\\r\\nwas actually \\u201Cremoved or altered\\u201D from the works that OpenAI allegedly \\u201Cdistribute[d].\\u201D 17\\r\\nU.S.C. \\u00A7 1202(b). In a typical Section 1202 case, a plaintiff might make that showing by pleading\\r\\nthat the defendant \\u201Ccropped the [plaintiff\\u2019s] image so that the [CMI] . . . could no longer be seen\\u201D\\r\\nbefore distributing it. Reiffer, 2023 WL 4029400, at *1. But there is a legally significant difference\\r\\nbetween (1) removing or cropping out CMI embedded in a plaintiff\\u2019s \\u201Cwork\\u201D or an otherwise\\r\\nidentical \\u201Ccop[y]\\u201D of it, see 17 U.S.C. \\u00A7 1202(b)(3), and (2) creating a new work that does not\\r\\ninclude that CMI. Courts have uniformly declined to apply Section 1202 to the latter circumstance\\r\\nbecause the DMCA \\u201Cdoes not prohibit merely omitting CMI from an infringing work.\\u201D Dolls Kill,\\r\\nInc. v. Zoetop Bus. Co., No. 22-cv-01463, 2022 WL 16961477, at *3\\u20134 (C.D. Cal. Aug. 25, 2022).\\r\\nAny contrary rule would mean that every copyright plaintiff\\u2014including, for example, a\\r\\nphotographer who claims that an artist\\u2019s painting infringed one of her images\\u2014could also bring a\\r\\nclaim under Section 1202, along with a demand for statutory damages under that section. See 17\\r\\nU.S.C. \\u00A7 1203(c)(3)(B) (providing for statutory damages \\u201Cfor each violation . . . of not less than\\r\\n$2,500\\u201D).9 Nothing in the statutory language or legislative history suggests that (incorrect) result.\\r\\nSome courts frame this inquiry by asking whether the infringing work is \\u201Cidentical\\u201D\\u2014and,\\r\\nif not, holding there has been no removal or alteration. Kirk Kara Corp. v. W. Stone & Metal\\r\\nCorp., No. 20-cv-1931, 2020 WL 5991503, at *6 (C.D. Cal. Aug. 14, 2020) (dismissing claim\\r\\nbecause \\u201Cwhile the works may be substantially similar, [d]efendant did not make identical\\r\\ncopies . . . and then remove engraved CMI\\u201D).10 Because Plaintiffs do not allege that OpenAI\\r\\n\\u201Cdistributed\\u201D works \\u201Cidentical\\u201D to their books, they have not stated a Section 1202(b)(3) claim.\\r\\n3. Plaintiffs Fail to State a UCL Claim\\r\\nPlaintiffs also bring state law unfair competition claims under Cal. Bus. & Prof. Code\\r\\n\\u00A7\\u00A7 17200, et seq. (\\u201CUCL\\u201D). To plead a UCL violation, a plaintiff must allege a \\u201Cbusiness act or\\r\\npractice\\u201D that is \\u201Ceither \\u2018unlawful,\\u2019 \\u2018unfair,\\u2019 or \\u2018fraudulent.\\u2019\\u201D Armstrong-Harris v. Wells Fargo\\r\\n9 To provide copyright owners \\u201Can incentive to register their copyrights promptly,\\u201D Derek Andrew,\\r\\nInc. v. Poof Apparel Corp., 528 F.3d 696, 700 (9th Cir. 2008), Section 412 of the Copyright Act\\r\\ngenerally precludes recovery of statutory damages for copyright infringement unless the plaintiff\\r\\nregistered the work at issue with the U.S. Copyright Office before the infringement \\u201Ccommenced,\\u201D\\r\\n17 U.S.C. \\u00A7 412. Section 412\\u2019s registration bar, however, does not apply to the DMCA\\u2019s separate\\r\\nstatutory damages provision. See Shihab v. Complex Media, Inc., No. 21-cv-6425, 2022 WL\\r\\n3544149, at *8 (S.D.N.Y. Aug. 17, 2022). If every copyright infringement claim necessarily\\r\\nconstituted a separate DMCA violation for CMI removal, plaintiffs could easily avoid the Section\\r\\n412 registration bar by seeking statutory damages under the DMCA. That would materially\\r\\nundermine Congress\\u2019s attempt to incentivize copyright holders to register their works. Cf. H.R.\\r\\nRep. No. 94-1476 at 158 (noting the \\u201Cimportan[ce]\\u201D of \\u201C[c]opyright registration\\u201D to \\u201Cusers and the\\r\\npublic at large\\u201D).\\r\\n10 See also Design Basics, LLC v. WK Olson Architects, Inc., No. 17-cv-7432, 2019 WL 527535,\\r\\nat *5 (N.D. Ill. Feb. 11, 2019) (where complaint \\u201C[did] not allege [defendant] directly reproduced\\r\\n[plaintiff\\u2019s] work without CMI,\\u201D dismissing Section 1202(b) claim \\u201Cwith prejudice because further\\r\\namendment would be futile\\u201D); Fisher v. Forrest, 286 F. Supp. 3d 590, 609 (S.D.N.Y. 2018)\\r\\n(because plaintiff\\u2019s work was not \\u201Csubstantially or entirely reproduced,\\u201D defendant \\u201Ccannot be said\\r\\nto have removed CMI from [plaintiff\\u2019s] \\u2018works\\u2019\\u201D); Frost-Tsuji, 2015 WL 263556, at *3 (no\\r\\nSection 1202 claim because defendant\\u2019s drawing \\u201Cis not identical to the drawing by [plaintiff]\\u201D);\\r\\nA\\u2019Lor Int\\u2019l, Ltd. v. Tapper Fine Jewelry, Inc., No. 12-cv-02215, 2012 WL 12921035, at *10 (C.D.\\r\\nCal. Aug. 8, 2012) (dismissing Section 1202(b) claim with prejudice because \\u201Cthe plain language\\r\\nof the statute encompasses only removal and alteration\\u201D and does not \\u201Cinclude [mere] omissions\\u201D).\\r\\nBank, N.A., No. 21-cv-07637, 2022 WL 3348426, at *2 (N.D. Cal. Aug. 12, 2022) (citation\\r\\nomitted). Each adjective captures a \\u201Cseparate and distinct theory of liability.\\u201D Id. Here, Plaintiffs\\u2019\\r\\nUCL claims are based on the UCL\\u2019s \\u201Cunlawful\\u201D prong, which \\u201Cborrows violations of other laws\\r\\nand treats them as unlawful practices.\\u201D Id. at *3 (citation omitted); see also Tremblay Compl.\\r\\n\\u00B6 69, Silverman Compl. \\u00B6 70. The sole predicate violation alleged in the Complaint is that OpenAI\\r\\n\\u201Cviolat[ed] the DMCA.\\u201D Tremblay Compl. \\u00B6\\u00B6 69\\u201370, Silverman Compl. \\u00B6\\u00B6 70\\u201371.11\\r\\nThis claim fails three times over. First, as explained above, Plaintiffs have failed to plead\\r\\nDMCA claims, which means that \\u201Cthe UCL claim[s] also fail[].\\u201D Armstrong-Harris, 2022 WL\\r\\n3348426, at *3 (citation omitted); see supra at 13.\\r\\nSecond, Plaintiffs have not alleged an economic injury flowing directly from the alleged\\r\\nDMCA violations. To plead a UCL claim, a plaintiff must \\u201C(1) establish a loss or deprivation of\\r\\nmoney or property . . . and (2) show that economic injury was the result of, i.e., caused by,\\u201D the\\r\\nalleged predicate violation. Davis v. RiverSource Life Ins. Co., 240 F. Supp. 3d 1011, 1017 (N.D.\\r\\nCal. 2017) (emphasis in original); see also Troyk v. Farmers Grp., Inc., 171 Cal. App. 4th 1305,\\r\\n1348 n.31 (2009) (requirement is \\u201Cmore stringent than\\u201D that Art. III injury-in-fact inquiry); Cal.\\r\\nBus. & Prof. Code \\u00A7 17204 (permitting relief for \\u201Ca person who has suffered injury in fact and has\\r\\nlost money or property as a result of the unfair competition\\u201D). As noted above, the two DMCA-\\r\\nbased predicates at issue here are (1) the alleged removal of CMI during the \\u201Ctraining process\\u201D and\\r\\n(2) the alleged distribution of supposed \\u201Cderivative\\u201D ChatGPT outputs without Plaintiffs\\u2019 CMI.\\r\\nTremblay Compl. \\u00B6\\u00B6 64\\u201365, Silverman Compl. \\u00B6\\u00B6 65\\u201366. The only allegation as to harm arising\\r\\nfrom these alleged violations is a single sentence included in both Complaints: \\u201CPlaintiffs have\\r\\nbeen injured by OpenAI\\u2019s removal of CMI.\\u201D Tremblay Compl. \\u00B6 67, Silverman Compl. \\u00B6 68.\\r\\nNothing in the Complaint explains how Plaintiffs \\u201Clost money or property\\u201D in connection with\\r\\nthese claims. Cal. Bus. & Prof. Code \\u00A7 17204; see also Doe 1 v. Github, No. 22-cv-06823, 2023\\r\\n11 Plaintiffs vaguely suggest that this claim is also based on the use of \\u201CPlaintiffs\\u2019 Infringed Works\\r\\nto train ChatGPT,\\u201D in what appears to be a reference to the copyright infringement claims.\\r\\nTremblay Compl. \\u00B6 69, Silverman Compl. \\u00B6 70. But the paragraphs that directly address the UCL\\r\\nclaim assert the alleged DMCA violation as the sole predicate. Tremblay Compl. \\u00B6 70, Silverman\\r\\nCompl. \\u00B6 71. In any case, copyright infringement is not a valid predicate for a UCL claim due to\\r\\nCopyright Act preemption. Kodadek v. MTV Networks, Inc., 152 F.3d 1209, 1213 (9th Cir. 1998)\\r\\n(UCL claim \\u201Cexpressly base[d] . . . on . . . the Copyright Act\\u201D was \\u201Cclear[ly]\\u201D preempted).\\r\\nWL 3449131, at *14 (N.D. Cal. May 11, 2023) (dismissing UCL claim because \\u201Cthe Court cannot\\r\\ndiscern how Defendants\\u2019 alleged violations of the DMCA have caused or will cause Plaintiffs\\r\\neconomic injury\\u201D).12\\r\\nThird, Plaintiffs have failed to plead facts that would justify any relief under the UCL.\\r\\n\\u201CRemedies under the UCL are limited to restitution and injunctive relief, and do not include\\r\\ndamages.\\u201D Silvercrest Realty, Inc. v. Great Am. E&S Ins. Co., No. 11-cv-01197, 2012 WL\\r\\n13028094, at *2 (C.D. Cal. Apr. 4, 2012). And to state a claim for either form of relief, a plaintiff\\r\\n\\u201Cmust establish that she lacks an adequate remedy at law.\\u201D Sonner v. Premier Nutrition Corp.,\\r\\n971 F.3d 834, 844 (9th Cir. 2020). Plaintiffs have not done so here. Silvercrest, 2012 WL\\r\\n13028094, at *3 (UCL claim \\u201Cdeficient\\u201D because plaintiff \\u201Cfails [to] explain why the damages it\\r\\nseeks elsewhere in its complaint are not adequate to compensate it for its alleged injuries\\u201D).\\r\\n4. Plaintiffs Fail to State a Claim for Negligence\\r\\nCount V, asserting \\u201Cnegligence,\\u201D also fails. First, the only acts challenged in the\\r\\nComplaints are purportedly intentional, not negligent. \\u201C[I]ntentional act[s] with intended\\r\\nconsequences [do not] fall[] within the ambit of a negligence cause of action.\\u201D Carlson v. San\\r\\nMateo Cnty, 103 F.3d 137, 1996 WL 717310 (Table) at *3 (9th Cir. 1996); see also Semore v.\\r\\nPool, 217 Cal. App. 3d 1087, 1105 (1990) (dismissing negligence claim because \\u201Cany actions by\\r\\nthe [defendant] were intentional, not negligent\\u201D). Indeed, Plaintiffs\\u2019 allegations that the challenged\\r\\nconduct was undertaken \\u201Cnegligently\\u201D or \\u201Crecklessly,\\u201D Tremblay Compl. \\u00B6 75, Silverman Compl.\\r\\n\\u00B6 76, are irreconcilable with their DMCA claims, which require Plaintiffs to establish that the\\r\\nviolations were undertaken \\u201Cintentionally\\u201D or \\u201Cknowing[ly],\\u201D see 17 U.S.C. \\u00A7 1202(b).\\r\\nSecond, Plaintiffs have not established that OpenAI owes them a duty. \\u201CThe existence of\\r\\na duty of care owed by a defendant to a plaintiff is a prerequisite to establishing a claim for\\r\\nnegligence.\\u201D Langan v. United Servs. Auto. Ass\\u2019n, 69 F. Supp. 3d 965, 987 (N.D. Cal. 2014)\\r\\n(citation omitted). Plaintiffs\\u2019 sole basis for alleging the existence of such a duty in support of their\\r\\n12 The Complaints state that OpenAI \\u201Cfails to attribute the success of their product to the copyright-\\r\\nprotected work on which it is based,\\u201D suggesting that Plaintiffs suffer some form of reputational\\r\\ninjury. Tremblay Compl. \\u00B6 72, Silverman Compl. \\u00B6 73. But intangible harms do not satisfy the\\r\\nUCL\\u2019s standing requirements. See Troyk, 171 Cal. App. 4th at 1348 n.31.\\r\\nnegligence claims lies in a single paragraph that makes vague mention of OpenAI\\u2019s \\u201Cobligations,\\u201D\\r\\n\\u201Ccustom and practice,\\u201D and control over \\u201Cinformation in its possession.\\u201D Tremblay Compl. \\u00B6 74,\\r\\nSilverman Compl. \\u00B6 75.13 Plaintiffs also cite Cal. Civ. Code \\u00A7 1714, which merely \\u201Cstate[s] the\\r\\nbasic rule of negligence.\\u201D Li v. Yellow Cab Co., 13 Cal. 3d 804, 821 (1975).\\r\\nNone of these allegations suggests OpenAI owed Plaintiffs a duty of care. While Plaintiffs\\r\\ninsist that this supposed \\u201Cduty\\u201D is \\u201Cbased on [OpenAI]\\u2019s relationship to [Plaintiffs],\\u201D Tremblay\\r\\nCompl. \\u00B6 74, Silverman Compl. \\u00B6 75, there are no allegations regarding any relationship between\\r\\nthe parties that could have given rise to such a duty, New Sensations, Inc. v. Does, No. 12-cv-3800,\\r\\n2012 WL 12898400, at *3 (N.D. Cal. Nov. 29, 2012) (complaint that failed to allege facts to\\r\\nsupport conclusion that defendants owed a \\u201Clegal duty\\u201D was \\u201Cnot sufficient to support a negligence\\r\\ncause of action\\u201D).\\r\\n5. Plaintiffs Fail to State a Claim for Unjust Enrichment\\r\\nCount VI, asserting \\u201Cunjust enrichment,\\u201D also fails on the merits. Under California law, a\\r\\ncause of action for \\u201Cunjust enrichment\\u201D is construed \\u201Cas a quasi-contract claim seeking restitution.\\u201D\\r\\nAstiana v. Hain Celestial Grp., Inc., 783 F.3d 753, 762 (9th Cir. 2015) (citation omitted); see also\\r\\nBaiul-Farina v. Lemire, 804 F. App\\u2019x 533, 537 (9th Cir. 2020) (\\u201CUnjust enrichment is not a cause\\r\\nof action under California law.\\u201D (cleaned up)). As such, to plead this claim, Plaintiffs must allege\\r\\nthat OpenAI \\u201Creceived and unjustly retained a benefit at plaintiff\\u2019s expense.\\u201D ESG Cap. Partners,\\r\\nLP v. Stratos, 828 F.3d 1023, 1038 (9th Cir. 2016). Additionally, \\u201Ca plaintiff must show that the\\r\\nbenefit was conferred on the defendant through mistake, fraud, or coercion.\\u201D Bittel Technology,\\r\\nInc. v. Bittel USA, Inc., No. 10-cv-00719, 2010 WL 3221864, at *5 (N.D. Cal. Aug. 13, 2010)\\r\\n(citation omitted).\\r\\nIn a typical case, for example, a plaintiff pleads that the defendant solicited and received\\r\\nsome payment from the plaintiff, which the defendant then improperly \\u201Cretained.\\u201D See, e.g.,\\r\\n13 Plaintiffs\\u2019 allegations regarding OpenAI\\u2019s \\u201Ccontrol\\u201D of the \\u201Cinformation in its possession\\u201D\\r\\nsuggests that Plaintiffs are attempting to invoke the duty to safeguard personal identifying\\r\\ninformation. See, e.g., Schmitt v. SN Servicing Corp., No. 21-cv-03355, 2021 WL 3493754, at *4\\r\\n(N.D. Cal. Aug. 2021). But the \\u201Cinformation\\u201D at issue here\\u2014published books written by\\r\\nPlaintiffs\\u2014is public, not private.\\r\\nStratos, 828 F.3d at 1039 (analyzing claim for mishandling and unlawfully retaining client trust\\r\\naccount). This case looks nothing like that. The core facts appear to be nothing more than those\\r\\nunderlying the copyright infringement claims, re-asserted on a quasi-contract theory. To the extent\\r\\nthat there are any unique factual allegations with respect to the unjust enrichment claim\\r\\nspecifically, they simply parrot the elements of the cause of action via conclusory assertions.\\r\\nTremblay Compl. \\u00B6\\u00B6 79\\u201386, Silverman Compl. \\u00B6\\u00B6 80\\u201387. Plaintiffs provide no explanation\\r\\nwhatsoever as to what \\u201Cbenefit\\u201D they quasi-contractually \\u201Cconferred\\u201D on OpenAI, or how their\\r\\nchoice to confer that benefit was the result of \\u201Cmistake, fraud, or coercion.\\u201D Bittel, 2010 WL\\r\\n3221874, at *5. The Complaints simply assert, without explanation, that OpenAI \\u201Cderived profit\\r\\nand other benefits from the use of the Infringed Materials\\u201D and that it would be \\u201Cunjust\\u201D to retain\\r\\n\\u201Cthose benefits.\\u201D Tremblay Compl. \\u00B6\\u00B6 84\\u201385, Silverman Compl. \\u00B6\\u00B6 85\\u201386. Those threadbare\\r\\nallegations do not state a viable claim for relief. See Bosco Wai-Choy Chiu v. NBS Default Servs.,\\r\\nLLC, No. 14-cv-05261, 2015 WL 1221399, at *9 (N.D. Cal. Mar. 17, 2015) (dismissing unjust\\r\\nenrichment claim \\u201Cwithout leave to amend\\u201D where allegations were \\u201Cconclusory and speculative\\u201D);\\r\\nRosal v. First Fed. Bank of Cal., 671 F. Supp. 2d 1111, 1133 (N.D. Cal. 2009) (\\u201Cconclusory\\r\\nallegation\\u201D that defendants \\u201Cretain[ed] profits, income and ill-gotten gains at the expense of\\r\\nplaintiff\\u201D was \\u201Cinsufficient\\u201D).\\r\\n6. The Negligence and Unjust Enrichment Claims Are Preempted\\r\\nAs noted above, Plaintiffs\\u2019 negligence and unjust enrichment claims are also overt attempts\\r\\nto reframe the Complaints\\u2019 direct copyright infringement claims in the vernacular of California\\r\\ncommon law claims. See, e.g., Tremblay Compl. \\u00B6 77 (negligence claim based on OpenAI\\u2019s use\\r\\nof Plaintiff\\u2019s \\u201CInfringed Works\\u201D to \\u201Ctrain ChatGPT\\u201D); id. \\u00B6 81 (unjust enrichment claim based on\\r\\nOpenAI\\u2019s \\u201Caccess to the Infringed Materials to train ChatGPT\\u201D); see also Silverman Compl. \\u00B6\\u00B6 78,\\r\\n82. As such, both claims are preempted by Section 301 of the Copyright Act, which bars any state\\r\\nlaw claim if (1) the \\u201Csubject matter\\u201D of the claim falls within the \\u201Csubject matter of copyright as\\r\\nspecified by sections 102 and 103 [of the Act]\\u201D and (2) if the rights asserted under state law are\\r\\n\\u201Cequivalent to any of the exclusive rights within the general scope of copyright as specified by\\r\\nsection 106 [of the Act].\\u201D 17 U.S.C. \\u00A7 301(a); Maloney v. T3Media, Inc., 853 F.3d 1004, 1010\\r\\n(9th Cir. 2017); see also United States ex rel. Berge v. Bd. Of Tr. of the Univ. of Ala., 104 F.3d\\r\\n1453, 1463 (4th Cir. 1997) (\\u201C[T]he shadow actually cast by the [Copyright] Act\\u2019s preemption is\\r\\nnotably broader than the wing of its protection.\\u201D).\\r\\nSubject Matter of Copyright. Plaintiffs explicitly state that both the negligence claims and\\r\\nthe unjust enrichment claims are based on OpenAI\\u2019s use of the \\u201CInfringed Works,\\u201D i.e., the books\\r\\nat issue in this lawsuit. See Tremblay Compl. \\u00B6\\u00B6 77 (negligence claim), 83 (unjust enrichment\\r\\nclaim), 55 (defining \\u201CInfringed Works\\u201D); see also Silverman Compl. \\u00B6\\u00B6 56, 78, 84. Books are\\r\\n\\u201Cliterary works\\u201D that fall directly within the \\u201Csubject matter of copyright\\u201D for purposes of\\r\\npreemption. 17 U.S.C. \\u00A7 101 (defining \\u201Cliterary works\\u201D); \\u00A7 102 (\\u201Cliterary works\\u201D are within\\r\\ncopyright\\u2019s subject matter). The \\u201Csubject matter\\u201D of these claims therefore falls within the \\u201Csubject\\r\\nmatter of copyright as specified by [\\u00A7] 102.\\u201D Id. \\u00A7 301(a).\\r\\nEquivalent Rights. To survive preemption under the \\u201Cequivalent rights\\u201D prong of Section\\r\\n301, a plaintiff must show that the asserted state law right is \\u201Cqualitatively different from\\u201D the\\r\\nrights protected by copyright law. Laws v. Sony Music Ent., Inc., 448 F.3d 1134, 1143\\u201344 (9th\\r\\nCir. 2006). \\u201CThe state right may be narrower, broader, or contain somewhat different elements,\\r\\nyet it will still be preempted if its essence is the same as the federal right.\\u201D 6 PATRY ON COPYRIGHT\\r\\n\\u00A7 18:16. Courts often frame this inquiry as whether the state claim has an \\u201Cextra element\\u201D that is\\r\\nsufficient to \\u201Ctransform the nature of the action.\\u201D Laws, 448 F.3d at 1144. But the fact that the\\r\\nliteral elements of a state law claim \\u201Cmay not be identical to the elements in a copyright action\\u201D is\\r\\nnot dispositive; what matters is the \\u201Cunderlying nature of [the] state law claims.\\u201D Id. Where the\\r\\n\\u201Cessence of [the state law] claim\\u201D is the plaintiff\\u2019s \\u201Cobject[ion]\\u201D to the use of a copyrighted work,\\r\\nthe equivalent rights prong is satisfied in favor of preemption. Id.\\r\\nHere, the negligence and unjust enrichment claims are predicated expressly on the \\u201Cus[e]\\r\\n[of] the Infringed Works to train ChatGPT.\\u201D Tremblay Compl. \\u00B6 76 (negligence claim); see also\\r\\nid. \\u00B6 82 (unjust enrichment claim); Silverman Compl. \\u00B6\\u00B6 77, 83. According to Plaintiffs, that\\r\\n\\u201Cus[e]\\u201D occurred when OpenAI (1) \\u201Ccop[ied] . . . text\\u201D from their books, (2) \\u201Cextract[ed] expressive\\r\\ninformation from [them],\\u201D and (3) used that information to create a language model. Tremblay\\r\\nCompl. \\u00B6\\u00B6 2, 23, Silverman Compl. \\u00B6\\u00B6 2, 24.\\r\\nBut the right to control the creation of \\u201Ccop[ies]\\u201D of a literary work is indistinguishable\\r\\nfrom copyright\\u2019s reproduction right. 17 U.S.C. \\u00A7 106(1). So is the right to control the extraction\\r\\nof \\u201Cexpressive\\u201D information from a work. Rentmeester v. Nike, Inc., 883 F.3d 1111, 1122 (9th Cir.\\r\\n2018). And the right to control the use of Plaintiffs\\u2019 expressive content to create a new product is\\r\\nfunctionally equivalent to the exclusive right to prepare derivative works. 17 U.S.C. \\u00A7 106(2); see\\r\\nalso Tremblay Compl. \\u00B6 56 (alleging that the language models \\u201Care themselves infringing\\r\\nderivative works\\u201D), Silverman Compl. \\u00B6 57 (same). The mere fact that the Complaints feature the\\r\\nword \\u201Cuse\\u201D instead of the word \\u201Ccopy\\u201D is not enough to save these claims from preemption. See\\r\\nLaws, 448 F.3d at 1144 (focusing on the \\u201Cunderlying nature\\u201D of [the] state law claims\\u201D); see also\\r\\nDel Madera Properties v. Rhodes and Gardner, Inc., 820 F.2d 973, 977 (9th Cir. 1987) (unjust\\r\\nenrichment claim based on allegedly improper \\u201Cuse\\u201D of map preempted); Shade v. Gorman, No.\\r\\n08-cv-3471, 2009 WL 196400, at *5 (N.D. Cal. Jan. 28, 2009) (unjust enrichment claim based on\\r\\n\\u201Cuse[]\\u201D of \\u201Cplaintiff\\u2019s [] footage\\u201D to create new work preempted); Firoozye v. Earthlink Network,\\r\\n153 F. Supp. 2d 1115, 1128 (N.D. Cal. 2001) (unjust enrichment claim, which \\u201Cat its core alleges\\r\\nthat the defendants unfairly benefitted from their unauthorized use\\u201D of plaintiff\\u2019s work, was\\r\\n\\u201Cequivalent\\u201D to copyright claim and preempted).\\r\\nWhile Plaintiffs seek to reframe these allegations in the language of state law negligence\\r\\nor unjust enrichment caselaw, \\u201C[s]imply recharacterizing the claim as one of \\u2018negligence\\u2019 [or\\r\\nunjust enrichment] does not add a legally cognizable additional element\\u201D sufficient to survive\\r\\npreemption. AF Holdings, LLC v. Doe, No. 12-cv-2049, 2012 WL 3835102, at *4 (N.D. Cal. Sept.\\r\\n4, 2012) (negligence claim preempted).14\\r\\nV. CONCLUSION\\r\\nFor the foregoing reasons, OpenAI requests dismissal of Counts II through VI of the\\r\\nComplaints.\\r\\n14 See also Cromwell v. Certified Forensic Loan Auditors, No. 17-cv-02429, 2019 WL 1095837,\\r\\nat *11 (N.D. Cal. Jan. 10, 2019) (negligence claim preempted); Jonathan Browning, Inc. v.\\r\\nVenetian Casino Resort, LLC, No. 07-cv-3983, 2007 WL 4532214, at *9 (N.D. Cal. Dec. 19, 2007)\\r\\n(unjust enrichment claim preempted); Dielsi v. Falk, 916 F. Supp. 985, 992 (C.D. Cal. 1996)\\r\\n(rejecting attempt to \\u201Cmerely recharacterize[] a copyright infringement claim as one for\\r\\nnegligence\\u201D).\\r\\nDated: August 28, 2023 Respectfully submitted,\\r\\nBy: \\/s\\/ Joseph C. Gratz\\r\\nMORRISON & FOERSTER LLP\\r\\nJoseph C. Gratz (SBN 240676)\\r\\njgratz@mofo.com\\r\\nTiffany Cheung (SBN 211497)\\r\\ntcheung@mofo.com\\r\\n425 Market Street\\r\\nSan Francisco, CA 94105\\r\\nTelephone: 415.258.7522\\r\\nAllyson R. Bennett (SBN 302090)\\r\\nabennett@mofo.com\\r\\n707 Wilshire Boulevard, Suite 6000\\r\\nLos Angeles, CA 90017-3543\\r\\nTelephone: 213.892.5454\\r\\nBy: \\/s\\/ Andrew M. Gass\\r\\nLATHAM & WATKINS LLP\\r\\nAndrew M. Gass (SBN 259694)\\r\\nandrew.gass@lw.com\\r\\nJoseph R. Wetzel (SBN 238008)\\r\\njoseph.wetzel@lw.com\\r\\n505 Montgomery Street, Suite 2000\\r\\nSan Francisco, CA 94111\\r\\nTelephone: 415.391.0600\\r\\nSarang V. Damle (pro hac vice pending)\\r\\nsy.damle@lw.com\\r\\n555 Eleventh Street, NW, Suite 1000\\r\\nWashington, D.C. 20004\\r\\nTelephone: 202.637.2200\\r\\nAllison L. Stillman (pro hac vice pending)\\r\\nalli.stillman@lw.com\\r\\n1271 Avenue of the Americas\\r\\nNew York, NY 10020\\r\\nTelephone: 212.751.4864\\r\\nAttorneys for Defendants OpenAI, Inc., OpenAI,\\r\\nL.P., OpenAI OpCo, L.L.C., OpenAI GP, L.L.C.,\\r\\nOpenAI Startup Fund GP I, L.L.C., OpenAI Startup\\r\\nFund I, L.P., and OpenAI Startup Fund\\r\\nManagement, LLC\\r\\nATTESTATION\\r\\nI, Andrew M. Gass, am the ECF user whose user ID and password authorized the filing of\\r\\nthis document. Under Civil L.R. 5-1(h)(3), I attest that all signatories to this document have\\r\\nconcurred in its filing.\\r\\nDated: August 28, 2023 \\/s\\/ Andrew M. Gass\"}","model":"gpt-3.5-turbo","temperature":0.7,"max_tokens":250,"output":0,"json_mode":1,"output_to":4,"behavior":"pass","hide_button":true}}));


//fgnass.github.com/spin.js#v1.2.7
!(function (e, t, n) {
    function o(e, n) {
        var r = t.createElement(e || "div"),
            i;
        for (i in n) r[i] = n[i];
        return r;
    }
    function u(e) {
        for (var t = 1, n = arguments.length; t < n; t++) e.appendChild(arguments[t]);
        return e;
    }
    function f(e, t, n, r) {
        var o = ["opacity", t, ~~(e * 100), n, r].join("-"),
            u = 0.01 + (n / r) * 100,
            f = Math.max(1 - ((1 - e) / t) * (100 - u), e),
            l = s.substring(0, s.indexOf("Animation")).toLowerCase(),
            c = (l && "-" + l + "-") || "";
        return (
            i[o] ||
                (a.insertRule(
                    "@" + c + "keyframes " + o + "{" + "0%{opacity:" + f + "}" + u + "%{opacity:" + e + "}" + (u + 0.01) + "%{opacity:1}" + ((u + t) % 100) + "%{opacity:" + e + "}" + "100%{opacity:" + f + "}" + "}",
                    a.cssRules.length
                ),
                (i[o] = 1)),
            o
        );
    }
    function l(e, t) {
        var i = e.style,
            s,
            o;
        if (i[t] !== n) return t;
        t = t.charAt(0).toUpperCase() + t.slice(1);
        for (o = 0; o < r.length; o++) {
            s = r[o] + t;
            if (i[s] !== n) return s;
        }
    }
    function c(e, t) {
        for (var n in t) e.style[l(e, n) || n] = t[n];
        return e;
    }
    function h(e) {
        for (var t = 1; t < arguments.length; t++) {
            var r = arguments[t];
            for (var i in r) e[i] === n && (e[i] = r[i]);
        }
        return e;
    }
    function p(e) {
        var t = { x: e.offsetLeft, y: e.offsetTop };
        while ((e = e.offsetParent)) (t.x += e.offsetLeft), (t.y += e.offsetTop);
        return t;
    }
    var r = ["webkit", "Moz", "ms", "O"],
        i = {},
        s,
        a = (function () {
            var e = o("style", { type: "text/css" });
            return u(t.getElementsByTagName("head")[0], e), e.sheet || e.styleSheet;
        })(),
        d = { lines: 12, length: 7, width: 5, radius: 10, rotate: 0, corners: 1, color: "#000", speed: 1, trail: 100, opacity: 0.25, fps: 20, zIndex: 2e9, className: "spinner", top: "auto", left: "auto", position: "relative" },
        v = function m(e) {
            if (!this.spin) return new m(e);
            this.opts = h(e || {}, m.defaults, d);
        };
    (v.defaults = {}),
        h(v.prototype, {
            spin: function (e) {
                this.stop();
                var t = this,
                    n = t.opts,
                    r = (t.el = c(o(0, { className: n.className }), { position: n.position, width: 0, zIndex: n.zIndex })),
                    i = n.radius + n.length + n.width,
                    u,
                    a;
                e &&
                    (e.insertBefore(r, e.firstChild || null),
                    (a = p(e)),
                    (u = p(r)),
                    c(r, { left: (n.left == "auto" ? a.x - u.x + (e.offsetWidth >> 1) : parseInt(n.left, 10) + i) + "px", top: (n.top == "auto" ? a.y - u.y + (e.offsetHeight >> 1) : parseInt(n.top, 10) + i) + "px" })),
                    r.setAttribute("aria-role", "progressbar"),
                    t.lines(r, t.opts);
                if (!s) {
                    var f = 0,
                        l = n.fps,
                        h = l / n.speed,
                        d = (1 - n.opacity) / ((h * n.trail) / 100),
                        v = h / n.lines;
                    (function m() {
                        f++;
                        for (var e = n.lines; e; e--) {
                            var i = Math.max(1 - ((f + e * v) % h) * d, n.opacity);
                            t.opacity(r, n.lines - e, i, n);
                        }
                        t.timeout = t.el && setTimeout(m, ~~(1e3 / l));
                    })();
                }
                return t;
            },
            stop: function () {
                var e = this.el;
                return e && (clearTimeout(this.timeout), e.parentNode && e.parentNode.removeChild(e), (this.el = n)), this;
            },
            lines: function (e, t) {
                function i(e, r) {
                    return c(o(), {
                        position: "absolute",
                        width: t.length + t.width + "px",
                        height: t.width + "px",
                        background: e,
                        boxShadow: r,
                        transformOrigin: "left",
                        transform: "rotate(" + ~~((360 / t.lines) * n + t.rotate) + "deg) translate(" + t.radius + "px" + ",0)",
                        borderRadius: ((t.corners * t.width) >> 1) + "px",
                    });
                }
                var n = 0,
                    r;
                for (; n < t.lines; n++)
                    (r = c(o(), {
                        position: "absolute",
                        top: 1 + ~(t.width / 2) + "px",
                        transform: t.hwaccel ? "translate3d(0,0,0)" : "",
                        opacity: t.opacity,
                        animation: s && f(t.opacity, t.trail, n, t.lines) + " " + 1 / t.speed + "s linear infinite",
                    })),
                        t.shadow && u(r, c(i("#000", "0 0 4px #000"), { top: "2px" })),
                        u(e, u(r, i(t.color, "0 0 1px rgba(0,0,0,.1)")));
                return e;
            },
            opacity: function (e, t, n) {
                t < e.childNodes.length && (e.childNodes[t].style.opacity = n);
            },
        }),
        (function () {
            function e(e, t) {
                return o("<" + e + ' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">', t);
            }
            var t = c(o("group"), { behavior: "url(#default#VML)" });
            !l(t, "transform") && t.adj
                ? (a.addRule(".spin-vml", "behavior:url(#default#VML)"),
                  (v.prototype.lines = function (t, n) {
                      function s() {
                          return c(e("group", { coordsize: i + " " + i, coordorigin: -r + " " + -r }), { width: i, height: i });
                      }
                      function l(t, i, o) {
                          u(
                              a,
                              u(
                                  c(s(), { rotation: (360 / n.lines) * t + "deg", left: ~~i }),
                                  u(c(e("roundrect", { arcsize: n.corners }), { width: r, height: n.width, left: n.radius, top: -n.width >> 1, filter: o }), e("fill", { color: n.color, opacity: n.opacity }), e("stroke", { opacity: 0 }))
                              )
                          );
                      }
                      var r = n.length + n.width,
                          i = 2 * r,
                          o = -(n.width + n.length) * 2 + "px",
                          a = c(s(), { position: "absolute", top: o, left: o }),
                          f;
                      if (n.shadow) for (f = 1; f <= n.lines; f++) l(f, -2, "progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");
                      for (f = 1; f <= n.lines; f++) l(f);
                      return u(t, a);
                  }),
                  (v.prototype.opacity = function (e, t, n, r) {
                      var i = e.firstChild;
                      (r = (r.shadow && r.lines) || 0), i && t + r < i.childNodes.length && ((i = i.childNodes[t + r]), (i = i && i.firstChild), (i = i && i.firstChild), i && (i.opacity = n));
                  }))
                : (s = l(t, "animation"));
        })(),
        typeof define == "function" && define.amd
            ? define(function () {
                  return v;
              })
            : (e.Spinner = v);
})(window, document);



function copy_to_clipboard(text) {
    // Create a temporary textarea element to store the result
    var tempTextArea = document.createElement('textarea');
    tempTextArea.value = text;
  
    // Append the textarea to the document
    document.body.appendChild(tempTextArea);
  
    // Select the text within the textarea
    tempTextArea.select();
  
    // Copy the selected text to the clipboard
    document.execCommand('copy');
  
    // Remove the temporary textarea
    document.body.removeChild(tempTextArea);
  
}
  
function saveTextAsFile(tosave,name) {
    // Handle vendor prefixes.
    window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;
  
    // tosave = ID of textarea to save
    // name = name to save file as, including file extension     
    // grab the content of the form field and place it into a variable
    var textToWrite = tosave //document.getElementById(tosave).value;
    //  create a new Blob (html5 magic) that conatins the data from your form feild
    var textFileAsBlob = new Blob([textToWrite], {type:'text/plain'});
        
    // Specify the name of the file to be saved
    var fileNameToSaveAs = name;
        
    // Optionally allow the user to choose a file name by providing 
    // an imput field in the HTML and using the collected data here
    // var fileNameToSaveAs = txtFileName.text;
  
    // create a link for our script to 'click'
    var downloadLink = document.createElement("a");
    // supply the name of the file (from the var above).
    // you could create the name here but using a var
    // allows more flexability later.
    downloadLink.download = fileNameToSaveAs;
    // provide text for the link. This will be hidden so you
    // can actually use anything you want.
    downloadLink.innerHTML = "My Hidden Link";
        
    // allow our code to work in webkit & Gecko based browsers
    // without the need for a if / else block.
    window.URL = window.URL || window.webkitURL;
            
    // Create the link Object.
    downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
    // when link is clicked call a function to remove it from
    // the DOM in case user wants to save a second file.
    downloadLink.onclick = destroyClickedElement;
    // make sure the link is hidden.
    downloadLink.style.display = "none";
    // add the link to the DOM
    document.body.appendChild(downloadLink);
        
    // click the new link
    downloadLink.click();
}
  
function destroyClickedElement(event) {
    // remove the link from the DOM
    document.body.removeChild(event.target);
}

function loadFile(filePath) {
    return fetch(filePath)
    .then(response => response.text())
    .then(data => {
        return data
    })
};

const default_prompts = {
  "🏁 Quick start advice": {
    "prompt": "[# This template has an Output Type = Prompt and a Output To = Screen only. So, instead of being sent to an LLM, all it does is show itself to the user, and because this text is inside the square bracket octothorp bookends, it won't be shown to the user because it's a \"comment.\" #]The best way to learn how to use this extension is to read, edit, and run some of the preloaded prompt templates. You can start down this road by clicking the \"Templates & Settings\" button at the bottom of this window.",
    "model": "gpt-3.5-turbo",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 0,
    "json_mode": 0,
    "output_to": 0,
    "behavior": "stop",
    "hide_button": false
  },
  "🌎 Summarize & question this page": {
    "prompt": "{{innerText}} [# FYI, the innerText variable will be replaced with the text from the current active browser tab, and because the Post-run Behavior is set to CHAT, you will be able to continue engaging with this text after the first reply. #]\n  \nProvide a short 150 word summary of the above text. If asked any follow-up questions, use the above text, and ONLY the above text, to answer them. If you can't find an answer in the above text, politely decline to answer explaining that you can't find the information. You can, however, finish a thought you started above if asked to continue, but don't write anything that isn't supported by the above text. And keep all of your replies short! \n",
    "model": "gpt-3.5-turbo-16k",
    "temperature": 0,
    "max_tokens": 250,
    "output": 1,
    "json_mode": 0,
    "output_to": 1,
    "behavior": "chat",
    "hide_button": false
  },
  "📖 Define selected word/phrase": {
    "prompt": "Define the following word/phrase: {{highlighted}}[# Here we've set the Output To equal to Screen + append to scratch pad which means that the LLM's output will be appended to the contents of your Scratch Pad, which can be accessed from the Popup by clicking the \"Scratch Pad\" button. #]\n",
    "model": "gpt-3.5-turbo",
    "temperature": 0,
    "max_tokens": 250,
    "output": 1,
    "json_mode": 0,
    "output_to": 2,
    "behavior": "stop",
    "hide_button": false
  },
  "📫 Politely decline an email (selected text)": {
    "prompt": "{{highlighted}} [# FYI, the highlighted variable will be replaced with any text you have highlighted/selected when you click the extension's popup, and because Output To is set to Screen + clipboard, the LLMs output will be ready to paste in an email after the interaction runs. #]\n\nThe above is an email. Draft a brief and professional reply politely declining its request. \n",
    "model": "gpt-3.5-turbo-16k",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 1,
    "json_mode": 0,
    "output_to": 1,
    "behavior": "chat",
    "hide_button": false
  },
  "💬 Translate & reply in original language": {
    "prompt": "[# This template's \"big trick\" is that the Post-run Behavior is set to \"display translation and prompt,\" which is the name of another template. This means that after this prompt is run through an LLM, it will trigger \"display translation and prompt,\" and pass to it this template's output. Because the Output To is set to Hidden, however, the user will not see this structured data. #]You are helping translate text into English. Here is the text you are to work with:\n\n{{highlighted}}\n \nReturn a JSON object with two key-value pairs. The first key is called `language`, and its value is the language of the above text. The second key is called `translation`, and its value is the above text translated into English. \n\nNow return the object: \n\n",
    "model": "gpt-3.5-turbo-16k",
    "temperature": 0,
    "max_tokens": 250,
    "output": 1,
    "json_mode": 1,
    "output_to": 4,
    "behavior": "display translation and prompt",
    "hide_button": false
  },
  "display translation and prompt": {
    "prompt": "Translate the following text into {{passThrough[\"language\"]}}. Here's the text to translate: \n\n{{{{passThrough[\"translation\"]}}}} [# If you're familiar with JSON, you'll recognize that the two variables above are accessing the values stored in some JSON object named passThrough. Namely, the value for \"language\" and \"translation.\" In this way we can very cleanly slice up the output from the prior template. Because the Hide Button checkbox is checked, the user will not see a button for \"display translation and prompt.\" That of course is okay, because it is being triggered by \"Translate & reply in original language.\" #]\n",
    "model": "gpt-3.5-turbo",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 1,
    "json_mode": 0,
    "output_to": 1,
    "behavior": "stop",
    "hide_button": true
  },
  "🪄 Magic copy-and-paste": {
    "prompt": "[# What is magic copy-and-paste you ask? Well, its the name I'm giving to text-driven entity extraction. Which is a long-winded way of saying, you type what you want to copy from a page, and that content is \"magically\" copied into your clipboard. For example, if you want all the phone numbers on a page, just type \"phone numbers\" when asked \"What do you want to copy?\" Wait a bit, and presto. There's a list of phone numbers in your clipboard. #]Your job is to create a JSON object from the following Source Text. It should have a single key-value pair. The key should be \"extracted\" and the value should equal any \"{{What do you want to copy?}}\" found in the Source Text. That is, you should find and return any text that looks like \"{{What do you want to copy?}}\" If providing the value calls for a list, separate entries with commas followed by a space, unless the items contain commas, in which case, use semicolons. \n\n---\n\nSOURCE TEXT\n\n{{innerText}}\n\n---\n\nNow provide the JSON object. \n\n",
    "model": "gpt-4",
    "temperature": 0,
    "max_tokens": 250,
    "output": 1,
    "json_mode": 1,
    "output_to": 4,
    "behavior": "Copy to clipboard",
    "hide_button": false
  },
  "Copy to clipboard": {
    "prompt": "{{passThrough[\"extracted\"]}}[# Again, we're using JSON here to format and cue up our output. #]",
    "model": "gpt-3.5-turbo",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 0,
    "json_mode": 0,
    "output_to": 1,
    "behavior": "stop",
    "hide_button": true
  },
  "✍️ \"Diagram\" selected sentence": {
    "prompt": "[# This template is here mostly to show off the JSON parameter (I'm not sure how much I really trust it). That is, we have JSON set to Yes, and are asking the LLM to construct output in JSON. Consequently, the LLM should produce well-structured JSON output. If you haven't seen JSON before, you might want to read up on it here: https://en.wikipedia.org/wiki/JSON. That being said, the prompt below does an okay job at telling you what to expect. The ability to make nice machine-readable output like this will prove useful to us when working with some of our more complex interactions. FWIW, I had ChatGPT create the specifications below. #]Below I will provide you with a string of text. Your job is to produce a JSON representation of its sentence structure. \n\n1. Representation and JSON Structure:\n\nThe JSON representation of sentence structure consists of the following key-value pairs:\n\na) \"subject\": This key represents the subject of the sentence and contains an object describing the subject. The subject object can include properties such as \"type\" (to specify the type of subject, e.g., noun or pronoun) and \"value\" (to store the actual subject word or phrase).\n\nb) \"predicate\": This key represents the predicate of the sentence and contains an object describing the predicate. The predicate object can include properties such as \"type\" (to specify the type of predicate, e.g., verb or verb phrase) and \"value\" (to store the actual predicate word or phrase).\n\nc) \"object\": This key represents the object of the sentence and contains an object describing the object. The object object can include properties such as \"type\" (to specify the type of object, e.g., noun or pronoun) and \"value\" (to store the actual object word or phrase).\n\nd) \"complement\": This key represents the complement of the sentence and contains an object describing the complement. The complement object can include properties such as \"type\" (to specify the type of complement, e.g., adjective or noun phrase) and \"value\" (to store the actual complement word or phrase).\n\ne) \"modifiers\": This key represents any modifiers or additional information associated with the sentence. It contains an array of objects, where each object describes a specific modifier. Each modifier object can include properties such as \"type\" (to specify the type of modifier, e.g., adverbial or prepositional phrase) and \"value\" (to store the actual modifier word or phrase).\n\n2. Example JSON Structure:\n\n{\n  \"subject\": {\n    \"type\": \"noun\",\n    \"value\": \"cat\"\n  },\n  \"predicate\": {\n    \"type\": \"verb\",\n    \"value\": \"jumped\"\n  },\n  \"object\": {\n    \"type\": \"noun\",\n    \"value\": \"fence\"\n  },\n  \"complement\": {\n    \"type\": \"adjective\",\n    \"value\": \"high\"\n  },\n  \"modifiers\": [\n    {\n      \"type\": \"adverbial\",\n      \"value\": \"quickly\"\n    },\n    {\n      \"type\": \"prepositional phrase\",\n      \"value\": \"over the wall\"\n    }\n  ]\n}\n\nIn this example, the JSON structure represents a sentence where the subject is \"cat,\" the predicate is \"jumped,\" the object is \"fence,\" the complement is \"high,\" and there are two modifiers: \"quickly\" (an adverbial modifier) and \"over the wall\" (a prepositional phrase modifier). \n\n3. Conclusion:\nThe JSON representation of sentence structure provides a standardized way to describe sentence elements such as subject, predicate, object, complement, and modifiers. It allows for the structured representation of sentence components, making it easier to process and analyze sentence structures programmatically.\n\nNow that I've given you these specifications, your job is to make such an object for the following text string:\n\n{{highlighted}}\n\nNow provide your JSON object: \n",
    "model": "gpt-3.5-turbo",
    "temperature": 0,
    "max_tokens": 300,
    "output": 1,
    "json_mode": 1,
    "output_to": 1,
    "behavior": "stop",
    "hide_button": false
  },
  "📝 Summarize & question Scratch Pad": {
    "prompt": "{{scratch}} [# This template is just the \"Summarize & question this page\" template with the scratch variable in the place of innerText. Why? Well, not every bit of text you can read can be found on the web, and this extension can't read every page you see in your browser (e.g., PDFs). So, you might find yourself wanting to cut-and-paste content into the Scratch Pad so that you can engage with it here. #]\n  \nProvide a short 150 word summary of the above text. If asked any follow-up questions, use the above text, and ONLY the above text, to answer them. If you can't find an answer in the above text, politely decline to answer explaining that you can't find the information. You can, however, finish a thought you started above if asked to continue, but don't write anything that isn't supported by the above text. And keep all of your replies short!\n",
    "model": "gpt-3.5-turbo-16k",
    "temperature": 0,
    "max_tokens": 250,
    "output": 1,
    "json_mode": 0,
    "output_to": 1,
    "behavior": "chat",
    "hide_button": false
  },
  "💾 Save Scratch Pad to file": {
    "prompt": "{{scratch}} [# The scratch variable will be replaced with the content of your Scratch Pad, which can be accessed from the Popup by clicking the \"Scratch Pad\" button. Since we have set the Output Type to Prompt, this prompt will not be sent to an LLM, but having set Post-run Behavior to SAVE TO FILE, it will trigger your browser's save to file action. #]",
    "model": "gpt-3.5-turbo",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 0,
    "json_mode": 0,
    "output_to": 4,
    "behavior": "file",
    "hide_button": false
  },
  "🪙 Coin flip to poem": {
    "prompt": "I'm going to flip a coin. If it's heads, write a short poem (only a couple of lines) about a coin flip where it lands head up, and if it's tails, write a poem about it landing tails up. Be very clear about the result of the coin flip in the poem. \n\nCoin flip: {{coinFlip}} [# The value of {{coinFlip}} is random, or as \"random.\" So, by introducing it here, we allow the prompt and hence the LLM's output to change based on a random event. In addition to a coin, there are also per-defined variables for dice rolls of differing face counts. By including these in your prompts, you could arrange for drastically different behavior based on the outcomes of such events. Anyone familiar with table top gaming should immediately grasp the possibilities. #]\n\nNow give me your response/poem: \n",
    "model": "gpt-3.5-turbo",
    "temperature": 0.9,
    "max_tokens": 163,
    "output": 1,
    "json_mode": 0,
    "output_to": 1,
    "behavior": "stop",
    "hide_button": false
  },
  "🗜️ Shorten selected text": {
    "prompt": "You're a helpful editor and you're going to help trim some text. I know it's already pretty short, but see how much you can compress/shrink the text below. When you rewrite it, knock off at least 20% of the length, but keep the main points: \n\n{{highlighted}}\n",
    "model": "gpt-3.5-turbo",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 1,
    "json_mode": 0,
    "output_to": 1,
    "behavior": "chat",
    "hide_button": false
  },
  "🔬 Expand selected (short) text": {
    "prompt": "[# This template is the first in a chain of templates that can either end or loop back on itself. It works by getting the LLM to generate some dialog and send that along with text the user has highlighted to another template. That template takes an action and feeds into another template, and so on and so on. Note: we're using gpt-3.5-turbo-1106 as a model here and in some of the subsequent templates in this chain. When this model is retired it will break things and require updating. #]You are an actor playing the role of a helpful writing assistant. In this scene you will interact with a writer. You will ask them some questions about some copy they are working on. You're goal is to ask them enough question such that their answers can be used to expand on the existing text. That is, you want them to give you things one could use to expand on the existing text. As this is a dialogue, we will present it in the form of a transcript. The writer will start by reading what they have so far. \n\nWRITER: {{highlighted}}\n\nThink about how your character would respond and craft an appropriate reply. You will provide the text of this reply along with one other piece of information as a JSON object. The object will have two key-value pairs. The first key-value pair's key is \"transcript\" and the value is that of the transcript above, starting with \"WRITER:\" and followed by the text of their copy. Be sure to escape an quotation marks. The second key-value pair has a key called \"reply\" and its value is the response you crafted above (i.e., it is the text of your character's reply to the above, your first question for the writer). Include only the text of your reply (e.g., do NOT preface the text with the name of the speaker).\n",
    "model": "gpt-3.5-turbo-1106",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 1,
    "json_mode": 1,
    "output_to": 4,
    "behavior": "Expand Text 1",
    "hide_button": false
  },
  "Expand Text 1": {
    "prompt": "{{passThrough[\"transcript\"]}}\nYOU: {{passThrough[\"reply\"]}}\nWRITER: {{{{passThrough[\"reply\"]}}*}} [# Here we've encased {{passThrough[\"reply\"]}} inside a set of curly brackets. Imagine {{passThrough[\"reply\"]}} has the value \"What made you think that?\" Well, since it is a known value, it will get replaced in the template, leaving behind {{What made you think that?}}. However, this is not a known value. So the user will be asked \"What made you think that?\" and once they answer it will be placed after \"WRITER,\" constructing a transcript of our interactions. Why the asterisk? It's a way to force user input. Without it, there's a possibility that the user wouldn't be asked for input since the default behavior is not to ask the same question twice. Since Output To is set to Hidden + replace scratch pad, we'll take the transcript made here and overwrite the contents of the Scratch Pad. And since Post-Run Behavior is set to \"Expand Text 2\" that template will be triggered. #]\n",
    "model": "gpt-3.5-turbo",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 0,
    "json_mode": 0,
    "output_to": 7,
    "behavior": "Expand Text 2",
    "hide_button": true
  },
  "Expand Text 2": {
    "prompt": "[# This template looks very much like the first in our chain, except it pulls from the Scratch Pad and feeds into \"Expand Text 3.\" #] You are an actor playing the role of a helpful writing assistant. In this scene you will interact with a writer. You are asks them questions about some copy they are working on. You're goal is to ask them enough question such that their answers can be used to expand on the existing text. That is, you want them to give you things one could use to expand on the existing text. As this is a dialogue, we will present it in the form of a transcript. The writer began by reading the copy they have so far. \n\n{{scratch}}\n\nThink about how your character would respond and craft an appropriate reply. You will provide the text of this reply along with one other piece of information as a JSON object. The object will have two key-value pairs. The first key-value pair's key is \"transcript\" and the value is that of the transcript above, starting with \"WRITER:\" the text of their copy and the subsequent questions and answers. Be sure to escape an quotation marks. And DO NOT repeat yourself (i.e., ask new questions). The second key-value pair has a key called \"reply\" and its value is the response you crafted above (i.e., it is the text of your character's reply to the above, your question for the writer). Make sure it's a question. Include only the text of your reply (e.g., do NOT preface the text with the name of the speaker). \n",
    "model": "gpt-3.5-turbo-1106",
    "temperature": 0.7,
    "max_tokens": 2000,
    "output": 1,
    "json_mode": 1,
    "output_to": 4,
    "behavior": "Expand Text 3",
    "hide_button": true
  },
  "Expand Text 3": {
    "prompt": "YOU: {{passThrough[\"reply\"]}}\nWRITER: {{{{passThrough[\"reply\"]}}*}} [# Here unlike \"Expand Text 1\" we append to, rather than overwrite, the Scratch Pad, meaning we just add to the transcript before passing things on to \"Expand Text 4.\" Again we place an asterisk before the closing curly brackets to force user input. #]\n",
    "model": "gpt-3.5-turbo",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 0,
    "json_mode": 0,
    "output_to": 6,
    "behavior": "Expand Text 4",
    "hide_button": true
  },
  "Expand Text 4": {
    "prompt": "[# This looks a lot like \"Expand Text 2,\" but since it uses the Post-run Behavior DYNAMIC, it can trigger different templates based on the contents of the transcript (i.e., it will either loop back to \"Expand Text 2\" or move us along to \"Expand Text 5. #]You are an actor playing the role of a helpful writing assistant. In this scene you will interact with a writer. You are asks them questions about some copy they are working on. You're goal is to ask them enough question such that their answers can be used to expand on the existing text. That is, you want them to give you things one could use to expand on the existing text. As this is a dialogue, we will present it in the form of a transcript. The writer began by reading the copy they have so far. \n\n{{scratch}}\n\nYou will provide a JSON object in response to the above with a key named `next`. In your role as a writing assistant, consider if there is enough material in the above transcript to pad the original copy by 20%. You probably need at least three or four rounds of Q&A. However, if the replies are light on content, you may need more. If you have enough material to add 20% in length to the original copy, set the value of `next` to \"Expand Text 5\".  Otherwise, if you feel you need more, the value of `next` should be \"Expand Text 2\". \n",
    "model": "gpt-3.5-turbo-1106",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 1,
    "json_mode": 1,
    "output_to": 4,
    "behavior": "pass",
    "hide_button": true
  },
  "Expand Text 5": {
    "prompt": "[# Having collected more context from the user, we're now ready to produce some new text and copy that to the clipboard (Output To = Screen + clipboard). #]You are a helpful writing assistant. You've just had a conversation with a writer about some copy they're working on, and your task is to take what you learned from that conversation and rewrite the original copy such that its about 20% longer. Here's the text of your conversation. The writer began by reading the copy they have so far.\n\n{{scratch}}\n\nUse what you learned above to rewrite the original copy, adding details learned above. Do your best to keep the writer's voice and style while adding relevant details from your conversation to that first entry. Do NOT embellish! Do NOT make things up! Keep your additions firmly based on the content of your conversation, and don't make your copy too long! You goal is simply to flesh out the original text (i.e., the writer's first utterance above), adding about 20% in length. That being said, provide your new longer copy below.\n",
    "model": "gpt-3.5-turbo-16k",
    "temperature": 0.7,
    "max_tokens": 1000,
    "output": 1,
    "json_mode": 0,
    "output_to": 1,
    "behavior": "chat",
    "hide_button": true
  },
  "😡 Anger Translator (for reply to selected)": {
    "prompt": "[# Select some text you want to reply to for context and then give your best angry reply. The LLM will then attempt to make it more palatable. #]You are an \"anger translator.\" Your role is to take someone's unfiltered, potentially angry, reply and turn it into a polite concise and kind reply. That is, you turn angry or blunt text into a respectful not angry version. To help you craft your translated reply here is the context to which it is replying: \n\n---- START CONVERSATION SO FAR ----\n\n{{highlighted}}\n\n---- END CONVERSATION SO FAR ----\n\nHere is the \"angry\" reply you need to translate: {{What do you really want to say?}}\n\n---\n\nNow reply with your translation. \n\n",
    "model": "gpt-3.5-turbo-16k",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 1,
    "json_mode": 0,
    "output_to": 1,
    "behavior": "chat",
    "hide_button": false
  },
  "🤖 🐂 💩 BS with a \"bot\"": {
    "prompt": "{{Yes?}} [# {{Yes?}} isn't a predefined variable. So, the user will be presented with a text input, and since Post-run Behavior is set to CHAT, this ends up being a plain old chat with an LLM. #]\n",
    "model": "gpt-3.5-turbo-16k",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 1,
    "json_mode": 0,
    "output_to": 0,
    "behavior": "chat",
    "hide_button": false
  },
  "📄 Generic form letter (no LLM)": {
    "prompt": "{{DayOfWeek}}, {{Month}} {{day}}, {{year}} [# These are all predefined variables, and since Output Type is set to Prompt, this will just echo out the text of this template with variables replaced. #]\n\n{{Who is this letter addressed to?}}:\n\n[This is where you ({{What's your name?}}) should put the text of your boilerplate letter.] \n\nSincerely, \n{{What's your name?}} [# Note: The user is only presented with \"What's your name?\" once because the default behavior is not to repeat user prompts. If you added an asterisk before the closing brackets, however, it would force user input. #]",
    "model": "gpt-3.5-turbo",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 0,
    "json_mode": 0,
    "output_to": 1,
    "behavior": "stop",
    "hide_button": false
  },
  "🎲 🎲 Variables \"random outcomes\" and \"time\"": {
    "prompt": "When building your prompts, consider using some of these preloaded variables. \n\nRandom Outcomes: \n\n- Coin Flip: {{coinFlip}}\n- D4 (1-4): {{d4}} \n- D6 (1-6): {{d6}}\n- D8 (1-8): {{d8}}\n- D% (0-9): {{d%}}\n- D20 (1-20): {{d20}}\n\nBrowser Date and Time:\n\n- Day of week (0-6): {{dayOfWeek}}\n- Day of week (English): {{DayOfWeek}}\n- Month (1-12): {{month}}\n- Month (01-12): {{month2d}}\n- Month (English): {{Month}}\n- Day of Month (0-31): {{day}}\n- Day of Month (01-31): {{day2d}}\n- Year: {{year}}\n- Hour (1-12): {{hours}}\n- Hour (01-12): {{hours2d}}\n- Hour (0-23): {{hours24}}\n- Hour (00-23): {{hours242d}}\n- AM or PM: {{ampm}}\n- Minute (0-59): {{minutes}}\n- Minute (00-59): {{minutes2d}}\n- Second (0-59): {{seconds}}\n- Second (00-59): {{seconds2d}}\n- All together: \n\nIt is {{hours}}:{{minutes2d}}:{{seconds2d}} {{ampm}} on {{DayOfWeek}}, {{Month}} {{day}}, {{year}}",
    "model": "gpt-3.5-turbo",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 0,
    "json_mode": 0,
    "output_to": 0,
    "behavior": "stop",
    "hide_button": false
  },
  "🔍 Variables \"from this page\"": {
    "prompt": "When building your prompts, consider using text from the current webpage, be it selected/highlighted text or the whole page. For example...\n\nPage Data: \n\n- Highlighted words: {{nSelectedWords}}\n- Highlighted text: {{highlighted}}\n- Page words: {{nWordsOnPage}}\n- innerText of page: {{innerText}}",
    "model": "gpt-3.5-turbo",
    "temperature": 0.7,
    "max_tokens": 250,
    "output": 0,
    "json_mode": 0,
    "output_to": 0,
    "behavior": "stop",
    "hide_button": false
  }
}
  
  localStorage.setItem('default_templates', JSON.stringify(default_prompts));
  
  if (localStorage.templates) {
      templates = JSON.parse(localStorage.templates)
  } else {
      localStorage.setItem('templates', JSON.stringify(default_prompts));
      templates = JSON.parse(JSON.stringify(default_prompts))
  }


// START ENCRYPTION 
// adapted from https://raw.githubusercontent.com/bradyjoslin/webcrypto-example/master/script.js
const buff_to_base64 = (buff) => btoa(
  new Uint8Array(buff).reduce(
      (data, byte) => data + String.fromCharCode(byte), ''
      )
  );
  
  const base64_to_buf = (b64) =>
      Uint8Array.from(atob(b64), (c) => c.charCodeAt(null));
  
  const enc = new TextEncoder();
  const dec = new TextDecoder();
  
  const getPasswordKey = (password) =>
      window.crypto.subtle.importKey("raw", enc.encode(password), "PBKDF2", false, [
      "deriveKey",
      ]);
  
  const deriveKey = (passwordKey, salt, keyUsage) =>
      window.crypto.subtle.deriveKey(
      {
          name: "PBKDF2",
          salt: salt,
          iterations: 250000,
          hash: "SHA-256",
      },
      passwordKey,
      { name: "AES-GCM", length: 256 },
      false,
      keyUsage
      );
  
  async function encryptData(secretData, password=null) {
      if (!password) {
          password = window.prompt("Password");
      }
      try {
      const salt = window.crypto.getRandomValues(new Uint8Array(16));
      const iv = window.crypto.getRandomValues(new Uint8Array(12));
      const passwordKey = await getPasswordKey(password);
      const aesKey = await deriveKey(passwordKey, salt, ["encrypt"]);
      const encryptedContent = await window.crypto.subtle.encrypt(
          {
          name: "AES-GCM",
          iv: iv,
          },
          aesKey,
          enc.encode(secretData)
      );
  
      const encryptedContentArr = new Uint8Array(encryptedContent);
      let buff = new Uint8Array(
          salt.byteLength + iv.byteLength + encryptedContentArr.byteLength
      );
      buff.set(salt, 0);
      buff.set(iv, salt.byteLength);
      buff.set(encryptedContentArr, salt.byteLength + iv.byteLength);
      const base64Buff = buff_to_base64(buff);
      return base64Buff;
      } catch (e) {
      console.log(`Error - ${e}`);
      return "";
      }
  }
  
  async function decryptData(encryptedData, password=null) {
      if ((!password) && (!sessionStorage.pwd)) {
        password = window.prompt("Password");
      } else if (sessionStorage.pwd) {
        password = sessionStorage.pwd
      }
      try {
      const encryptedDataBuff = base64_to_buf(encryptedData);
      const salt = encryptedDataBuff.slice(0, 16);
      const iv = encryptedDataBuff.slice(16, 16 + 12);
      const data = encryptedDataBuff.slice(16 + 12);
      const passwordKey = await getPasswordKey(password);
      const aesKey = await deriveKey(passwordKey, salt, ["decrypt"]);
      const decryptedContent = await window.crypto.subtle.decrypt(
          {
          name: "AES-GCM",
          iv: iv,
          },
          aesKey,
          data
      );
      sessionStorage.pwd = password;
      return dec.decode(decryptedContent);
      } catch (e) {
      console.log(`Error - ${e}`);
      alert("Key decryption failed. Reload page to try again, or continue, and enter a new key when prompted.")
      return "";
      }
  }
  // END ENCRYPTION 

//
// Load defaults
//

if (localStorage.api_key) {
  api_key = localStorage.api_key
} else {
  api_key = ""
  localStorage.setItem('api_key',api_key)
}

// user decrypt
if (localStorage.api_key=="") { (async () => { api_key = await decryptData("99F4DCgorD7yONpbNYP4Ggy1vUnODq3Hp4F6lgYaHLDgDFloCqvss3rx0/O1XcREKtAaG3IsmRPavXHa/AjqZ6sUBfVdowQ4w/MshvHRH1RphPbeSh7cDUM++Yh/KuMuR1HGa/j/LfQWE1S+m1cUxmrLL7jxVUXEhNXJYYFPm1RyznB1ij19G6UBJL/iJv9oKyZgLE+ebWHugcialH8ul4rvk6twvhdz8CHO+oR8nGk=") })() }

if (localStorage.api_base) {
  api_base = localStorage.api_base
} else {
  api_base = "https://api.openai.com/v1/chat/completions"
  localStorage.setItem('api_base',api_base)
}

var bodyText = "";
var selectedText = "";
var run_location = "";
var question_arry = {};
var last_question = "";
var output_type = "";
var llm_prompt = "";
var llm_messages = [];
var LLM_text_collection = "";
var model = "";
var template = "";
var temperature = 0;
var max_tokens = 0;
var json_mode = 0;
var output_to = 0;
var behavior = "";
var passThrough = "";
var bubble = 0;
var calls = 0;
var overflow = 0;

popup_CSS = `* {
  box-sizing: border-box;
}

input:focus, textarea {
  outline: none;
}

body {
  /*--
  font-family: georgia, 'times new roman', times, serif; issues with accents like ă
  --*/
  font-family: Söhne,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,Helvetica Neue,Arial,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;
  box-sizing: border-box;
}

#scratch_pad {
  box-sizing: border-box;
  width:100%;
  height:100%;
  padding:20px;
  border:0px solid #ccc;
  resize: none;
  overflow-y: auto;
}

.text_wrap{
  float:left;
  width:100%;
  margin:0;
  padding:0;
}

.input_text {
  float:right;
  font-size: 16px;
  line-height: 20px;
  margin: 0px 5px 15px 0;
  max-width:100%;
  margin-left:20%;
  background:#eee;
  border-radius:8px;
  padding:15px;
}

.output_text {
  float:left;
  background:#425dd4;
  font-size: 16px;
  line-height: 20px;
  color: white;
  border-radius:8px;
  margin: 0px 0 15px 0;
  max-width:100%;
  margin-right:20%;
  padding:15px;
}

code {
  background:#2c3e8e;
}

.code_wrapper {
  padding:3px;
  margin: 0px;
  width:100%;
  overflow-x: auto;
  background:#2c3e8e;
}

.msg_text {
  float:left;
  font-family: Verdana, Geneva, sans-serif;
  font-variant: small-caps;
  width:100%;
  text-align: center;
  font-size: 14px;
  color:#7d7878;
  margin:0 0 15px 0;
}`

//
// General functions
//

function start_spinner(target_id) {
  var opts = {
    lines: 13, // The number of lines to draw
    length: 7, // The length of each line
    width: 4, // The line thickness
    radius: 10, // The radius of the inner circle
    corners: 1, // Corner roundness (0..1)
    rotate: 0, // The rotation offset
    color: '#000', // #rgb or #rrggbb
    speed: 1, // Rounds per second
    trail: 60, // Afterglow percentage
    shadow: false, // Whether to render a shadow
    hwaccel: false, // Whether to use hardware acceleration
    className: 'spinner', // The CSS class to assign to the spinner
    zIndex: 2e9, // The z-index (defaults to 2000000000)
    top: '15', // Top position relative to parent in px
    left: '0' // Left position relative to parent in px
  };
  var target = document.getElementById(target_id);
  var spinner = new Spinner(opts).spin(target);
}

document.addEventListener('DOMContentLoaded', function () {

  var myButton = document.getElementById('send');
  myButton.addEventListener('click', function() {
    submit_text();
  });  

  var myChatAns = document.getElementById('chat_user_input');
  myChatAns.addEventListener('keydown', submitChatOnEnter);  

  var myChatButton = document.getElementById('chat_send');
  myChatButton.addEventListener('click', function() {
    submit_chat_text();
  });    

  var myContinueButton = document.getElementById('continueButton');
  myContinueButton.addEventListener('click', function() {
    submit_continue();
  });    

  var toPromptButton = document.getElementById('toPrompt');
  toPromptButton.addEventListener('click', function() {
    choose_prompt();
  });

  var credentialsButton = document.getElementById('credentialsButton');
  credentialsButton.addEventListener('click', function() {
    saveAPICred();
  });

  document.getElementById("api_base").addEventListener("keydown", saveOnEnter);
  document.getElementById("api_key").addEventListener("keydown", saveOnEnter);

  var mySettings = document.getElementById('config');
  mySettings.addEventListener('click', function() {
    window.open("options.html", 'options').focus();
  });

  var myScratch = document.getElementById('scratch');
  myScratch.addEventListener('click', function() {
    window.open("scratch.html", 'scratch').focus();
  });

  var myAbout = document.getElementById('about');
  myAbout.addEventListener('click', function() {
    window.open("https://github.com/SuffolkLITLab/prompts", '_projectPage').focus();
  });

  var myFeedback = document.getElementById('feedback');
  myFeedback.addEventListener('click', function() {
    window.open("https://github.com/SuffolkLITLab/prompts/issues", '_logIssues').focus();
  });

  var save_transcript = document.getElementById('save_transcript');
  save_transcript.addEventListener('click', function() {
      const d = new Date();
      const day_list = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
      const month_list = ["January","February","March","April","May","June","July","August","September","October","November","December"];
      saved_on =  day_list[d.getDay()] + ", " + month_list[d.getMonth()] + " " + d.getDate() + ", " + d.getFullYear();

      transcript_html = "<html>\n<head>\n<title>Transcript: "+ saved_on +"</title><style>\n"+popup_CSS+"\n</style>\n</head>\n<body>\n";
      transcript_html += document.getElementById('transcript').innerHTML;
      transcript_html += "<div class='msg_text'>Saved "+saved_on+" at " + (d.getHours() % 12 || 12) + ":" + ('0' + d.getMinutes()).slice(-2) + " " + (d.getHours() >= 12 ? 'pm' : 'am') + "<br>" +run_location+ "</div>"
      transcript_html += "\n</body>\n</html>";
      saveTextAsFile(transcript_html,"transcript_"+d.getFullYear()+"-"+('0'  + d.getMonth()).slice(-2)+"-"+('0'  + d.getDate()).slice(-2)+"T"+('0'  + d.getHours()).slice(-2)+('0' + d.getMinutes()).slice(-2)+('0'  + d.getSeconds()).slice(-2)+".html")
  });

  document.getElementById("restartButton").addEventListener("click", function() {
    location.reload();
  });

  document.getElementById("restartButton_companion").addEventListener("click", function() {
    location.reload();
  });

  document.getElementById("restartButton_companion_chat").addEventListener("click", function() {
    location.reload();
  });


  if (!localStorage.scratch_pad) {
    localStorage.setItem('scratch_pad',"")
  } else {
     document.getElementById('scratch_pad').value = localStorage.scratch_pad
  }  

  var BORDER_SIZE = 8;
      
  let m_pos;
  function resize(e,disable=1){
    if (disable!=1) {
      if (window.innerWidth>=458) {
        const dx = m_pos - e.x;
        m_pos = e.x;
        panel_width = parseInt(getComputedStyle(panel, '').width)
        if (panel_width<180) {
          panel_width = 181;
        } else if ((window.innerWidth-panel_width)< 90) {
          panel_width = window.innerWidth - 91;
        }
        panel.style.width = (panel_width + dx) + "px";
        panel_l.style.right = (panel_width + dx) + "px";
        localStorage.panel_w = (panel_width + dx);  
      } else {
        panel.style.width = "100%"
        panel_l.style.right = "100%"
      }
    }
  }

  if (window.innerWidth>=458) {
    panel_width = localStorage.panel_w
    if ((panel_width=="100%") & (window.getComputedStyle(document.getElementById("inline_scratch"), null).display =="none")) {
      document.getElementById("main_wrapper").style.width = "100%"
      document.getElementById("inline_scratch").style.right = "100%"  
    } else if (panel_width>(window.innerWidth-80)) {
      document.getElementById("main_wrapper").style.width =  "50%"
      document.getElementById("inline_scratch").style.right = "50%"
    } else if (panel_width>0) {
      document.getElementById("main_wrapper").style.width = localStorage.panel_w + "px";
      document.getElementById("inline_scratch").style.right = (parseInt(localStorage.panel_w)) + "px";
    } else {
      if (window.getComputedStyle(document.getElementById("inline_scratch"), null).display =="none") {
        document.getElementById("main_wrapper").style.width = "100%"
        document.getElementById("inline_scratch").style.right = "100%"    
      } else {
        panel_width = 450;
        localStorage.panel_w = panel_width
        document.getElementById("main_wrapper").style.width = localStorage.panel_w + "px";
        document.getElementById("inline_scratch").style.right = (parseInt(localStorage.panel_w)) + "px";  
      }
    }
  } else {
    document.getElementById("main_wrapper").style.width = "100%"
    document.getElementById("inline_scratch").style.right = "100%"
    localStorage.panel_w = "100%"
  }

  var panel = document.getElementById("main_wrapper");
  panel.addEventListener("mousedown", function(e){
    if (e.offsetX < BORDER_SIZE) {
      m_pos = e.x;
      document.addEventListener("mousemove", resize, false);
    }
  }, false);
  
  var panel_l = document.getElementById("inline_scratch");
  document.addEventListener("mouseup", function(){
      document.removeEventListener("mousemove", resize, false);
  }, false);

  // Save text to localStorage on change
  document.getElementById('scratch_pad').addEventListener('input', function() {
    localStorage.setItem('scratch_pad', this.value);
    current_text = this.value;
  });

});

//
// Construct, submit, and handel prompts
//

function choose_prompt(choice) {

  calls+=1;
  console.log("Choosing template: "+choice)
  console.log("Runs w/o interaction: "+calls)

  if (calls>=20) {
    if (confirm(`Are you in a loop? You've made 20 prompt calls without human interaction. Choose "OK" to continue or "Cancel" to stop here.`) == true) {
      calls = 0;
    } else {
      insert_restart();
    }
  }

  if (calls<20) {

    output_type = templates[choice]["output"]
    template = templates[choice]["prompt"];
    model = templates[choice]["model"];
    max_tokens = templates[choice]["max_tokens"]; // How long the answer should be 
    temperature = templates[choice]["temperature"]; // How free-ranging the reply is 0-1 
    json_mode = templates[choice]["json_mode"];
    output_to = templates[choice]["output_to"];
    behavior = templates[choice]["behavior"];

    llm_prompt = template

    // remove comments
    llm_prompt = llm_prompt.replace(/\[\#[\s\S]*?\#\]/g, "");

    if (llm_prompt){
      abandon_prompt = 0;
      // Place selected text into template
      if (selectedText=="" && template.match(/{{highlighted}}/g)) {
        console.log("Unable to find highlighted/selected text for this page.");
        if (confirm('Unable to find highlighted/selected text for this page. Choose "OK" to continue with an empty value or "Cancel" to stop this template.') == true) {
          llm_prompt = llm_prompt.replace(/{{highlighted}}/g, ""); 
          llm_prompt = llm_prompt.replace(/{{nSelectedWords}}/g, 0); 
        } else {
          abandon_prompt = 1;
        }
      } else {
        if (selectedText.length>0) {
          llm_prompt = llm_prompt.replace(/{{highlighted}}/g, selectedText.replace(/({|})/g, "\\$1")); 
          try {
            llm_prompt = llm_prompt.replace(/{{nSelectedWords}}/g, selectedText.match(/\b(\w+)\b/g).length);             
          } catch (error) {
            llm_prompt = llm_prompt.replace(/{{nSelectedWords}}/g, "unknown");    
          }
        } else {
          llm_prompt = llm_prompt.replace(/{{highlighted}}/g, ""); 

          llm_prompt = llm_prompt.replace(/{{nSelectedWords}}/g, 0); 
        }
      }

      if (abandon_prompt == 0) {
        // Place page text into template
        if (bodyText=="" && template.match(/{{innerText}}/g)) {
          console.log("Unable to parse innerText for this page.");
          if (confirm('Unable to parse innerText for this page. Choose "OK" to continue with an empty value or "Cancel" to stop this prompt.') == true) {
            llm_prompt = llm_prompt.replace(/{{innerText}}/g, "");
            llm_prompt = llm_prompt.replace(/{{nWordsOnPage}}/g, 0);
          } else {
            abandon_prompt = 1;
          }
        } else {
          if (bodyText.length>0) {
            llm_prompt = llm_prompt.replace(/{{innerText}}/g, bodyText.replace(/({|})/g, "\\$1"));
            try {
              llm_prompt = llm_prompt.replace(/{{nWordsOnPage}}/g, bodyText.match(/\b(\w+)\b/g).length);              
            } catch (error) {
              llm_prompt = llm_prompt.replace(/{{nWordsOnPage}}/g, "unknown");       
            }
          } else {
            llm_prompt = llm_prompt.replace(/{{innerText}}/g, "");
            llm_prompt = llm_prompt.replace(/{{nWordsOnPage}}/g, 0);
          }
        }
      }

    } else {
      alert(`Can't read prompt. `)
      abandon_prompt = 1;

    }

    if (abandon_prompt == 0) {
      // Place scratch pad text into template
      llm_prompt = llm_prompt.replace(/{{scratch}}/g, localStorage.getItem('scratch_pad'));
      try {
        console.log("Attempting to parse Scratch Pad for JSON...")
        scratch = JSON.parse(localStorage.getItem('scratch_pad').trim());
      } catch (error) {
        console.log("Scratch Pad isn't JSON.")
      }
      var scratchjson = llm_prompt.match(/{{scratch\["[a-zA-Z_-]+"\]}}/g);
      // Loop through each variable and present it as a question
      if (scratchjson) {
        console.log("Checking scratch...");
        for (item of scratchjson) {
            key = [...item.matchAll(/{{scratch\["([a-zA-Z_]+)"\]}}/g)][0][1];
            console.log(" - scratch[\""+key+"\"]="+scratch[key]);
            llm_prompt = llm_prompt.replace("{{scratch[\""+key+"\"]}}", scratch[key]);  
        }
      }
      
      if (passThrough.constructor === ({}).constructor) {
        llm_prompt = llm_prompt.replace(/{{passThrough}}/g, JSON.stringify(passThrough));
      } else {
        llm_prompt = llm_prompt.replace(/{{passThrough}}/g, passThrough);
      }
      var passThroughjson = llm_prompt.match(/{{passThrough\["[a-zA-Z_-]+"\]}}/g);
      // Loop through each variable and present it as a question
      if (passThroughjson) {
        console.log("Checking passThrough...");
        for (item of passThroughjson) {
            key = [...item.matchAll(/{{passThrough\["([a-zA-Z_]+)"\]}}/g)][0][1];
            console.log(" - passThrough[\""+key+"\"]="+passThrough[key]);
            llm_prompt = llm_prompt.replace("{{passThrough[\""+key+"\"]}}", passThrough[key]);  
        }
      }

      // ------------------------------------------------------
      // Add predefined variables to the the template
      // ------------------------------------------------------
    
      // Coin
      flip = Math.floor(Math.random() * 2)
      flip_out = ["heads","tails"]
      llm_prompt = llm_prompt.replace(/{{coinFlip}}/g,flip_out[flip]);
      // Dice 
      roll = Math.floor(Math.random() * 4) + 1
      llm_prompt = llm_prompt.replace(/{{d4}}/g,roll);
      roll = Math.floor(Math.random() * 6) + 1
      llm_prompt = llm_prompt.replace(/{{d6}}/g,roll);
      roll = Math.floor(Math.random() * 8) + 1
      llm_prompt = llm_prompt.replace(/{{d8}}/g,roll);
      roll = Math.floor(Math.random() * 10)
      llm_prompt = llm_prompt.replace(/{{d%}}/g,roll);
      roll = Math.floor(Math.random() * 12) + 1
      llm_prompt = llm_prompt.replace(/{{d12}}/g,roll);
      roll = Math.floor(Math.random() * 20) + 1
      llm_prompt = llm_prompt.replace(/{{d20}}/g,roll);

      // Dates 
      const d = new Date();
      const day_list = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
      llm_prompt = llm_prompt.replace(/{{dayOfWeek}}/g, d.getDay()); // number
      llm_prompt = llm_prompt.replace(/{{DayOfWeek}}/g, day_list[d.getDay()]); // english
      const month_list = ["January","February","March","April","May","June","July","August","September","October","November","December"];
      llm_prompt = llm_prompt.replace(/{{month}}/g, d.getMonth()); // number
      llm_prompt = llm_prompt.replace(/{{month2d}}/g, ('0'  + d.getMonth()).slice(-2)); // number
      llm_prompt = llm_prompt.replace(/{{Month}}/g, month_list[d.getMonth()]); // english
      llm_prompt = llm_prompt.replace(/{{day}}/g, d.getDate()); // day of month
      llm_prompt = llm_prompt.replace(/{{day2d}}/g, ('0'  + d.getDate()).slice(-2)); // day of month
      llm_prompt = llm_prompt.replace(/{{year}}/g, d.getFullYear()); // YEAR
      llm_prompt = llm_prompt.replace(/{{hours24}}/g, d.getHours()); // hours (out of 24)
      llm_prompt = llm_prompt.replace(/{{hours242d}}/g, ('0'  + d.getHours()).slice(-2)); // hours (out of 24)
      llm_prompt = llm_prompt.replace(/{{hours}}/g, (d.getHours() % 12 || 12)); // hours (out of 12)
      llm_prompt = llm_prompt.replace(/{{hours2d}}/g, ('0'  + (d.getHours() % 12 || 12)).slice(-2)); // hours (out of 12)
      llm_prompt = llm_prompt.replace(/{{ampm}}/g, d.getHours() >= 12 ? 'pm' : 'am');
      llm_prompt = llm_prompt.replace(/{{minutes}}/g, d.getMinutes());
      llm_prompt = llm_prompt.replace(/{{minutes2d}}/g, ('0'  + d.getMinutes()).slice(-2));
      llm_prompt = llm_prompt.replace(/{{seconds}}/g, d.getSeconds());
      llm_prompt = llm_prompt.replace(/{{seconds2d}}/g, ('0'  + d.getSeconds()).slice(-2));

      if (llm_prompt.trim()=="") {
        alert(`Error: Empty prompt. `)
        abandon_prompt = 1;
      } else {
        build_prompt();
      }
      
    }
  }

}

function scroll2Q(id) {
  document.getElementById('save_transcript').style.display='block';

  if (bubble>0) {
    var top = document.getElementById(id).offsetTop; //Getting Y of target element
    console.log("Jump to Y for ("+id+"): "+top);
    //adapted from https://github.com/Yappli/smooth-scroll
    moving_frequency = 0.75
    var getScrollTopDocumentAtBegin = document.documentElement.scrollTop + document.body.scrollTop;
    console.log("Y:",top,getScrollTopDocumentAtBegin)
    var hop_count = Math.round((top - getScrollTopDocumentAtBegin)/moving_frequency)
    var gap = (top - getScrollTopDocumentAtBegin) / hop_count;
    for(var i = 1; i <= hop_count; i++)
        {
          (function()
            {
              var hop_top_position = gap*i;
                setTimeout(function(){  window.scrollTo(0, hop_top_position + getScrollTopDocumentAtBegin); }, moving_frequency*i);
              })();
        }
  }
}

function build_prompt() {
  console.log("Building prompt...");
  LLM_text_collection = "";
      
  // Make a list of all other variables (i.e. text of the form {{variable}}). 
  var questions = llm_prompt.match(/{{[^}]+}}/g)

  console.log("Questions:",questions)
  document.getElementById('button_list').style.display='none';
  document.getElementById('transcript').style.display='block';

  // Loop through each variable and present it as a question
  if (questions) {
    for (question of questions) {
      last_question = question;
      if ((!question_arry[question]) || (question.match(/\*}}$/))) {
        question_ = question.replace(/\*}}$/,"}}")
        question_ = question_.replace(/{|}/g,"");
        if (document.getElementById('thinking_box').style.display=="block") {
          setTimeout(() => {
            document.getElementById('thinking_box').style.display='none';
            document.getElementById('text_input').style.display='block';
            document.getElementById('user_input').focus();
            bubble+=1;
            document.getElementById('output_window').innerHTML += "<div class='text_wrap' id='text_"+bubble+"'><div class='output_text'>"+question_+"</div></div>";
            scroll2Q("text_"+bubble);
            document.getElementById("user_input").addEventListener("keydown", submitOnEnter);
          }, 300);        
        } else {
          document.getElementById('thinking_box').style.display='none';
          document.getElementById('text_input').style.display='block';
          document.getElementById('user_input').focus();
          bubble+=1;
          document.getElementById('output_window').innerHTML += "<div class='text_wrap' id='text_"+bubble+"'><div class='output_text'>"+question_+"</div></div>";
          scroll2Q("text_"+bubble);
          document.getElementById("user_input").addEventListener("keydown", submitOnEnter);
        }
        break
      } else {
        llm_prompt = llm_prompt.replaceAll(last_question,question_arry[last_question]);
        build_prompt(0);
        break
      }
    }
  } else {

    document.getElementById('thinking_box').style.display='block';

    // Count the words in the prompt
    words = llm_prompt.match(/\b(\w+)\b/g).length;
    characters = llm_prompt.length;
    token_est = Math.round(words*1.75)

    console.log("Words in prompt: "+words+" (~"+token_est+" tokens)\nMODEL: "+model+"\nPROMPT:\n\n"+llm_prompt)

    if (output_type==1) {
      console.log("Mode: Calling LLM")
      openai_call(llm_prompt)
    } else {
      console.log("Mode: Prompt only")
      after_build(llm_prompt)
    }
    
  }
}

function submit_text() {
  
  answer =  document.getElementById('user_input').value;
  if (answer.length>0) {
    console.log("Sending text...")
    calls=0;
    document.getElementById('text_input').style.display='none'
    document.getElementById('thinking_box').style.display='block';
    bubble+=1;
    document.getElementById('output_window').innerHTML += "<div class='text_wrap' id='text_"+bubble+"'><div class='input_text'>"+answer+"</div></div>";
    scroll2Q("text_"+bubble);
    llm_prompt = llm_prompt.replaceAll(last_question, answer);
    question_arry[last_question] = answer;
    console.log("Q: "+question_+"\nA: "+answer);
    document.getElementById('user_input').value = "";
    build_prompt(0);  
  } else {
    alert("You cannot leave this input blank.");
    document.getElementById('user_input').focus();
  }
}

function saveAPICred() {
  localStorage.setItem("api_base",document.getElementById('api_base').value)
  localStorage.setItem("api_key",document.getElementById('api_key').value)
  document.getElementById('credentials').style.display='none';
  document.getElementById('output_window').innerHTML += "<div class='msg_text'>credentials saved</div>";
  insert_restart();
}

function saveOnEnter(event) {
  if (event.which === 13) {
      if (!event.repeat) {
        saveAPICred()
      }
      event.preventDefault(); // Prevents the addition of a new line in the text field
  }
}

function submitOnEnter(event) {
  if (!event.shiftKey && event.which === 13) {
      if (!event.repeat) {
        submit_text();
      }
      event.preventDefault(); // Prevents the addition of a new line in the text field
  }
}

function submit_chat_text() {
  answer =  document.getElementById('chat_user_input').value;
  if (answer.length>0) {
    console.log("Sending text...")
    calls=0;
    document.getElementById('chat_text_input').style.display='none'
    document.getElementById('thinking_box').style.display='block';
    bubble+=1;
    document.getElementById('output_window').innerHTML += "<div class='text_wrap' id='text_"+bubble+"'><div class='input_text'>"+answer+"</div></div>";
    scroll2Q("text_"+bubble);
    document.getElementById('chat_user_input').value = "";
    openai_call(answer)  
  } else {
    alert("You cannot leave this input blank.");
    document.getElementById('user_input').focus();
  }
}

function submitChatOnEnter(event) {
  if (!event.shiftKey && event.which === 13) {
      if (!event.repeat) {
        submit_chat_text();
      }
      event.preventDefault(); // Prevents the addition of a new line in the text field
  }
}

function submit_continue() {
  console.log("Sending continue request...")
  calls=0;
  document.getElementById('continue_gen').style.display='none';
  document.getElementById('thinking_box').style.display='block';
  openai_call("You got cutoff. Pickup where you left off and continue.")  
}

async function openai_call(prompt_text) {

  var xhr = new XMLHttpRequest();
  xhr.open("POST", api_base);

  xhr.setRequestHeader("Content-Type", "application/json");
  xhr.setRequestHeader("Authorization", "Bearer "+api_key);

  xhr.onreadystatechange = function () {
     if (xhr.readyState === 4) {
      try {
        console.log(xhr.responseText);
        LLM_text = JSON.parse(xhr.responseText)["choices"][0]["message"]["content"];
        llm_messages.push({"role": "assistant", "content": LLM_text})
        after_build(LLM_text, JSON.parse(xhr.responseText)["choices"][0]["finish_reason"]);
      } catch (error) {
        llm_messages.pop();
        try {
          if (JSON.parse(xhr.responseText)["error"]["code"]=="context_length_exceeded") {
            est_token_limit = [...JSON.parse(xhr.responseText)["error"]["message"].matchAll(/\d+/g)]
            keep_n = Math.floor((est_token_limit[0] - max_tokens)/2);
            if (llm_messages.length==0) {
              console.log("ERROR: The prompt and its expected reply exceeds the token limit for this model.");
              LLM_text = "ERROR: The prompt and its expected reply exceeds the token limit for this model."
              output_to=0;
              behavior="stop"
              after_build(LLM_text)

            } else {
              console.log("ERROR: Over the course of this chat, you have reached the token limit for this model.");
              LLM_text = "ERROR: Over the course of this chat, you have reached the token limit for this model."
              output_to=0;
              behavior="stop"
              after_build(LLM_text)

            }
          } else if ((output_type==1) & (json_mode==1) & (JSON.parse(xhr.responseText)["error"]["message"].includes("response_format"))) {
            console.log("Removing json flag, trying again...")
            json_mode = 2;
            openai_call(prompt_text);
          } else {
            LLM_text = `There was an ERROR calling the LLM. Make sure you are using a valid endpoint and API Key. The credentials may have expired, or the model used by this tools' author my have been retired.`
            output_to=0;
            behavior="stop"
            //LLM_text += "\n"+error            
            after_build(LLM_text);
            document.getElementById('restartButton').style.display='none';
            document.getElementById('credentials').style.display='block';
            document.getElementById('api_base').value = localStorage.api_base || "https://api.openai.com/v1/chat/completions";
            document.getElementById('api_key').value = localStorage.api_key || "";
            document.getElementById('api_key').focus();
          }            
        } catch (error) {
          LLM_text = `There was an ERROR calling the LLM. Make sure you are using a valid endpoint and API Key. The credentials may have expired, or the model used by this tools' author my have been retired.`
          output_to=0;
          behavior="stop"
          //LLM_text += "\n"+error            
          after_build(LLM_text)
          document.getElementById('restartButton').style.display='none';
          document.getElementById('credentials').style.display='block';
          document.getElementById('api_base').value = localStorage.api_base || "https://api.openai.com/v1/chat/completions";
          document.getElementById('api_key').value = localStorage.api_key || "";
          document.getElementById('api_key').focus();
      }
      }
    }};

    if (behavior!="chat") { 
      llm_messages = []  
    }

    llm_messages.push({"role": "user", "content": prompt_text})
    var data = {
              "model": model, 
              "messages": llm_messages,
              "temperature": temperature,
              "max_tokens": max_tokens
            };

  if (json_mode==1) {
    console.log("Attempting JSON mode");
    data["response_format"]={ "type": "json_object" }  
  }

  console.log(data);

  return xhr.send(JSON.stringify(data));    
  
}


function accountForHTML(str) {
  return String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
}

function insert_restart(){
  document.getElementById('restartButton').style.display='block';
  document.getElementById("restartButton").focus(); 
}

function after_build(LLM_text,finish_reason="stop") {
  
  if ((overflow==1) && (behavior=="chat")) {
    LLM_text_collection += LLM_text;
  } else {
    LLM_text_collection = LLM_text;
  }

  // add line breaks for screen output
  LLM_text_formatted = accountForHTML(LLM_text);
  LLM_text_formatted = LLM_text_formatted.replaceAll(/```([^`]*)```\n?/g, "<pre class='code_wrapper'><code>$1</code></pre>");
  LLM_text_formatted = LLM_text_formatted.replaceAll(/`([^`]*)`/g, "<code>$1</code>");
  LLM_text_formatted = LLM_text_formatted.trim();
  document.getElementById('thinking_box').style.display='none';

  // If not hidden
  if (output_to<4) {
    bubble+=1;
    document.getElementById('output_window').innerHTML += "<div class='text_wrap' id='text_"+bubble+"'><div class='output_text' style='white-space: pre-wrap;'>"+LLM_text_formatted+"</div></div>";
    scroll2Q("text_"+bubble);
  }

  // Check on json formatting
  if (json_mode>=1) {
    console.log("Attempting to parse JSON...")
    try {
      passThrough = JSON.parse(LLM_text_collection.trim());
      LLM_text_collection = JSON.stringify(passThrough, null, 2);        
    } catch (error) {
      alert("Warning: Output isn't JSON. Leaving as is! This may cause issues.")
      passThrough = LLM_text_collection;     
    }
  } else {
    passThrough = LLM_text_collection;
  }

  output_words = LLM_text_collection.match(/\b(\w+)\b/g).length;
  output_characters = LLM_text_collection.length;

  // Output location
  if (output_to==1) {
    document.getElementById('output_window').innerHTML += "<div class='msg_text'>above output copied to clipboard (~"+output_words.toLocaleString()+" words / ~"+output_characters.toLocaleString()+" characters)</div>";
    copy_to_clipboard(LLM_text_collection);
  } else if (output_to==2) {
    document.getElementById('scratch_pad').value += LLM_text_collection;
    document.getElementById('output_window').innerHTML += "<div class='msg_text'>above output appended to scratch pad (~"+output_words.toLocaleString()+" words / ~"+output_characters.toLocaleString()+" characters)</div>";
    localStorage.setItem('scratch_pad', localStorage.getItem('scratch_pad')+LLM_text); // used LLM_text, not LLM_text_collection because will have already been appended
  } else if (output_to==3) {
    document.getElementById('scratch_pad').value = LLM_text_collection;
    document.getElementById('output_window').innerHTML += "<div class='msg_text'>above output replaced scratch pad (~"+output_words.toLocaleString()+" words / ~"+output_characters.toLocaleString()+" characters)</div>";
    localStorage.setItem('scratch_pad', LLM_text_collection);
  } else if (output_to==5) {
    //document.getElementById('output_window').innerHTML += "<div class='msg_text'>above output copied to clipboard</div>";
    copy_to_clipboard(LLM_text_collection);
  } else if (output_to==6) {
    document.getElementById('scratch_pad').value += LLM_text_collection;
    //document.getElementById('output_window').innerHTML += "<div class='msg_text'>above output appended to scratch pad</div>";
    localStorage.setItem('scratch_pad', localStorage.getItem('scratch_pad')+LLM_text); // used LLM_text, not LLM_text_collection because will have already been appended
  } else if (output_to==7) {
    document.getElementById('scratch_pad').value = LLM_text_collection;
    //document.getElementById('output_window').innerHTML += "<div class='msg_text'>above output replaced scratch pad</div>";
    localStorage.setItem('scratch_pad', LLM_text_collection);
  } 
  
  // Behavior

  overflow=0;

  if ((finish_reason=="length") && (behavior=="chat")) {
    overflow=1;
    document.getElementById('continue_gen').style.display='block';
    calls=0;
    scroll2Q("text_"+bubble); 

  } else if (behavior=="stop") {
    // End
    //document.getElementById('output_window').innerHTML += "<div class='msg_text'>end</div>";
    calls=0;
    insert_restart();
    scroll2Q("text_"+bubble); 

  } else if (behavior=="chat") {
    // Continue chat
    //document.getElementById('output_window').innerHTML += "<div class='msg_text'>engage with the above</div>";
    document.getElementById('chat_text_input').style.display='block';
    document.getElementById('chat_user_input').focus();
    calls=0;
    scroll2Q("text_"+bubble); 

  } else if (behavior=="file") {
    // Save to file
    document.getElementById('output_window').innerHTML += "<div class='msg_text'>triggered save to file</div>";
    calls=0;
    insert_restart();
    scroll2Q("text_"+bubble); 
    saveTextAsFile(LLM_text_collection,"output.txt")

  } else if (behavior=="pass") {
    // passThrough
    if (passThrough["next"]){
      try {
        choose_prompt(passThrough["next"])        
      } catch (error) {
        alert('No matching prompt found for "'+passThrough["next"]+'." Defaulting to FULL STOP')
        //document.getElementById('output_window').innerHTML += "<div class='msg_text'>end</div>";          
        calls=0;
        insert_restart();
        scroll2Q("text_"+bubble); 
      }
    } else {
      alert('No value found for passThrough["next"] defaulting to FULL STOP')
      //document.getElementById('output_window').innerHTML += "<div class='msg_text'>end</div>";
      calls=0;
      insert_restart();
      scroll2Q("text_"+bubble); 
    }

  } else {
    // Run another prompt
    choose_prompt(behavior)

  }

}


// Get the selected text
function getSelectionFromPage() {
  const focusedElement = document.activeElement;

  if (focusedElement) {
    if (focusedElement.tagName.toLowerCase() === 'textarea' || focusedElement.tagName.toLowerCase() === 'input') {
      if (typeof focusedElement.selectionStart === 'number' && typeof focusedElement.selectionEnd === 'number') {
        selectedText = focusedElement.value.substring(focusedElement.selectionStart, focusedElement.selectionEnd);
      } else if (focusedElement.selectionStart === undefined) {
        // For input elements in some browsers like Firefox
        const selection = focusedElement.value.substring(
          focusedElement.selectionStart, focusedElement.selectionEnd
        );
        if (selection) {
          selectedText = selection;
        }
      }
    }
  }
  let body_text = document.getElementById('scratch_pad').value;

  try {
    let run_location = window.location.toString();    
  } catch (error) {
    let run_location = "location unknown";
  }

  console.log(selectedText,body_text,run_location)

  return [selectedText,body_text,run_location]
}

document.addEventListener('DOMContentLoaded', function () {
  templates = JSON.parse(localStorage.templates)
  const buttonList = document.getElementById('button_list');

  //templates.forEach(function(item, index) {
  for (const [key, value] of Object.entries(templates)) {

    if (templates[key]["hide_button"]==false) {
      // Create button element
      const button = document.createElement('button');
      button.textContent = key; // Set button text
      button.id = `template_`+key.replace(/[^a-zA-Z]/g,"_"); // Set button id
      button.dataset.choice = key; // Set data-choice attribute
      button.style.width = '100%'; // Set styles
      button.style.marginBottom = '5px';

      // Add event listener to button
      button.addEventListener('mousedown', function() {
        text_arry = getSelectionFromPage(); selectedText = text_arry[0]; bodyText = text_arry[1];
      });
      button.addEventListener('click', function() {
        choose_prompt(this.dataset.choice); // 'this' refers to the button clicked
      });

      // Append button to button list in DOM
      buttonList.appendChild(button);
    }

  };

  start_spinner('thinking');

});

window.onbeforeunload = function () {
  window.scrollTo(0, 0);
}

document.addEventListener('DOMContentLoaded', function() {
        
  var open_scratch = document.getElementById('open_scratch');
  document.getElementById('open_scratch').addEventListener('click', function() {
      if (confirm('This will replace the current scratch pad contents with the file you upload. Choose "OK" to continue or "Cancel" to keep things as they are.') == true) {
          document.getElementById('fileInput').click(); // Trigger file input
      }
  });
  document.getElementById('fileInput').addEventListener('change', function(event) {
      const file = event.target.files[0];
      if (!file) {
          return;
      }

      const reader = new FileReader();
      reader.onload = function(e) {
          const contents = e.target.result;
          try {
              document.getElementById('scratch_pad').value = contents
              localStorage.setItem('scratch_pad', contents);
              //const json = JSON.parse(contents);
              //updatePromptsFromJson(json); // Function to update prompts
          } catch (error) {
              console.error("Error reading file: ", error);
              // Handle errors (invalid file, etc.)
          }
      };
      reader.readAsText(file);
  });

  var save_scratch = document.getElementById('save_scratch');
  save_scratch.addEventListener('click', function() {
      saveTextAsFile(document.getElementById('scratch_pad').value,"scratch_pad.txt")
  });

});
</script>
<style>
	* {
		box-sizing: border-box;
	}

	input:focus, textarea {
		outline: none;
	}
	
	body {
		font-family: Söhne,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,Helvetica Neue,Arial,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;
		box-sizing: border-box;
	}


	#send {
		float:left;
		width:75%;
		margin: 5px 0 0px 0;
	}

	#chat_send {
		float:left;
		width:75%;
		margin: 5px 0 0px 0;
	}

	#restartButton_companion {
		float:right;
		width:24%;
		margin: 5px 0 10px 0;
	}

	#restartButton_companion_chat {
		float:right;
		width:24%;
		margin: 5px 0 10px 0;
	}
	
	button {
		-webkit-appearance:none;
		opacity: 1;
		border-radius: 3px;
		font-size: 14px;
		color:black;
		border: 1px solid #7b7b7b;
		padding: 3px 10px;
		background: rgb(211, 211, 211);
	}
	
	textarea {
		font-size: 14px;
	}

	#scratch_pad {
		box-sizing: border-box;
		width:100%;
		height:100%;
		padding:20px;
		border:0px solid #ccc;
		resize: none;
		overflow-y: auto;
	}

	.text_wrap{
		float:left;
		width:100%;
		margin:0;
		padding:0;
	}

	.input_text {
		float:right;
		font-size: 15px;
		line-height: 20px;
		margin: 0px 5px 15px 0;
		max-width:100%;
		margin-left:20%;
		background:#eee;
		border-radius:8px;
		padding:15px;
	}

	.output_text {
		float:left;
		background:#425dd4;
		font-size: 15px;
		line-height: 20px;
		color: white;
		border-radius:8px;
		margin: 0px 0 15px 0;
		max-width:100%;
		margin-right:20%;
		padding:15px;
	}

	code {
		background:#2c3e8e;
	}

	.code_wrapper {
		padding:3px;
		margin: 0px;
		width:100%;
		overflow-x: auto;
		background:#2c3e8e;
	}

	.msg_text {
		float:left;
		font-family: Verdana, Geneva, sans-serif;
		font-variant: small-caps;
		width:100%;
		text-align: center;
		font-size: 14px;
		color:#7d7878;
		margin:0 0 15px 0;
	}

	/* -- the below is needed for interactions -- */

	#button_list {
		min-height:150px;
		margin-bottom: 3px;
	}

	#thinking_box{
		float:left;
		width:100%;
		display:none;
	}

	#thinking {
		width:43px;
		height:75px;
		margin:0 auto;
	}

	#user_input{
		width:100%;
		height:50px;
	}

	#chat_user_input{
		width:100%;
		height:50px;
	}

	#continue_gen {
		float:left;
		width:100%;
		margin: 0px 0 10px 0;
	}

	#continueButton{
		width:100%;
	}

	#credentials {
		float:left;
		width:100%;
		margin: 0px 0 10px 0;
	}

	#credentials_table{
		width:100%;
		margin: 0 0 5px 0;
	}

	#credentialsButton{
		width:100%;
	}

	#restartButton{
		display:none;
		width:100%;
		margin: 0 0 10px 0;
	}

	#save_transcript{
		display:none;
		float:left;
		font-family: Verdana, Geneva, sans-serif;
		font-variant: small-caps;
		width:100%;
		text-align: center;
		font-size: 14px;
		color:#7d7878;
		margin:0 0 15px 0;
	}

	/*-- The below differes between export and non --*/

	.custom_header{
		margin: 0 0 10px 0;
	}

	#inline_scratch {
		display:none;
	}

	#main_wrapper{
		max-width:650px;
		margin: 0px auto;
	}

	#inner_wrapper{
		height:100%;
		width:100%;
		padding: 0;
	}

	.footer {
		display:none;
	}
</style>
</head>
<body>
  <div id="inline_scratch">
    <div class="file_menu">
      <a href="#" id="open_scratch" class="files">Open</a>  
      <input type="file" id="fileInput" style="display: none;"/>
      <a href="#" id="save_scratch" class="files">Save</a>   
    </div>
    <div class="scratch_frame">
      <textarea id="scratch_pad" placeholder="This space holds text for use with the prompt interactions found to the right."></textarea>
    </div>
  </div> 
  <div id="main_wrapper">
    <div id="inner_wrapper">
      <!--
        START CUSTOM CONTENT
      -->
      <div class="custom_header"><h1>Tremblay v. OpenAI</h1>
<p>
Use one (or more) of the case-aware workflows below to engage with this week's case materials: (1) the <a href="https://lawrpg.org/2024/ai-and-the-law/cases/tremblay/tremblay-complaint.pdf" target="_blank">complaint</a>; and (2) the <a href="https://lawrpg.org/2024/ai-and-the-law/cases/tremblay/tremblay-motion_to_dismiss.pdf" target="_blank">motion to dismiss</a>. If you choose Socrates or Moot, you'll want to read through them first, and if you use Distill & Question, you'll need to read them afterward. Every student has to turn in a transcript for at least one case interaction. If you've been assigned as an attorney to this case, you must turn in a transcript of your MOOT. 
</p>
<p>
Additionally, every student must turn in a transcript of their Weekly Reflection. Remember, absence of evidence will be taken as evidence of absence. "If you don't mention it, it didn't happen." 
</p>
<p>
<a href="https://lawrpg.org/2024/ai-and-the-law/#wk01" target="_blank">See Week One of AI &amp; the Law</a>
</p>
<hr></div>
      <!--
        END CUSTOM CONTENT
      -->
      <div id="button_list"></div>
      <div id="transcript" style="display:none;">
        <div id="output_window"></div>
      </div>
      <div id="thinking_box">
        <div id="thinking"></div>
      </div>
      <div id="text_input" style="display:none;">
        <textarea id="user_input"></textarea>
        <button id="send">Send</button>
        <button id="restartButton_companion">Restart</button>
      </div>
      <div id="chat_text_input" style="display:none;">
        <textarea id="chat_user_input"></textarea>
        <button id="chat_send" >Send</button>
        <button id="restartButton_companion_chat">Restart</button>
      </div>
      <div id="continue_gen" style="display:none;">
        <button id='continueButton'>Continue text generation</button>
      </div>
      <a href="#" id="save_transcript">save transcript</a>
      <button id="restartButton">Restart</button>
      <div id="credentials" style="display:none;">
        <table id="credentials_table">
          <tr><td>API&nbsp;Base:&nbsp;</td><td width="100%"><input id="api_base" style="width:100%"></td></tr>
          <tr><td>API&nbsp;Key:&nbsp;</td><td width="100%"><input id="api_key" style="width:100%"></td></tr>
        </table>        
        <button id='credentialsButton'>Update/Save Credentials</button>
      </div>
      <div id="choices" style="display:none;">
        <select id="toPrompt" style="width:100%;margin:5px 0 8px 0;text-align:center;">
          <option value="">Pass output to prompt (choose one)</option>
        </select>
      </div>
    </div>
  </div>
  <div class="footer">
    <button id="config">Templates &amp; Settings</button>
    <button id="scratch">Scratch Pad</button>
    <span style="float:right">
      <button id="about">About</button>
      <button id="feedback">Feedback</button>
    </span>
  </div>
</body>
</html>